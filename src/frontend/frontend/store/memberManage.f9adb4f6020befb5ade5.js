(window.webpackJsonp=window.webpackJsonp||[]).push([["memberManage"],{"+plY":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"member-manage-wrapper"},[e._m(0),e._v(" "),n("section",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.loading.isLoading,title:e.loading.title},expression:"{\n            isLoading: loading.isLoading,\n            title: loading.title\n        }"}],staticClass:"sub-view-port"},[e.showContent&&e.memberList.length?n("div",{staticClass:"member-manage-content"},[n("div",{staticClass:"info-header"},[n("button",{staticClass:"bk-button bk-primary add-button",attrs:{type:"button"},on:{click:e.addMember}},[e._v("新增成员")]),e._v(" "),n("div",{staticClass:"member-total"},[e._v("该插件目前有"),n("span",[e._v(e._s(e.memberCount))]),e._v("名成员")])]),e._v(" "),n("div",{staticClass:"member-content"},[n("bk-table",{staticStyle:{"margin-top":"15px"},attrs:{data:e.memberList}},[n("bk-table-column",{attrs:{label:"成员",prop:"userName"}}),e._v(" "),n("bk-table-column",{attrs:{label:"角色",prop:"type",formatter:e.typeFormatter}}),e._v(" "),n("bk-table-column",{attrs:{label:"描述",prop:"type",formatter:e.desFormatter}}),e._v(" "),n("bk-table-column",{attrs:{label:"操作",width:"120","class-name":"handler-btn"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"update-btn",on:{click:function(n){return e.handleDelete(t.row)}}},[e._v("删除")])]}}],null,!1,2224479603)})],1)],1)]):e._e(),e._v(" "),e.showContent&&!e.memberList.length?n("empty-tips",{attrs:{title:e.emptyTipsConfig.title,desc:e.emptyTipsConfig.desc,btns:e.emptyTipsConfig.btns}}):e._e()],1),e._v(" "),n("add-member-dialog",{attrs:{"show-dialog":e.showDialog},on:{confirmHandle:e.confirmHandle,cancelHandle:e.cancelHandle}})],1)},r=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"inner-header"},[t("div",{staticClass:"title"},[this._v("成员管理")])])}];a._withStripped=!0,n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},"+v4d":function(e,t,n){"use strict";n.r(t);var a=n("Lpnx"),r=n.n(a);for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);t.default=r.a},"1SFx":function(e,t,n){},"4yEq":function(e,t,n){},"5i2n":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n("06Hw")),r=o(n("YYXh")),s=o(n("Kz1y")),i=n("WIBD");function o(e){return e&&e.__esModule?e:{default:e}}t.default={props:{showDialog:Boolean},data:function(){return{width:520,nameError:!1,memberList:[],typeList:[{label:"Owner",value:"ADMIN"},{label:"Developer",value:"DEVELOPER"}],permissionList:[{name:"插件开发",active:!0},{name:"版本发布",active:!0},{name:"成员管理",active:!0}],memberForm:{memberName:"",type:"ADMIN"},loading:{isLoading:!1,title:""}}},computed:(0,s.default)({},(0,i.mapGetters)("store",{currentAtom:"getCurrentAtom"}),{atomCode:function(){return this.$route.params.atomCode},addMemberConf:function(){return{hasHeader:!1,hasFooter:!0,closeIcon:!1,quickClose:!1}}}),watch:{"memberForm.type":function(e){"ADMIN"===e?this.permissionList.map((function(e){e.active=!0})):(this.permissionList[2].active=!1,this.permissionList[3].active=!1)},showDialog:function(e){e||(this.$validator.reset(),this.memberForm.memberName="",this.memberForm.type="ADMIN")}},methods:{toConfirm:function(){var e=this;return(0,r.default)(a.default.mark((function t(){var n;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validate();case 2:t.sent&&((n={atomCode:e.atomCode,type:e.memberForm.type,member:[]}).member.push(e.memberForm.memberName),e.$emit("confirmHandle",n));case 4:case"end":return t.stop()}}),t,e)})))()},toCloseDialog:function(){this.$emit("cancelHandle")}}}},"9x0E":function(e,t,n){"use strict";n.r(t);var a=n("5i2n"),r=n.n(a);for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);t.default=r.a},AYDO:function(e,t,n){"use strict";var a=n("4yEq");n.n(a).a},C0c0:function(e,t,n){"use strict";n.r(t);var a=n("CQQe"),r=n("u1fQ");for(var s in r)"default"!==s&&function(e){n.d(t,e,(function(){return r[e]}))}(s);n("s/xS");var i=n("psIG"),o=Object(i.a)(r.default,a.a,a.b,!1,null,null,null);o.options.__file="src/components/img-empty-tips.vue",t.default=o.exports},CQQe:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"devops-empty-tips"},[n("img",{staticClass:"no-data-pic",attrs:{src:e.noDataSrc,alt:""}}),e._v(" "),n("p",{staticClass:"title"},[e._v(e._s(e.title))]),e._v(" "),n("p",{staticClass:"desc"},[e._v(e._s(e.desc))]),e._v(" "),n("p",{staticClass:"btns-row"},[e._t("btns",e._l(e.btns,(function(t,a){return e.btns.length?n("button",{key:a,staticClass:"bk-button",class:["bk-"+t.type,"bk-button-"+t.size],on:{click:t.handler}},[e._v("\n                "+e._s(t.text)+"\n            ")]):e._e()})))],2)])},r=[];a._withStripped=!0,n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},CoVf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=n("tNV3"),s=(a=r)&&a.__esModule?a:{default:a};t.default={props:{imgType:{type:String,default:"noData"},title:{type:String,default:""},desc:{type:String,default:""},btns:{type:Array,default:function(){return[]}}},data:function(){return{noDataSrc:""}},created:function(){this.noDataSrc=s.default}}},Lpnx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n("06Hw")),r=o(n("YYXh")),s=o(n("C0c0")),i=o(n("j2mC"));function o(e){return e&&e.__esModule?e:{default:e}}t.default={components:{emptyTips:s.default,addMemberDialog:i.default},data:function(){var e=this;return{memberCount:0,showContent:!1,showDialog:!1,memberList:[],memberType:{ADMIN:"Owner",DEVELOPER:"Developer"},loading:{isLoading:!1,title:""},emptyTipsConfig:{title:"暂时没有成员",desc:"可以新增插件的管理人员或开发人员",btns:[{type:"primary",size:"normal",handler:function(){return e.addMember()},text:"新增成员"}]}}},computed:{atomCode:function(){return this.$route.params.atomCode},userInfo:function(){return window.userInfo},isManager:function(){var e=this;return this.memberList.some((function(t){return t.userName===e.userInfo.username}))}},mounted:function(){var e=this;return(0,r.default)(a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:case"end":return t.stop()}}),t,e)})))()},methods:{typeFormatter:function(e,t,n,a){return this.memberType[n]},desFormatter:function(e,t,n,a){return"ADMIN"===n?"插件开发 版本发布 成员管理":"插件开发 版本发布"},init:function(){var e=this;return(0,r.default)(a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading.isLoading=!0,e.loading.title="数据加载中，请稍候",t.prev=2,t.next=5,e.requestList();case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),e.$bkMessage({message:t.t0.message?t.t0.message:t.t0,theme:"error"});case 10:return t.prev=10,setTimeout((function(){e.loading.isLoading=!1,e.showContent=!0}),100),t.finish(10);case 13:case"end":return t.stop()}}),t,e,[[2,7,10,13]])})))()},requestList:function(){var e=this;return(0,r.default)(a.default.mark((function t(){var n,r;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("store/requestMemberList",{atomCode:e.atomCode});case 3:n=t.sent,e.memberList.splice(0,e.memberList.length),n&&(e.memberCount=n.length,n.map((function(t){e.memberList.push(t)}))),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),r=t.t0.message?t.t0.message:t.t0,"error",e.$bkMessage({message:r,theme:"error"});case 13:case"end":return t.stop()}}),t,e,[[0,8]])})))()},addMember:function(){this.showDialog=!0},confirmHandle:function(e){var t=this;return(0,r.default)(a.default.mark((function n(){var r,s;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=void 0,s=void 0,n.prev=1,n.next=4,t.$store.dispatch("store/addAtomMember",{params:e});case 4:n.sent&&(r="新增成功",s="success",t.requestList(),t.cancelHandle()),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),r=r=n.t0.message?n.t0.message:n.t0,s="error";case 12:return n.prev=12,t.$bkMessage({message:r,theme:s}),n.finish(12);case 15:case"end":return n.stop()}}),n,t,[[1,8,12,15]])})))()},cancelHandle:function(){this.showDialog=!1},requestDeleteMember:function(e){var t=this;return(0,r.default)(a.default.mark((function n(){var r,s;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=void 0,s=void 0,n.prev=1,n.next=4,t.$store.dispatch("store/requestDeleteMember",{atomCode:t.atomCode,id:e});case 4:r="删除成功",s="success",t.requestList(),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),r=r=n.t0.message?n.t0.message:n.t0,s="error";case 13:return n.prev=13,t.$bkMessage({message:r,theme:s}),n.finish(13);case 16:case"end":return n.stop()}}),n,t,[[1,9,13,16]])})))()},handleDelete:function(e){var t,n=this,s=(0,this.$createElement)("p",{style:{textAlign:"center"}},"确定删除成员("+e.userName+")？");this.$bkInfo({title:"删除",content:s,confirmFn:(t=(0,r.default)(a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.requestDeleteMember(e.id);case 1:case"end":return t.stop()}}),t,n)}))),function(){return t.apply(this,arguments)})})}}}},TqCJ:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("bk-dialog",{staticClass:"add-member-dialog",attrs:{title:"新增成员","ok-text":"保存",width:e.width,"close-icon":e.addMemberConf.closeIcon,"quick-close":e.addMemberConf.quickClose},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[n("main",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.loading.isLoading,title:e.loading.title},expression:"{\n            isLoading: loading.isLoading,\n            title: loading.title\n        }"}],staticClass:"member-logo-content"},[n("div",{staticClass:"add-member-content"},[n("form",{staticClass:"bk-form add-member-form g-form-radio",attrs:{onsubmit:"return false"}},[n("div",{staticClass:"bk-form-item member-form-item is-required"},[n("label",{staticClass:"bk-label"},[e._v("成员名称：")]),e._v(" "),n("div",{staticClass:"bk-form-content member-item-content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.memberForm.memberName,expression:"memberForm.memberName"},{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{\n                                required: true\n                            }"}],staticClass:"bk-form-input member-name-input",class:{"is-danger":e.errors.has("memberName")},attrs:{type:"text",placeholder:"请输入成员名称",name:"memberName"},domProps:{value:e.memberForm.memberName},on:{input:function(t){t.target.composing||e.$set(e.memberForm,"memberName",t.target.value)}}}),e._v(" "),e.errors.has("memberName")?n("div",{staticClass:"error-tips"},[e._v("成员名称不能为空")]):e._e()])]),e._v(" "),n("div",{staticClass:"bk-form-item member-form-item is-required"},[n("label",{staticClass:"bk-label"},[e._v("角色：")]),e._v(" "),n("div",{staticClass:"bk-form-content member-item-content"},[n("bk-radio-group",{staticClass:"radio-group",model:{value:e.memberForm.type,callback:function(t){e.$set(e.memberForm,"type",t)},expression:"memberForm.type"}},e._l(e.typeList,(function(t,a){return n("bk-radio",{key:a,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)]),e._v(" "),n("div",{staticClass:"bk-form-item member-form-item is-required"},[n("label",{staticClass:"bk-label"},[e._v("权限列表：")]),e._v(" "),n("div",{staticClass:"bk-form-content permission-list-content"},e._l(e.permissionList,(function(t,a){return n("div",{key:a,staticClass:"permission-name",class:{"active-item":t.active}},[e._v("\n                            "+e._s(t.name)+"\n                        ")])})),0)])])])]),e._v(" "),n("template",{slot:"footer"},[n("div",{staticClass:"bk-dialog-outer"},[[n("bk-button",{staticClass:"bk-dialog-btn bk-dialog-btn-confirm bk-btn-primary",attrs:{theme:"primary"},on:{click:e.toConfirm}},[e._v("\n                    保存\n                ")]),e._v(" "),n("bk-button",{staticClass:"bk-dialog-btn bk-dialog-btn-cancel",on:{click:e.toCloseDialog}},[e._v("\n                    取消\n                ")])]],2)])],2)},r=[];a._withStripped=!0,n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},cETy:function(e,t,n){"use strict";n.r(t);var a=n("+plY"),r=n("+v4d");for(var s in r)"default"!==s&&function(e){n.d(t,e,(function(){return r[e]}))}(s);n("AYDO");var i=n("psIG"),o=Object(i.a)(r.default,a.a,a.b,!1,null,null,null);o.options.__file="src/views/atomDetail/member_manage.vue",t.default=o.exports},j2mC:function(e,t,n){"use strict";n.r(t);var a=n("TqCJ"),r=n("9x0E");for(var s in r)"default"!==s&&function(e){n.d(t,e,(function(){return r[e]}))}(s);n("oBqr");var i=n("psIG"),o=Object(i.a)(r.default,a.a,a.b,!1,null,null,null);o.options.__file="src/components/add-member-dialog.vue",t.default=o.exports},lCFd:function(e,t,n){},oBqr:function(e,t,n){"use strict";var a=n("lCFd");n.n(a).a},"s/xS":function(e,t,n){"use strict";var a=n("1SFx");n.n(a).a},tNV3:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAA5CAYAAABZClfIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkU1NzFFNzcxRjUzQzExRTdBMkU1QUQxMkE2RTNCRDUwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkU1NzFFNzcyRjUzQzExRTdBMkU1QUQxMkE2RTNCRDUwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTU3MUU3NkZGNTNDMTFFN0EyRTVBRDEyQTZFM0JENTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTU3MUU3NzBGNTNDMTFFN0EyRTVBRDEyQTZFM0JENTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5558DUAAAHDUlEQVR42uyc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"},u1fQ:function(e,t,n){"use strict";n.r(t);var a=n("CoVf"),r=n.n(a);for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);t.default=r.a}}]);