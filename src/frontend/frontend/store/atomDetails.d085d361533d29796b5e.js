(window.webpackJsonp=window.webpackJsonp||[]).push([["atomDetails"],{"4gmH":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("hgroup",{staticClass:"detail-info-group"},["atom"===t.type?[n("h3",{staticClass:"title-with-img"},[t._v("\n            "+t._s(t.detail.name)+"\n            "),n("h5",{attrs:{title:t.isPublicTitle}},[t.isPublic?n("icon",{staticClass:"detail-img",attrs:{name:"color-git-code",size:"17"},nativeOn:{click:function(e){return t.goToCode(e)}}}):n("icon",{staticClass:"not-public detail-img",staticStyle:{fill:"#9E9E9E"},attrs:{name:"gray-git-code",size:"17"}})],1)]),t._v(" "),n("h5",{staticClass:"detail-info"},[n("span",[t._v("发布者：")]),n("span",[t._v(t._s(t.detail.publisher||"-"))])]),t._v(" "),n("h5",{staticClass:"detail-info"},[n("span",[t._v("版本：")]),n("span",[t._v(t._s(t.detail.version||"-"))])]),t._v(" "),n("h5",{staticClass:"detail-info detail-score",attrs:{title:"平均评分为"+(t.detail.score||0)+"星（总分为5星），"+(t.detail.totalNum||0)+"位用户评价了此项内容"}},[n("span",[t._v("评分：")]),t._v(" "),n("p",{staticClass:"score-group"},[n("comment-rate",{staticClass:"score-real",style:{width:t.starWidth},attrs:{rate:5,width:14,height:14}}),t._v(" "),n("comment-rate",{attrs:{rate:0,width:14,height:14}})],1),t._v(" "),n("span",{staticClass:"rate-num"},[t._v(t._s(t.detail.totalNum||0))])]),t._v(" "),n("h5",{staticClass:"detail-info"},[n("span",[t._v("操作系统：")]),t._v(" "),n("span",[t.detail.os&&t.detail.os.length?t._l(t.getJobList(t.detail.os),(function(t){return n("i",{key:t,class:[t.icon,"bk-icon"],attrs:{title:t.name}})})):t._e()],2)]),t._v(" "),n("h5",{staticClass:"detail-info"},[n("span",[t._v("分类：")]),n("span",[t._v(t._s(t.detail.classifyName||"-"))])]),t._v(" "),n("h5",{staticClass:"detail-info"},[n("span",[t._v("热度：")]),n("span",[t._v(t._s(t.detail.downloads||0))])]),t._v(" "),n("h5",{staticClass:"detail-info detail-label"},[n("span",[t._v("功能标签：")]),t._v(" "),t._l(t.detail.labelList,(function(e,a){return n("span",{key:a,staticClass:"info-label"},[t._v(t._s(e.labelName))])})),t._v(" "),!t.detail.labelList||t.detail.labelList.length<=0?n("span",[t._v("-")]):t._e()],2),t._v(" "),n("h5",{staticClass:"detail-info detail-maxwidth",attrs:{title:t.detail.summary}},[n("span",[t._v("简介：")]),n("span",[t._v(t._s(t.detail.summary||"-"))])])]:[n("h3",[t._v(t._s(t.detail.name))]),t._v(" "),n("h5",{staticClass:"detail-info"},[n("span",[t._v("发布者：")]),n("span",[t._v(t._s(t.detail.publisher||"-"))])]),t._v(" "),n("h5",{staticClass:"detail-info"},[n("span",[t._v("热度：")]),n("span",[t._v(t._s(t.detail.downloads||0))])]),t._v(" "),n("h5",{staticClass:"detail-info detail-score",attrs:{title:"平均评分为"+(t.detail.score||0)+"星（总分为5星），"+(t.detail.totalNum||0)+"位用户评价了此项内容"}},[n("span",[t._v("评分：")]),t._v(" "),n("p",{staticClass:"score-group"},[n("comment-rate",{staticClass:"score-real",style:{width:t.starWidth},attrs:{rate:5,width:14,height:14}}),t._v(" "),n("comment-rate",{attrs:{rate:0,width:14,height:14}})],1),t._v(" "),n("span",{staticClass:"rate-num"},[t._v(t._s(t.detail.totalNum||0))])]),t._v(" "),n("h5",{staticClass:"detail-info"},[n("span",[t._v("应用范畴：")]),n("span",[t._v(t._s(t._f("templateCategory")(t.detail.categoryList)))])]),t._v(" "),n("h5",{staticClass:"detail-info"},[n("span",[t._v("分类：")]),n("span",[t._v(t._s(t.detail.classifyName||"-"))])]),t._v(" "),n("h5",{staticClass:"detail-info detail-label"},[n("span",[t._v("功能标签：")]),t._v(" "),t._l(t.detail.labelList,(function(e,a){return n("span",{key:a,staticClass:"info-label"},[t._v(t._s(e.labelName))])})),t._v(" "),!t.detail.labelList||t.detail.labelList.length<=0?n("span",[t._v("-")]):t._e()],2),t._v(" "),n("h5",{staticClass:"detail-info detail-maxwidth",attrs:{title:t.detail.summary}},[n("span",[t._v("简介：")]),n("span",[t._v(t._s(t.detail.summary||"-"))])])]],2)},i=[];a._withStripped=!0,n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},"5KfO":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(n("OBCi")),i=r(n("Kz1y")),s=n("WIBD"),o=r(n("aCeT"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={components:{commentRate:o.default},filters:{timeFilter:function(t){var e=new Date(t);return e.getFullYear()+"年"+(e.getMonth()+1)+"月"+e.getDate()+"日"}},props:{parentId:String,commentData:Object,isReply:Boolean},data:function(){var t=this;return{funObj:{expandReplys:{atom:function(e){return t.requestAtomReplyList(e)},template:function(e){return t.requestTemplateReplyList(e)}},priase:{atom:function(e){return t.requestAtomPraiseComment(e)},template:function(e){return t.requestTemplatePraiseComment(e)}}},hadShowMore:!1}},computed:(0,i.default)({},(0,s.mapGetters)("store",{commentList:"getCommentList"}),{comment:function(){var t=this.commentData||{};if(this.isReply){var e=t.replyToUser?"回复@"+t.replyToUser+"：":"";t.commentContent=e+t.replyContent,t.commentId=t.replyId,t.commenter=t.replyer,t.commenterDept=t.replyerDept}return t}}),methods:(0,i.default)({},(0,s.mapActions)("store",["setCommentReplay","setCommentPraise","requestAtomReplyList","requestAtomPraiseComment","requestTemplatePraiseComment","requestTemplateReplyList","clearCommentReply"]),{clickReply:function(){var t=this;if(this.hadShowMore)return this.hadShowMore=!1,this.$parent.showWriteReply=!1,void this.clearCommentReply(this.commentData.commentId);this.setReplyTo(),this.expandReplys().then((function(){t.$parent.showWriteReply=!0,t.$nextTick((function(){return t.$parent.$refs.replyText.focus()}))}))},setReplyTo:function(){var t=this.isReply?this.commentData.commenter:"";this.$emit("replyComment",t)},expandReplys:function(){var t=this;if(this.isReply)return a.default.resolve();var e=this.$route.params.type,n=this.commentData.commentId;return this.funObj.expandReplys[e](n).then((function(e){t.setCommentReplay({id:n,newList:e,isAdd:!1}),t.hadShowMore=!0})).catch((function(e){return t.$bkMessage({message:e.message||e,theme:"error"})}))},priase:function(){var t=this,e=this.$route.params.type,n=this.commentData.commentId;this.funObj.priase[e](n).then((function(e){t.setCommentPraise({id:n,count:e})})).catch((function(e){return t.$bkMessage({message:e.message||e,theme:"error"})}))}})}},AZLH:function(t,e,n){"use strict";var a=n("Dx4T");n.n(a).a},BKwZ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(n("Kz1y")),i=n("WIBD"),s=o(n("eeXL"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={components:{reply:s.default},props:{comment:Object},data:function(){return{reply:"",replyToUser:"",showWriteReply:!1}},computed:(0,a.default)({},(0,i.mapGetters)("store",{commentList:"getCommentList"})),watch:{reply:function(t){(this.replyToUser?new RegExp("^回复@"+this.replyToUser+"："):/^/).test(t)||(this.replyToUser="")}},methods:(0,a.default)({},(0,i.mapActions)("store",["requestAtomReplyComment","requestTemplateReplyComment","setCommentReplay","clearCommentReply"]),{replyComment:function(t){var e=this.replyToUser?new RegExp("^回复@"+this.replyToUser+"："):/^/,n=t?"回复@"+t+"：":"";this.replyToUser=t,this.reply=this.reply.replace(e,n)},cancleComment:function(){this.reply="",this.showWriteReply=!1,this.comment.children.length<=0&&(this.$refs.reply.hadShowMore=!1)},confirmComment:function(){var t=this,e=this.reply;if(""!==e.trim())if(e.length>500)this.$bkMessage({message:"字数不能超过500字，请修改后再回复",theme:"warning"});else{var n=new RegExp("^回复@"+this.replyToUser+"：");e=e.replace(n,"");var a=this.comment.data.commentId,i=this.$route.params.type,s={replyContent:e,replyToUser:this.replyToUser};({atom:function(){return t.requestAtomReplyComment({id:a,postData:s})},template:function(){return t.requestTemplateReplyComment({id:a,postData:s})}})[i]().then((function(e){t.setCommentReplay({id:a,newList:[e],isAdd:!0}),t.reply=""})).catch((function(e){return t.$bkMessage({message:e.message||e,theme:"error"})}))}else this.$bkMessage({message:"请先输入回复内容",theme:"warning"})}})}},Djsx:function(t,e,n){"use strict";n.r(e);var a=n("Z7nc"),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e.default=i.a},Dx4T:function(t,e,n){},"J/0I":function(t,e,n){},P7A1:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"add-comment",on:{click:function(e){return e.target!==e.currentTarget?null:t.cancle(e)}}},[n("section",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isLoading},expression:"{ isLoading }"}],staticClass:"add-main"},[n("h3",{staticClass:"add-title"},[t._v("为"+t._s(t.name)+"评分")]),t._v(" "),n("comment-rate",{staticClass:"add-rate",attrs:{edit:!0,rate:t.rate,height:24,width:23},on:{chooseRate:t.chooseRate}}),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],ref:"commentText",staticClass:"add-content g-input-border",attrs:{placeholder:"请输入你的评论内容（字数上限为500字）"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}}),t._v(" "),n("h3",{staticClass:"g-confirm-buttom"},[n("button",{on:{click:t.cancle}},[t._v("取消")]),n("button",{on:{click:t.confirm}},[t._v("确定")])])],1)])},i=[];a._withStripped=!0,n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},Rx3T:function(t,e,n){"use strict";n.r(e);var a=n("z7bR"),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e.default=i.a},VFTd:function(t,e,n){"use strict";var a=n("riKk");n.n(a).a},VKaH:function(t,e,n){t.exports={default:n("tLiR"),__esModule:!0}},X0zA:function(t,e,n){var a=n("/6KZ");a(a.S,"Number",{isNaN:function(t){return t!=t}})},Ydfy:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isLoading},expression:"{ isLoading }"}],staticClass:"detail-home"},[n("h3",{staticClass:"market-home-title"},[n("icon",{staticClass:"title-icon",attrs:{name:"color-logo-store",size:"25"}}),t._v(" "),n("p",{staticClass:"title-name"},[n("router-link",{staticClass:"back-home",attrs:{to:{name:"atomHome"}}},[t._v("研发商店")]),t._v(" "),n("i",{staticClass:"right-arrow banner-arrow"}),t._v(" "),n("span",{staticClass:"back-home",on:{click:t.backToStore}},[t._v(t._s(t._f("typeFilter")(t.type)))]),t._v(" "),n("i",{staticClass:"right-arrow banner-arrow"}),t._v(" "),n("span",{staticClass:"banner-des"},[t._v(t._s(t.detail.name))])],1),t._v(" "),n("router-link",{staticClass:"title-work",attrs:{to:{name:"atomList"}}},[t._v("工作台")])],1),t._v(" "),n("main",{staticClass:"store-main"},[n("section",{staticClass:"detail-title"},[t.detail.logoUrl?n("img",{staticClass:"detail-pic atom-logo",attrs:{src:t.detail.logoUrl}}):n("icon",{staticClass:"detail-pic atom-icon",staticStyle:{fill:"#C3CDD7"},attrs:{name:t.getAtomIcon(t.detail.code),size:"160"}}),t._v(" "),n("detail-info",{attrs:{detail:t.detail,type:t.type}}),t._v(" "),t.buttonInfo.disable?n("bk-popover",{attrs:{placement:"top"}},[n("button",{staticClass:"bk-button bk-primary",attrs:{type:"button",disabled:""}},[t._v("安装")]),t._v(" "),n("template",{slot:"content"},[n("p",[t._v(t._s(t.buttonInfo.des))])])],2):n("button",{staticClass:"detail-install",on:{click:t.goToInstall}},[t._v("安装")])],1),t._v(" "),n("bk-tab",{staticClass:"detail-tabs",attrs:{type:"currentType",active:"des"}},[n("bk-tab-panel",{staticClass:"summary-tab",attrs:{name:"des",label:"概述"}},[t.detail.description?n("mavon-editor",{attrs:{editable:!1,"default-open":"preview",subfield:!1,"toolbars-flag":!1,"box-shadow":!1,"external-link":!1},model:{value:t.detail.description,callback:function(e){t.$set(t.detail,"description",e)},expression:"detail.description"}}):t._e(),t._v(" "),t.detail.description?t._e():n("p",{staticClass:"g-empty summary-empty"},[t._v("发布者很懒，什么都没留下！")])],1),t._v(" "),n("bk-tab-panel",{staticClass:"detail-tab",attrs:{name:"comment",label:"评价"}},[n("h3",{staticClass:"comment-title"},[t._v("用户评分")]),t._v(" "),n("section",{staticClass:"rate-group"},[n("h3",{staticClass:"rate-title"},[n("animated-integer",{attrs:{value:t.detail.avgScore,digits:"1"}}),n("span",[t._v("共"+t._s(t.detail.totalNum)+"份评分")])],1),t._v(" "),n("hgroup",{staticClass:"rate-card"},t._l(t.detail.scoreItemList,(function(e,a){return n("h3",{key:a,staticClass:"rate-info"},[n("comment-rate",{attrs:{rate:e.score,width:10,height:11}}),t._v(" "),n("p",{staticClass:"rate-bar"},[n("span",{staticClass:"dark-gray",style:{flex:e.num}}),t._v(" "),n("span",{staticClass:"gray",style:{flex:+t.detail.totalNum>0?t.detail.totalNum-e.num:1}})]),t._v(" "),n("span",{staticClass:"rate-sum"},[t._v(t._s(e.num))])],1)})),0),t._v(" "),n("button",{staticClass:"add-common",on:{click:function(e){t.showComment=!0}}},[t.commentInfo.commentFlag?[t._v("修改评论")]:t._e(),t._v(" "),[t._v("撰写评论")]],2)]),t._v(" "),n("h3",{staticClass:"comment-title"},[t._v("用户评论")]),t._v(" "),t._l(t.commentList,(function(t,e){return n("hgroup",{key:e},[n("comment",{attrs:{comment:t}})],1)})),t._v(" "),!t.isLoadEnd&&t.commentList.length>0?n("p",{staticClass:"comments-more",on:{click:function(e){return t.getComments(!0)}}},[t._v("阅读更多内容")]):t._e(),t._v(" "),t.commentList.length<=0?n("p",{staticClass:"g-empty comment-empty"},[t._v("空空如洗，快来评论一下吧！")]):t._e()],2)],1),t._v(" "),n("transition",{attrs:{name:"atom-fade"}},[t.showComment?n("commentDialog",{attrs:{name:t.detail.name,code:t.detailCode,id:t.detailId,"comment-id":t.commentInfo.commentId},on:{freshComment:t.freshComment,closeDialog:function(e){t.showComment=!1}}}):t._e()],1)],1)])},i=[];a._withStripped=!0,n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},Z7nc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,i=n("VKaH"),s=(a=i)&&a.__esModule?a:{default:a};e.default={props:{value:{required:!0,type:Number},digits:{type:Number,default:0}},data:function(){return{tweeningValue:0}},computed:{formatValue:function(){return Number(this.tweeningValue).toFixed(this.digits)}},watch:{value:function(t,e){this.tween(e,t)}},mounted:function(){this.tween(0,this.value)},methods:{tween:function(t,e){var n=this;if((0,s.default)(+e))return 0;var a=Math.abs(e-t),i=e-t>0?1:-1,o=Math.ceil(a/30*Math.pow(10,this.digits))/Math.pow(10,this.digits),r=25/Math.ceil(a/o),m=1;!function t(){if(m<r)return requestAnimationFrame(t),void m++;n.tweeningValue+=o*i,(1===i?n.tweeningValue<e:n.tweeningValue>e)?(requestAnimationFrame(t),m=1):n.tweeningValue=e,n.tweeningValue=+Number(n.tweeningValue).toFixed(n.digits)}()}}}},ZywA:function(t,e,n){"use strict";n.r(e);var a=n("5KfO"),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e.default=i.a},cnNJ:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,i=n("aCeT"),s=(a=i)&&a.__esModule?a:{default:a};e.default={components:{commentRate:s.default},filters:{atomJobType:function(t){switch(t){case"AGENT":return"编译环境";case"AGENT_LESS":return"无编译环境"}},templateCategory:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t.map((function(t){return t.categoryName}))||[],n=e.join("，")||"-";return n}},props:{detail:Object,type:String},computed:{starWidth:function(){var t=Math.floor(this.detail.score);return 17*t+14*(this.detail.score-t)+"px"},isPublic:function(){return"LOGIN_PUBLIC"===this.detail.visibilityLevel},isPublicTitle:function(){return this.isPublic?"查看源码":"未开源"}},methods:{getJobList:function(t){var e=[];return t.forEach((function(t){switch(t){case"LINUX":e.push({icon:"icon-linux-view",name:"Linux"});break;case"WINDOWS":e.push({icon:"icon-windows",name:"Windows"});break;case"MACOS":e.push({icon:"icon-macos",name:"macOS"})}})),e},goToCode:function(){window.open(this.detail.codeSrc,"_blank")}}}},d8Bw:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",{staticClass:"comment-main",class:{"comment-reply":t.isReply}},[n("img",{staticClass:"comment-photo",attrs:{src:t.comment.profileUrl}}),t._v(" "),n("h5",{staticClass:"commenter-info"},[n("span",[t._v(t._s(t.comment.commenter))]),n("span",[t._v(t._s(t.comment.commenterDept))])]),t._v(" "),n("p",{staticClass:"comment-content"},[t._v(t._s(t.comment.commentContent))]),t._v(" "),n("h5",{staticClass:"comment-static"},[t.isReply?t._e():n("comment-rate",{staticClass:"commet-rate",attrs:{rate:t.comment.score,width:11,height:12}}),t._v(" "),n("span",[t._v(t._s(t._f("timeFilter")(t.comment.updateTime)))]),t._v(" "),n("span",{staticClass:"comment-replay",on:{click:t.clickReply}},[t._v("回复\n            "),+t.comment.replyCount?n("span",[t._v("("+t._s(t.comment.replyCount)+")")]):t._e()]),t._v(" "),t.isReply?t._e():n("icon",{staticClass:"comment-praise",style:{fill:t.comment.praiseFlag?"#979BA5":"none"},attrs:{name:"praise",size:"14"},nativeOn:{click:function(e){return t.priase(e)}}}),t._v(" "),t.isReply?t._e():n("span",[t._v(t._s(t.comment.praiseCount))])],1)])},i=[];a._withStripped=!0,n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},eeXL:function(t,e,n){"use strict";n.r(e);var a=n("d8Bw"),i=n("ZywA");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("hGqh");var o=n("psIG"),r=Object(o.a)(i.default,a.a,a.b,!1,null,"7c7e9726",null);r.options.__file="src/components/common/comment/reply.vue",e.default=r.exports},hBnU:function(t,e,n){"use strict";n.r(e);var a=n("qHRI"),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e.default=i.a},hGqh:function(t,e,n){"use strict";var a=n("wD4B");n.n(a).a},hipE:function(t,e,n){"use strict";n.r(e);var a=n("tbzW"),i=n("mXTn");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("VFTd");var o=n("psIG"),r=Object(o.a)(i.default,a.a,a.b,!1,null,"6636790e",null);r.options.__file="src/components/common/comment/index.vue",e.default=r.exports},"iXg+":function(t,e,n){"use strict";var a=n("J/0I");n.n(a).a},iuK6:function(t,e,n){"use strict";n.r(e);var a=n("lYNY"),i=n("Djsx");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);var o=n("psIG"),r=Object(o.a)(i.default,a.a,a.b,!1,null,null,null);r.options.__file="src/components/common/animatedInteger/index.vue",e.default=r.exports},lYNY:function(t,e,n){"use strict";var a=function(){var t=this.$createElement;return(this._self._c||t)("span",[this._v(this._s(this.formatValue))])},i=[];a._withStripped=!0,n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},lfVM:function(t,e,n){"use strict";n.r(e);var a=n("4gmH"),i=n("pOQ0");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("rHxp");var o=n("psIG"),r=Object(o.a)(i.default,a.a,a.b,!1,null,"2543d0ce",null);r.options.__file="src/components/common/detail-info/index.vue",e.default=r.exports},mXTn:function(t,e,n){"use strict";n.r(e);var a=n("BKwZ"),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e.default=i.a},pOQ0:function(t,e,n){"use strict";n.r(e);var a=n("cnNJ"),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e.default=i.a},pagr:function(t,e,n){"use strict";n.r(e);var a=n("P7A1"),i=n("Rx3T");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("AZLH");var o=n("psIG"),r=Object(o.a)(i.default,a.a,a.b,!1,null,"efa0437a",null);r.options.__file="src/components/common/comment/commentDialog.vue",e.default=r.exports},qHRI:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=h(n("TcPG")),i=h(n("6J4u")),s=h(n("OBCi")),o=h(n("Kz1y")),r=h(n("i7/w")),m=h(n("/svt"));n("F7H9");var l=n("WIBD"),c=h(n("lfVM")),u=h(n("aCeT")),d=h(n("hipE")),f=h(n("pagr")),p=h(n("iuK6"));function h(t){return t&&t.__esModule?t:{default:t}}r.default.use(m.default),e.default={components:{comment:d.default,commentRate:u.default,commentDialog:f.default,detailInfo:c.default,animatedInteger:p.default},filters:{typeFilter:function(t){var e="";switch(t){case"template":e="流水线模板";break;default:e="流水线插件"}return e}},data:function(){var t=this;return{detailId:"",pageSize:10,pageIndex:1,detail:{},isLoading:!0,isLoadEnd:!1,showComment:!1,showInstallConfirm:!1,commentInfo:{},methodsGenerator:{comment:{atom:function(e){return t.requestAtomComments(e)},template:function(e){return t.requestTemplateComments(e)}},scoreDetail:{atom:function(){return t.requestAtomScoreDetail(t.detailCode)},template:function(){return t.requestTemplateScoreDetail(t.detailCode)}}}}},computed:(0,o.default)({},(0,l.mapGetters)("store",{commentList:"getCommentList",markerQuey:"getMarketQuery"}),{detailCode:function(){return this.$route.params.code},type:function(){return this.$route.params.type},buttonInfo:function(){var t="atom"===this.type?"插件":"模板",e={};return e.disable=this.detail.defaultFlag||!this.detail.flag,this.detail.defaultFlag&&(e.des="通用流水线"+t+"，所有项目默认可用，无需安装"),this.detail.flag||(e.des="你没有该流水线"+t+"的安装权限，请联系流水线"+t+"发布者"),e}}),created:function(){this.getDetail()},methods:(0,o.default)({},(0,l.mapActions)("store",["setCommentList","requestAtom","requestAtomStatistic","requestTemplateDetail","requestAtomComments","requestAtomScoreDetail","requestTemplateComments","requestTemplateScoreDetail"]),{freshComment:function(t){var e=this.commentList;if(this.commentInfo.commentFlag){var n=(e.find((function(e){return e.data.commentId===t.commentId}))||{}).data||{};(0,o.default)(n,t)}else e.unshift({data:t,children:[]});this.commentInfo.commentFlag=!0,this.commentInfo.commentId=t.commentId,this.setCommentList(e),this.getScoreDetail()},getAtomIcon:function(t){return document.getElementById(t)?t:"placeholder"},getDetail:function(){var t=this;this.isLoading=!0,(0,{atom:function(){return t.getAtomDetail()},template:function(){return t.getTemplateDetail()}}[this.$route.params.type])().then((function(){t.getComments(),t.getScoreDetail()})).catch((function(e){t.$bkMessage({message:e.message||e,theme:"error"})})).finally((function(){return t.isLoading=!1}))},getAtomDetail:function(){var t=this,e=this.detailCode;return s.default.all([this.requestAtom({atomCode:e}),this.requestAtomStatistic({atomCode:e})]).then((function(e){var n=(0,i.default)(e,2),a=n[0],s=n[1];t.detail=a||{},t.detailId=a.atomId,t.detail.downloads=s.downloads||0,t.commentInfo=a.userCommentInfo||{}}))},getTemplateDetail:function(){var t=this,e=this.detailCode;return this.requestTemplateDetail(e).then((function(e){t.detail=e||{},t.detailId=e.templateId,t.detail.name=e.templateName,t.commentInfo=e.userCommentInfo||{}}))},getComments:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n={code:this.detailCode,page:this.pageIndex,pageSize:this.pageSize},a=this.methodsGenerator.comment[this.type];a(n).then((function(n){var a=n.count||0,i=n.records||[],s=e?t.commentList:[];i.forEach((function(t){s.push({data:t,children:[]})})),t.isLoadEnd=s.length>=a,t.pageIndex++,t.setCommentList(s)}))},getScoreDetail:function(){var t=this;(0,this.methodsGenerator.scoreDetail[this.type])().then((function(e){var n=[{score:5,num:0},{score:4,num:0},{score:3,num:0},{score:2,num:0},{score:1,num:0}];(e.scoreItemList||[]).forEach((function(t){var e=n.find((function(e){return e.score===t.score}));e&&(e.num=t.num)})),t.$set(t.detail,"score",e.avgScore),t.$set(t.detail,"avgScore",e.avgScore),t.$set(t.detail,"totalNum",e.totalNum),t.$set(t.detail,"scoreItemList",n)}))},goToInstall:function(){var t="atom"===this.type?"atomCode":"templateCode",e="atom"===this.type?"installAtom":"installTemplate",n=(0,a.default)({},t,this.detailCode);this.$router.push({name:e,params:n,hash:"#MARKET"})},backToStore:function(){(0,o.default)(this.markerQuey,{pipeType:this.type}),this.$router.push({name:"atomHome",query:this.markerQuey})}})}},rHxp:function(t,e,n){"use strict";var a=n("wSbb");n.n(a).a},rT5C:function(t,e,n){"use strict";n.r(e);var a=n("Ydfy"),i=n("hBnU");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("iXg+");var o=n("psIG"),r=Object(o.a)(i.default,a.a,a.b,!1,null,"72950fda",null);r.options.__file="src/views/market/detail.vue",e.default=r.exports},riKk:function(t,e,n){},tLiR:function(t,e,n){n("X0zA"),t.exports=n("TaGV").Number.isNaN},tbzW:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("reply",{ref:"reply",attrs:{"comment-data":t.comment.data,"parent-id":t.comment.commentId},on:{replyComment:t.replyComment}}),t._v(" "),t._l(t.comment.children,(function(e){return n("reply",{key:e.commentId,attrs:{"comment-data":e,"parent-id":t.comment.commentId,"is-reply":!0},on:{replyComment:t.replyComment}})})),t._v(" "),t.showWriteReply?n("div",{staticClass:"comment-reply-text"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reply,expression:"reply"}],ref:"replyText",staticClass:"reply-content g-input-border",attrs:{placeholder:"请输入你的回复内容（字数上限为500字）",autofocus:""},domProps:{value:t.reply},on:{input:function(e){e.target.composing||(t.reply=e.target.value)}}}),t._v(" "),n("h3",{staticClass:"g-confirm-buttom reply-button"},[n("button",{on:{click:t.cancleComment}},[t._v("取消")]),n("button",{on:{click:t.confirmComment}},[t._v("发布")])])]):t._e()],2)},i=[];a._withStripped=!0,n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}))},wD4B:function(t,e,n){},wSbb:function(t,e,n){},z7bR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(n("Kz1y")),i=n("WIBD"),s=o(n("aCeT"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={components:{commentRate:s.default},props:{name:String,id:String,commentId:String,code:String},data:function(){var t=this;return{isLoading:!1,rate:0,comment:"",modifyCommentGenerator:{atom:function(e){return t.requestAtomModifyComment(e)},template:function(e){return t.requestTemplateModifyComment(e)}},addCommentGenerator:{atom:function(e){return t.requestAddAtomComment(e)},template:function(e){return t.requestAddTemplateComment(e)}},getCommentGenerator:{atom:function(){return t.requestAtomUserComment(t.commentId)},template:function(){return t.requestTemplateUserComment(t.commentId)}}}},computed:{type:function(){return this.$route.params.type}},mounted:function(){this.getComment()},methods:(0,a.default)({},(0,i.mapActions)("store",["requestAddAtomComment","requestAddTemplateComment","requestTemplateModifyComment","requestTemplateUserComment","requestAtomModifyComment","requestAtomUserComment"]),{getComment:function(){var t=this;this.commentId&&(this.isLoading=!0,(0,this.getCommentGenerator[this.type])().then((function(e){t.rate=e.score||5,t.comment=e.commentContent||""})).catch((function(e){t.$bkMessage({message:e.message||e,theme:"error"})})).finally((function(){t.$refs.commentText.focus(),t.isLoading=!1})))},chooseRate:function(t){this.rate=t},cancle:function(){this.$emit("closeDialog")},confirm:function(){var t=this;this.rate<=0?this.$bkMessage({message:"请先评分，再发布评价",theme:"warning"}):this.comment.length>=500?this.$bkMessage({message:"字数不能超过500字，请修改后再评价",theme:"warning"}):{modify:function(){return t.modifyComment()},add:function(){return t.addComment()}}[this.commentId?"modify":"add"]().then((function(e){t.$bkMessage({message:"评论成功",theme:"success"}),t.$emit("freshComment",e),t.$emit("closeDialog")})).catch((function(e){t.$bkMessage({message:e.message||e,theme:"error"})}))},modifyComment:function(){var t=this,e={id:this.commentId,postData:{commentContent:this.comment,score:this.rate}};return this.modifyCommentGenerator[this.type](e).then((function(){return{commentId:t.commentId,commentContent:t.comment,score:t.rate,commentTime:new Date}}))},addComment:function(){var t={id:this.id,code:this.code,postData:{commentContent:this.comment,score:this.rate}};return this.addCommentGenerator[this.type](t)}})}}}]);