(window.webpackJsonp=window.webpackJsonp||[]).push([["atomInformation"],{A3QF:function(t,e,a){"use strict";a.r(e);var i=a("eiY2"),s=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e.default=s.a},H2wP:function(t,e,a){"use strict";var i=a("cMm9");a.n(i).a},Pf5Z:function(t,e,a){"use strict";a.r(e);var i=a("dot/"),s=a("A3QF");for(var o in s)"default"!==o&&function(t){a.d(e,t,(function(){return s[t]}))}(o);a("H2wP");var n=a("psIG"),r=Object(n.a)(s.default,i.a,i.b,!1,null,null,null);r.options.__file="src/views/atomDetail/detail.vue",e.default=r.exports},cMm9:function(t,e,a){},"dot/":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"atom-information-wrapper"},[t._m(0),t._v(" "),a("section",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.loading.isLoading,title:t.loading.title},expression:"{\n            isLoading: loading.isLoading,\n            title: loading.title\n        }"}],staticClass:"sub-view-port"},[t.showContent?a("div",{staticClass:"atom-information-content"},[a("div",{staticClass:"atom-form"},[a("div",{staticClass:"item-form item-form-left"},[a("div",{staticClass:"detail-form-item multi-item"},[a("div",{staticClass:"detail-form-item"},[a("div",{staticClass:"info-label"},[t._v("名称：")]),t._v(" "),a("div",{staticClass:"info-value"},[t._v(t._s(t.atomDetail.name))])]),t._v(" "),a("div",{staticClass:"detail-form-item"},[a("div",{staticClass:"info-label"},[t._v("标识：")]),t._v(" "),a("div",{staticClass:"info-value"},[t._v(t._s(t.atomDetail.atomCode))])])]),t._v(" "),a("div",{staticClass:"detail-form-item multi-item"},[a("div",{staticClass:"detail-form-item"},[a("div",{staticClass:"info-label"},[t._v("范畴：")]),t._v(" "),a("div",{staticClass:"info-value"},[t._v(t._s(t.categoryMap[t.atomDetail.category]))])]),t._v(" "),a("div",{staticClass:"detail-form-item"},[a("div",{staticClass:"info-label"},[t._v("分类：")]),t._v(" "),a("div",{staticClass:"info-value"},[t._v(t._s(t.atomDetail.classifyName))])])]),t._v(" "),a("div",{staticClass:"detail-form-item multi-item"},[a("div",{staticClass:"detail-form-item"},[a("div",{staticClass:"info-label"},[t._v("操作系统：")]),t._v(" "),t.atomDetail.os?a("div",{staticClass:"info-value"},["AGENT"===t.atomDetail.jobType?a("span",[-1!==t.atomDetail.os.indexOf("LINUX")?a("i",{staticClass:"bk-icon icon-linux-view"}):t._e(),t._v(" "),-1!==t.atomDetail.os.indexOf("WINDOWS")?a("i",{staticClass:"bk-icon icon-windows"}):t._e(),t._v(" "),-1!==t.atomDetail.os.indexOf("MACOS")?a("i",{staticClass:"bk-icon icon-macos"}):t._e()]):t._e()]):t._e()])]),t._v(" "),a("div",{staticClass:"detail-form-item"},[a("div",{staticClass:"info-label"},[t._v("发布包：")]),t._v(" "),a("div",{staticClass:"info-value"},[t._v(t._s(t.atomDetail.pkgName))])]),t._v(" "),a("div",{staticClass:"detail-form-item"},[a("div",{staticClass:"info-label"},[t._v("功能标签：")]),t._v(" "),a("div",{staticClass:"info-value feature-label"},t._l(t.atomDetail.labels,(function(e,i){return a("div",{key:i,staticClass:"label-card"},[t._v(t._s(e))])})),0)]),t._v(" "),a("div",{staticClass:"detail-form-item"},[a("div",{staticClass:"info-label"},[t._v("简介：")]),t._v(" "),a("div",{staticClass:"info-value"},[t._v(t._s(t.atomDetail.summary))])]),t._v(" "),a("div",{staticClass:"detail-form-item"},[a("div",{staticClass:"info-label"},[t._v("详细描述：")]),t._v(" "),a("div",{ref:"editor",staticClass:"info-value markdown-editor-show",class:{overflow:!t.isDropdownShow}},[a("mavon-editor",{attrs:{editable:!1,"default-open":"preview",subfield:!1,"toolbars-flag":!1,"external-link":!1,"box-shadow":!1},model:{value:t.atomDetail.description,callback:function(e){t.$set(t.atomDetail,"description",e)},expression:"atomDetail.description"}})],1)]),t._v(" "),t.isOverflow?a("div",{staticClass:"toggle-btn",on:{click:function(e){return t.toggleShow()}}},[t._v(t._s(t.isDropdownShow?"收起":"展开")+"\n                        "),a("i",{class:["bk-icon icon-angle-down",{"icon-flip":t.isDropdownShow}]})]):t._e()]),t._v(" "),a("div",{staticClass:"item-form item-form-right"},[t.atomDetail.logoUrl?a("img",{attrs:{src:t.atomDetail.logoUrl}}):a("i",{staticClass:"bk-icon icon-placeholder atom-logo"})])]),t._v(" "),a("div",{staticClass:"version-content"},[a("div",{staticClass:"version-info-header"},[a("div",{staticClass:"info-title"},[t._v("版本列表")]),t._v(" "),a("button",{staticClass:"bk-button bk-primary",attrs:{type:"button",disabled:-1===t.upgradeStatus.indexOf(t.versionList[0].atomStatus)},on:{click:function(e){return t.editAtom("upgradeAtom",t.versionList[0].atomId)}}},[t._v("新增版本")])]),t._v(" "),a("bk-table",{staticStyle:{"margin-top":"15px"},attrs:{data:t.versionList}},[a("bk-table-column",{attrs:{label:"版本",prop:"version"}}),t._v(" "),a("bk-table-column",{attrs:{label:"状态",prop:"atomStatus",formatter:t.statusFormatter}}),t._v(" "),a("bk-table-column",{attrs:{label:"创建人",prop:"creator"}}),t._v(" "),a("bk-table-column",{attrs:{label:"创建时间",prop:"createTime"}}),t._v(" "),a("bk-table-column",{attrs:{label:"操作",width:"120","class-name":"handler-btn"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("section",{directives:[{name:"show",rawName:"v-show",value:!t.index,expression:"!index"}]},["INIT"===e.row.atomStatus?a("span",{staticClass:"update-btn",on:{click:function(a){return t.editAtom("shelfAtom",e.row.atomId)}}},[t._v("上架")]):t._e(),t._v(" "),t.progressStatus.indexOf(e.row.atomStatus)>-1?a("span",{staticClass:"update-btn",on:{click:function(a){return t.routerProgress(e.row.atomId)}}},[t._v("进度")]):t._e()])]}}],null,!1,1006475346)})],1)],1)]):t._e()])])},s=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"inner-header"},[e("div",{staticClass:"title"},[this._v("插件详情")])])}];i._withStripped=!0,a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s}))},eiY2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(a("Kz1y")),s=l(a("06Hw")),o=l(a("YYXh")),n=a("Vgl9"),r=l(a("/svt"));function l(t){return t&&t.__esModule?t:{default:t}}a("F7H9"),window.Vue.use(r.default),e.default={filters:{levelFilter:function(t){return"LOGIN_PUBLIC"===t?"是":"否"}},data:function(){return{showContent:!1,isDropdownShow:!1,isOverflow:!1,versionList:[],progressStatus:["COMMITTING","BUILDING","BUILD_FAIL","TESTING","AUDITING"],upgradeStatus:["AUDIT_REJECT","RELEASED","GROUNDING_SUSPENSION"],atomDetail:{visibilityLevel:"LOGIN_PUBLIC"},osMap:{LINUX:"Linux",WINDOWS:"Windows",MACOS:"macOS",NONE:"无构建环境"},categoryMap:{TASK:"流水线插件",TRIGGER:"流水线触发器"},jobTypeMap:{AGENT:"编译环境",AGENT_LESS:"无编译环境"},loading:{isLoading:!1,title:""}}},computed:{atomCode:function(){return this.$route.params.atomCode},atomStatusList:function(){return n.atomStatusMap}},created:function(){var t=this;return(0,o.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.requestVersionList();case 2:return e.next=4,t.requestAtomDetail();case 4:case"end":return e.stop()}}),e,t)})))()},methods:{statusFormatter:function(t,e,a,i){return this.atomStatusList[a]},requestAtomDetail:function(){var t=this;return(0,o.default)(s.default.mark((function e(){var a,o;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading.isLoading=!0,t.loading.title="数据加载中，请稍候",e.prev=2,e.next=5,t.$store.dispatch("store/requestAtom",{atomCode:t.atomCode});case 5:a=e.sent,(0,i.default)(t.atomDetail,a),t.atomDetail.labels=a.labelList.map((function(t){return t.labelName})),t.$store.dispatch("store/updateCurrentaAtom",{res:a}),t.$nextTick((function(){setTimeout((function(){t.isOverflow=t.$refs.editor.scrollHeight>180}),1e3)})),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(2),o=e.t0.message?e.t0.message:e.t0,"error",t.$bkMessage({message:o,theme:"error"});case 17:return e.prev=17,setTimeout((function(){t.loading.isLoading=!1}),1e3),t.showContent=!0,e.finish(17);case 21:case"end":return e.stop()}}),e,t,[[2,12,17,21]])})))()},requestVersionList:function(){var t=this;return(0,o.default)(s.default.mark((function e(){var a,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("store/requestVersionList",{atomCode:t.atomCode});case 3:a=e.sent,t.versionList.splice(0,t.versionList.length),a.records.map((function(e){t.versionList.push(e)})),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),i=e.t0.message?e.t0.message:e.t0,"error",t.$bkMessage({message:i,theme:"error"});case 13:case"end":return e.stop()}}),e,t,[[0,8]])})))()},routerProgress:function(t){this.$router.push({name:"releaseProgress",params:{releaseType:"upgrade",atomId:t}})},editAtom:function(t,e){this.$router.push({name:t,params:{atomId:e}})},atomOs:function(t){var e=this,a=[];return t.forEach((function(t){a.push(e.osMap[t])})),a.join("，")},toggleShow:function(){this.isDropdownShow=!this.isDropdownShow}}}}}]);