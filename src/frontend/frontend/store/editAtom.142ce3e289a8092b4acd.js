(window.webpackJsonp=window.webpackJsonp||[]).push([["editAtom"],{"/9Wh":function(t,e,s){t.exports={default:s("3Hfq"),__esModule:!0}},"3Hfq":function(t,e,s){var a=s("TaGV"),o=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},"3vJe":function(t,e,s){"use strict";
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */e.parse=function(t,e){if("string"!=typeof t)throw new TypeError("argument str must be a string");for(var s={},o=e||{},i=t.split(r),l=o.decode||a,u=0;u<i.length;u++){var c=i[u],m=c.indexOf("=");if(!(m<0)){var d=c.substr(0,m).trim(),p=c.substr(++m,c.length).trim();'"'==p[0]&&(p=p.slice(1,-1)),null==s[d]&&(s[d]=n(p,l))}}return s},e.serialize=function(t,e,s){var a=s||{},r=a.encode||o;if("function"!=typeof r)throw new TypeError("option encode is invalid");if(!i.test(t))throw new TypeError("argument name is invalid");var n=r(e);if(n&&!i.test(n))throw new TypeError("argument val is invalid");var l=t+"="+n;if(null!=a.maxAge){var u=a.maxAge-0;if(isNaN(u))throw new Error("maxAge should be a Number");l+="; Max-Age="+Math.floor(u)}if(a.domain){if(!i.test(a.domain))throw new TypeError("option domain is invalid");l+="; Domain="+a.domain}if(a.path){if(!i.test(a.path))throw new TypeError("option path is invalid");l+="; Path="+a.path}if(a.expires){if("function"!=typeof a.expires.toUTCString)throw new TypeError("option expires is invalid");l+="; Expires="+a.expires.toUTCString()}a.httpOnly&&(l+="; HttpOnly");a.secure&&(l+="; Secure");if(a.sameSite){switch("string"==typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return l};var a=decodeURIComponent,o=encodeURIComponent,r=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function n(t,e){try{return e(t)}catch(e){return t}}},"8XlI":function(t,e,s){"use strict";s.r(e);var a=s("gNre"),o=s.n(a);for(var r in a)"default"!==r&&function(t){s.d(e,t,(function(){return a[t]}))}(r);e.default=o.a},ALRR:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIyLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8yIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDI0IDEwMjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojQkRDQ0Q0O30KPC9zdHlsZT4KPGcgaWQ9IuWbvuWxgl8xMiI+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODAwLDk2SDIyNGMtNzAuNywwLTEyOCw1Ny4zLTEyOCwxMjh2NTc2YzAsNzAuNyw1Ny4zLDEyOCwxMjgsMTI4aDU3NmM3MC43LDAsMTI4LTU3LjMsMTI4LTEyOFYyMjQKCQlDOTI4LDE1My4zLDg3MC43LDk2LDgwMCw5NnogTTg3OC4yLDg1NS42TDc0OS4zLDcyNi43YzQ4LjEtNTMuMSw3OC41LTEyMi40LDgyLjMtMTk4LjdIODk2djI3MkM4OTYsODIwLjcsODg5LjQsODM5LjksODc4LjIsODU1LjYKCQl6IE0xNDUuOCw4NTUuNkMxMzQuNiw4MzkuOSwxMjgsODIwLjcsMTI4LDgwMFY1MjhoNjQuNGMzLjgsNzYuMywzNC4yLDE0NS42LDgyLjMsMTk4LjdMMTQ1LjgsODU1LjZ6IE0xNDUuOCwxNjguNGwxMjguOSwxMjguOQoJCWMtNDguMSw1My4xLTc4LjUsMTIyLjQtODIuMywxOTguN0gxMjhWMjI0QzEyOCwyMDMuMywxMzQuNiwxODQuMSwxNDUuOCwxNjguNHogTTY3MS4yLDQ5NmMtMy4yLTMyLjItMTUuOS02MS42LTM1LjMtODUuMwoJCWw5MC44LTkwLjhjMjEuMywyMy43LDM4LjMsNTAuNSw1MC43LDc5LjljMTIuOSwzMC42LDIwLjQsNjIuOSwyMi4yLDk2LjFMNjcxLjIsNDk2TDY3MS4yLDQ5NnogTTUyOCwzODUKCQljMjIuOSwyLjgsNDQuMywxMS43LDYyLjUsMjUuOUw1MjgsNDczLjRWMzg1eiBNNDk2LDQ3My40bC02Mi41LTYyLjVjMTguMi0xNC4yLDM5LjYtMjMuMSw2Mi41LTI1LjlWNDczLjR6IE00NzMuNCw0OTZIMzg1CgkJYzIuOC0yMi45LDExLjctNDQuMywyNS45LTYyLjVMNDczLjQsNDk2eiBNNDczLjQsNTI4bC02Mi41LDYyLjVjLTE0LjItMTguMi0yMy4xLTM5LjYtMjUuOS02Mi41SDQ3My40eiBNNDk2LDU1MC42VjYzOQoJCWMtMjIuOS0yLjgtNDQuMy0xMS43LTYyLjUtMjUuOUw0OTYsNTUwLjZ6IE01MjgsNTUwLjZsNjIuNSw2Mi41Yy0xOC4yLDE0LjItMzkuNiwyMy4xLTYyLjUsMjUuOVY1NTAuNnogTTU1MC42LDUyOEg2MzkKCQljLTIuOCwyMi45LTExLjcsNDQuMy0yNS45LDYyLjVMNTUwLjYsNTI4eiBNNTUwLjYsNDk2bDYyLjUtNjIuNWMxNC4yLDE4LjIsMjMuMSwzOS42LDI1LjksNjIuNUg1NTAuNnogTTYxMy4zLDM4OC4xCgkJYy0yMy43LTE5LjQtNTMuMS0zMi4xLTg1LjMtMzUuM1YyMjQuNGMzMy4yLDEuOCw2NS41LDkuMiw5Ni4xLDIyLjJjMjkuNCwxMi40LDU2LjIsMjkuNSw3OS45LDUwLjdMNjEzLjMsMzg4LjF6IE00OTYsMzUyLjgKCQljLTMyLjIsMy4yLTYxLjYsMTUuOS04NS4zLDM1LjNMMzIwLDI5Ny40YzIzLjctMjEuMyw1MC41LTM4LjMsNzkuOS01MC43YzMwLjYtMTIuOSw2Mi45LTIwLjQsOTYuMS0yMi4yVjM1Mi44eiBNMzg4LjEsNDEwLjcKCQljLTE5LjQsMjMuNy0zMi4xLDUzLjEtMzUuMyw4NS4zSDIyNC40YzEuOC0zMy4yLDkuMi02NS41LDIyLjItOTYuMWMxMi40LTI5LjQsMjkuNS01Ni4yLDUwLjctNzkuOUwzODguMSw0MTAuN3ogTTI0Ni42LDYyNC4xCgkJYy0xMi45LTMwLjYtMjAuNC02Mi45LTIyLjItOTYuMWgxMjguM2MzLjIsMzIuMiwxNS45LDYxLjYsMzUuMyw4NS4zTDI5Ny40LDcwNEMyNzYuMSw2ODAuMywyNTksNjUzLjUsMjQ2LjYsNjI0LjF6IE00MTAuNyw2MzUuOQoJCWMyMy43LDE5LjQsNTMuMSwzMi4xLDg1LjMsMzUuM3YxMjguM2MtMzMuMi0xLjgtNjUuNS05LjItOTYuMS0yMi4yYy0yOS40LTEyLjQtNTYuMi0yOS41LTc5LjktNTAuN0w0MTAuNyw2MzUuOXogTTUyOCw2NzEuMgoJCWMzMi4yLTMuMiw2MS42LTE1LjksODUuMy0zNS4zbDkwLjgsOTAuOGMtMjMuNywyMS4zLTUwLjUsMzguMy03OS45LDUwLjdjLTMwLjYsMTIuOS02Mi45LDIwLjQtOTYuMSwyMi4yTDUyOCw2NzEuMkw1MjgsNjcxLjJ6CgkJIE02MzUuOSw2MTMuM2MxOS40LTIzLjcsMzIuMS01My4xLDM1LjMtODUuM2gxMjguM2MtMS44LDMzLjItOS4yLDY1LjUtMjIuMiw5Ni4xYy0xMi40LDI5LjQtMjkuNSw1Ni4yLTUwLjcsNzkuOUw2MzUuOSw2MTMuM3oKCQkgTTgzMS42LDQ5NmMtMy44LTc2LjMtMzQuMi0xNDUuNi04Mi4zLTE5OC43bDEyOC45LTEyOC45YzExLjIsMTUuNywxNy44LDM0LjksMTcuOCw1NS42djI3Mkg4MzEuNnogTTg1NS42LDE0NS44TDcyNi43LDI3NC43CgkJYy01My4xLTQ4LjEtMTIyLjQtNzguNS0xOTguNy04Mi4zVjEyOGgyNzJDODIwLjcsMTI4LDgzOS45LDEzNC42LDg1NS42LDE0NS44eiBNNDk2LDEyOHY2NC40Yy03Ni4zLDMuOC0xNDUuNiwzNC4yLTE5OC43LDgyLjMKCQlMMTY4LjQsMTQ1LjhjMTUuNy0xMS4yLDM0LjktMTcuOCw1NS42LTE3LjhINDk2eiBNMTY4LjQsODc4LjJsMTI4LjktMTI4LjljNTMuMSw0OC4xLDEyMi40LDc4LjUsMTk4LjcsODIuM1Y4OTZIMjI0CgkJQzIwMy4zLDg5NiwxODQuMSw4ODkuNCwxNjguNCw4NzguMnogTTUyOCw4OTZ2LTY0LjRjNzYuMy0zLjgsMTQ1LjYtMzQuMiwxOTguNy04Mi4zbDEyOC45LDEyOC45QzgzOS45LDg4OS40LDgyMC43LDg5Niw4MDAsODk2CgkJSDUyOHoiLz4KPC9nPgo8L3N2Zz4K"},AwZQ:function(t,e,s){"use strict";var a=s("OaMl");s.n(a).a},DvZF:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bk-file-upload"},[t.uploadQueue.length?s("div",{staticClass:"file-list"},t._l(t.uploadQueue,(function(e,a){return s("div",{key:a,staticClass:"file-item"},[s("div",{class:["file-item-wrapper",{error:"error"===e.status,success:"success"===e.status}]},[t._m(0,!0),t._v(" "),s("div",{staticClass:"file-info"},[s("div",{staticClass:"file-metedata"},[s("p",{staticClass:"file-name"},[t._v(t._s(e.name))]),t._v(" "),"uploading"===e.status?s("span",{staticClass:"file-status"},[t._v(t._s(t.progress)+"%")]):t._e(),t._v(" "),"success"===e.status?s("span",{staticClass:"file-status success"},[t._v("上传成功")]):t._e(),t._v(" "),"error"===e.status?s("span",{staticClass:"file-status error"},[t._v("上传失败")]):t._e()]),t._v(" "),s("div",{class:["file-progress"]},[s("div",{class:["file-progress-bar"],style:"width: "+t.progress+"%"})])]),t._v(" "),"success"!==e.status?s("i",{staticClass:"bk-icon icon-close",on:{click:function(e){return t.removeFile(a)}}}):t._e()]),t._v(" "),e.statusText&&"error"===e.status?s("p",{staticClass:"tip"},[t._v(t._s(e.statusText))]):t._e()])})),0):[s("div",{staticClass:"file-input"},[t._m(1),t._v(" "),s("input",{attrs:{type:"file",multiple:t.multiple,accept:t.accept},on:{change:t.selectFile}})]),t._v(" "),t.tip?s("p",{staticClass:"tip prompt"},[t._v(t._s(t.tip))]):t._e()]],2)},o=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"file-icon"},[e("img",{attrs:{src:s("ALRR"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"trigger-btn"},[e("img",{staticClass:"upload-icon",attrs:{src:s("rJUT"),alt:""}}),this._v("\n                拖拽到此处上传或 "),e("span",[this._v("点击上传")])])}];a._withStripped=!0,s.d(e,"a",(function(){return a})),s.d(e,"b",(function(){return o}))},FQUK:function(t,e,s){},"HEM+":function(t,e,s){"use strict";s.r(e);var a=s("DvZF"),o=s("cJqE");for(var r in o)"default"!==r&&function(t){s.d(e,t,(function(){return o[t]}))}(r);s("AwZQ");var i=s("psIG"),n=Object(i.a)(o.default,a.a,a.b,!1,null,null,null);n.options.__file="src/components/common/file-upload/index.vue",e.default=n.exports},IydW:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{showDialog:Boolean,isUploading:Boolean,selectedUrl:String,toConfirmLogo:Function,toCloseDialog:Function,fileChange:Function},data:function(){return{width:507,curImage:""}},computed:{atomLogoConf:function(){return{hasHeader:!1,closeIcon:!1,quickClose:!1}}}}},OaMl:function(t,e,s){},OiL7:function(t,e,s){"use strict";var a=s("gm/O");s.n(a).a},"UR6/":function(t,e,s){s("k/kI"),s("WwSA"),t.exports=s("uMC/")},XkQ8:function(t,e,s){"use strict";s.r(e);var a=s("gs3A"),o=s("8XlI");for(var r in o)"default"!==r&&function(t){s.d(e,t,(function(){return o[t]}))}(r);s("OiL7");var i=s("psIG"),n=Object(i.a)(o.default,a.a,a.b,!1,null,null,null);n.options.__file="src/views/edit_atom.vue",e.default=n.exports},aF9P:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("bk-dialog",{staticClass:"atom-logo-dialog",attrs:{width:t.width,"has-header":t.atomLogoConf.hasHeader,"close-icon":t.atomLogoConf.closeIcon,"quick-close":t.atomLogoConf.quickClose},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[s("main",{staticClass:"atom-logo-content"},[s("i",{staticClass:"bk-icon icon-close",on:{click:function(e){return t.toCloseDialog()}}}),t._v(" "),s("div",{staticClass:"info-title"},[t._v("修改LOGO")]),t._v(" "),s("div",{staticClass:"upload-content"},[s("div",{staticClass:"upload-box"},[t.selectedUrl?s("img",{attrs:{src:t.selectedUrl}}):t._e()]),t._v(" "),s("div",{staticClass:"upload-btn"},[s("input",{staticClass:"inputfile",attrs:{type:"file",name:"file",id:"inputfile",accept:"image/png, image/jpeg"},on:{change:t.fileChange}}),t._v(" "),s("label",{attrs:{for:"file"}},[s("i",{staticClass:"bk-icon icon-bk"}),t._v("选择LOGO")]),t._v(" "),s("p",{staticClass:"logo-desc"},[t._v("只允许上传png、jpg")]),t._v(" "),s("p",{staticClass:"logo-desc"},[t._v("尺寸为512*512，大小不超过2M")])])])]),t._v(" "),s("template",{slot:"footer"},[s("div",{staticClass:"bk-dialog-outer"},[[s("bk-button",{staticClass:"bk-dialog-btn bk-dialog-btn-confirm bk-btn-primary",attrs:{theme:"primary"},on:{click:t.toConfirmLogo}},[t._v("\n                    确定\n                ")]),t._v(" "),s("bk-button",{staticClass:"bk-dialog-btn bk-dialog-btn-cancel",on:{click:t.toCloseDialog}},[t._v("\n                    取消\n                ")])]],2)])],2)},o=[];a._withStripped=!0,s.d(e,"a",(function(){return a})),s.d(e,"b",(function(){return o}))},cJqE:function(t,e,s){"use strict";s.r(e);var a=s("qvCM"),o=s.n(a);for(var r in a)"default"!==r&&function(t){s.d(e,t,(function(){return a[t]}))}(r);e.default=o.a},eo6R:function(t,e,s){"use strict";s.r(e);var a=s("IydW"),o=s.n(a);for(var r in a)"default"!==r&&function(t){s.d(e,t,(function(){return a[t]}))}(r);e.default=o.a},gNre:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=m(s("/9Wh")),o=m(s("Kz1y")),r=m(s("06Hw")),i=m(s("YYXh")),n=m(s("pUi5")),l=s("sxj9"),u=m(s("/svt")),c=m(s("HEM+"));function m(t){return t&&t.__esModule?t:{default:t}}s("F7H9"),window.Vue.use(u.default),e.default={components:{atomLogo:n.default,bkFileUpload:c.default},data:function(){return{curVersion:"",atomName:"landun-atom-codecc",selectedUrl:"",initReleaseType:"",docsLink:DOCS_URL_PREFIX+"/所有服务/流水线插件Store/快速入门.html",descTemplate:"",GW_URL_PREFIX:GW_URL_PREFIX,showContent:!1,showlogoDialog:!1,isUploading:!1,initOs:[],categoryList:[{label:"流水线插件",value:"TASK"}],envList:[{label:"Linux",value:"LINUX",icon:"linux-view"},{label:"Windows",value:"WINDOWS",icon:"windows"},{label:"macOS",value:"MACOS",icon:"macos"}],publishShelf:[{label:"新上架",value:"NEW"}],publishTypeList:[{label:"非兼容式升级",value:"INCOMPATIBILITY_UPGRADE",desc:'当新版本输入输出不兼容旧版本时，使用"非兼容式升级"方式，发布后用户需修改流水线中的插件版本号才能使用新版本。'},{label:"兼容式功能更新",value:"COMPATIBILITY_UPGRADE",desc:'当新版本输入输出兼容旧版本，仅更新功能时，使用"兼容式升级"方式，发布后用户无需修改流水线中的插件版本号，默认使用最新版本。'},{label:"兼容式问题修正",value:"COMPATIBILITY_FIX",desc:'当新版本为bug fix时，使用"兼容式问题修正"方式，发布后用户无需修改流水线中的插件版本号，默认使用最新版本。'}],sortList:[],labelList:[],img_file:{},loading:{isLoading:!1,title:""},atomForm:{name:"",logoUrl:"",category:"TASK",classifyCode:"",classifyName:"",os:[],labelIdList:[],summary:"",description:"- 插件功能\n\n- 适用场景\n\n- 使用限制和受限解决方案[可选]\n\n- 常见的失败原因和解决方案",publisher:"",version:"1.0.0",releaseType:"NEW",versionContent:"",jobType:"AGENT",visibilityLevel:"LOGIN_PUBLIC"},formErrors:{categoryError:!1,jobError:!1,openSourceError:!1,sortError:!1,envError:!1,releaseTypeError:!1,releasePackageError:!1}}},computed:{atomId:function(){return this.$route.params.atomId},curTitle:function(){return"shelfAtom"===this.$route.name?"上架插件":"升级插件"},toolbarOptions:function(){return l.toolbars},releasePackageUrl:function(){return GW_URL_PREFIX+"/artifactory/api/user/artifactories/projects/"+this.atomForm.projectCode+"/atoms/"+this.atomForm.atomCode+"/versions/"+(this.curVersion||"1.0.0")+"/types/"+this.atomForm.releaseType+"/archive"}},watch:{"atomForm.os":function(t){var e=this;if("upgradeAtom"===this.$route.name){var s=this.initOs.every((function(t){return e.atomForm.os.indexOf(t)>-1}));this.atomForm.releaseType=s?this.initReleaseType:"INCOMPATIBILITY_UPGRADE"}},"atomForm.releaseType":function(t){for(var e=["INCOMPATIBILITY_UPGRADE","COMPATIBILITY_UPGRADE","COMPATIBILITY_FIX"],s=this.atomForm.version.split("."),a=0;a<s.length;a++)e[a]===t&&(s[a]=(parseInt(s[a])+1).toString());"INCOMPATIBILITY_UPGRADE"===t?(s[1]="0",s[2]="0"):"COMPATIBILITY_UPGRADE"===t&&(s[2]="0"),this.curVersion=s.join("."),this.formErrors.releaseTypeError=!1}},created:function(){var t=this;return(0,i.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.requestAtomlabels();case 2:return e.next=4,t.requestAtomDetail(t.$route.params.atomId);case 4:t.requestAtomClassify();case 5:case"end":return e.stop()}}),e,t)})))()},methods:{toAtomList:function(){this.$router.push({name:"atomList",params:{type:"atom"}})},toPublishProgress:function(t,e){this.$router.push({name:"releaseProgress",params:{releaseType:t,atomId:e}})},toAtomStore:function(){this.$router.push({name:"atomHome"})},requestAtomlabels:function(){var t=this;return(0,i.default)(r.default.mark((function e(){var s,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("store/requestAtomLables");case 3:s=e.sent,t.labelList=s||[],e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),a=e.t0.message?e.t0.message:e.t0,"error",t.$bkMessage({message:a,theme:"error"});case 12:case"end":return e.stop()}}),e,t,[[0,7]])})))()},requestAtomDetail:function(t){var e=this;return(0,i.default)(r.default.mark((function s(){var i,n,l;return r.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e.loading.isLoading=!0,s.prev=1,s.next=4,e.$store.dispatch("store/requestAtomDetail",{atomId:t});case 4:(i=s.sent)&&((0,o.default)(e.atomForm,i,{}),e.curVersion=i.version,e.atomForm.labelIdList=e.atomForm.labelList.map((function(t){return t.id})),e.initOs=JSON.parse((0,a.default)(e.atomForm.os)),e.atomForm.version?(e.atomForm.releaseType="NEW"===e.atomForm.releaseType?"INCOMPATIBILITY_UPGRADE":e.atomForm.releaseType,(n=e.atomForm.version.split("."))[0]=(parseInt(n[0])+1).toString(),e.curVersion=n.join(".")):e.curVersion="1.0.0",e.initReleaseType=e.atomForm.releaseType),s.next=13;break;case 8:s.prev=8,s.t0=s.catch(1),l=s.t0.message?s.t0.message:s.t0,"error",e.$bkMessage({message:l,theme:"error"});case 13:return s.prev=13,setTimeout((function(){e.loading.isLoading=!1,e.showContent=!0,e.autoFocus()}),500),s.finish(13);case 16:case"end":return s.stop()}}),s,e,[[1,8,13,16]])})))()},requestAtomClassify:function(){var t=this;return(0,i.default)(r.default.mark((function e(){var s,a;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("store/requestAtomClassify");case 3:s=e.sent,t.sortList=s,t.sortList=t.sortList.filter((function(t){return"trigger"!==t.classifyCode})),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),a=e.t0.message?e.t0.message:e.t0,"error",t.$bkMessage({message:a,theme:"error"});case 13:case"end":return e.stop()}}),e,t,[[0,8]])})))()},changeClassify:function(){this.formErrors.sortError=!1},changeOs:function(t){this.formErrors.envError=!1},resetUploadInput:function(){this.$nextTick((function(){document.getElementById("inputfile").value=""}))},autoFocus:function(){var t=this;this.$nextTick((function(){t.$refs.atomName.focus()}))},uploadLogo:function(){this.showlogoDialog=!0,this.selectedUrl=this.atomForm.logoUrl},toConfirmLogo:function(){var t=this;return(0,i.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.selectedUrl?(t.atomForm.logoUrl=t.selectedUrl,t.showlogoDialog=!1):t.selectedUrl||t.$bkMessage({message:"请选择要上传的图片",theme:"error"}),t.resetUploadInput();case 2:case"end":return e.stop()}}),e,t)})))()},toCloseDialog:function(){this.showlogoDialog=!1,this.selectedFile=void 0,this.resetUploadInput()},addImage:function(t,e){this.uploadimg(t,e)},delImage:function(t){},changeData:function(t,e){},uploadimg:function(t,e){var s=this;return(0,i.default)(r.default.mark((function a(){var o,i,n,l,u;return r.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=new FormData,i={headers:{"Content-Type":"multipart/form-data"}},n=void 0,l=void 0,o.append("file",e),a.prev=4,a.next=7,s.$store.dispatch("store/uploadFile",{formData:o,config:i});case 7:u=a.sent,s.$refs.mdHook.$img2Url(t,u),a.next=17;break;case 11:a.prev=11,a.t0=a.catch(4),n=a.t0.message?a.t0.message:a.t0,l="error",s.$bkMessage({message:n,theme:l}),s.$refs.mdHook.$refs.toolbar_left.$imgDel(t);case 17:case"end":return a.stop()}}),a,s,[[4,11]])})))()},fileChange:function(t){var e=this,s=t.target.files[0];if(s)if("image/jpeg"!==s.type&&"image/png"!==s.type)this.$bkMessage({theme:"error",message:"请上传png、jpg格式的图片"});else if(s.size>2097152)this.$bkMessage({theme:"error",message:"请上传大小不超过2M的图片"});else{var a=new FileReader;a.readAsDataURL(s),a.onload=function(t){var a=new Image;a.src=t.target.result,a.onload=function(t){512===a.width&&512===a.height?e.uploadHandle(s):e.$bkMessage({theme:"error",message:"请上传尺寸为512*512的图片"})}}}},uploadHandle:function(t){var e=this;return(0,i.default)(r.default.mark((function s(){var a,o,i,n,l;return r.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a=new FormData,o={headers:{"Content-Type":"multipart/form-data"}},i=void 0,n=void 0,a.append("logo",t),s.prev=4,s.next=7,e.$store.dispatch("store/uploadLogo",{formData:a,config:o});case 7:l=s.sent,e.selectedUrl=l,s.next=16;break;case 11:s.prev=11,s.t0=s.catch(4),i=s.t0.message?s.t0.message:s.t0,n="error",e.$bkMessage({message:i,theme:n});case 16:case"end":return s.stop()}}),s,e,[[4,11]])})))()},uploadPackageSuccess:function(t){t.atomEnvRequest&&(this.atomForm.packageShaContent=t.atomEnvRequest.shaContent,this.atomForm.pkgName=t.atomEnvRequest.pkgName,this.formErrors.releasePackageError=!1)},uploadPackageErr:function(t){t&&this.$bkMessage({message:t,theme:"error"})},checkValid:function(){var t=this,e=0;return this.atomForm.classifyCode||(this.formErrors.sortError=!0,e++),this.atomForm.os.length||(this.formErrors.envError=!0,e++),this.atomForm.releaseType||(this.formErrors.releaseTypeError=!0,e++),this.categoryList.find((function(e){return e.value===t.atomForm.category}))<0&&(this.formErrors.categoryError=!0,e++),this.atomForm.packageShaContent||(this.formErrors.releasePackageError=!0,e++),!(e>0)},submit:function(){var t=this;return(0,i.default)(r.default.mark((function e(){var s,a,o,i,n,l,u,c;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.checkValid(),e.next=3,t.$validator.validate();case 3:if(a=e.sent,!s||!a){e.next=30;break}if(o=void 0,i=void 0,n=t.initOs.every((function(e){return t.atomForm.os.indexOf(e)>-1})),e.prev=7,"INCOMPATIBILITY_UPGRADE"===t.atomForm.releaseType||"upgradeAtom"!==t.$route.name||n){e.next=13;break}o="操作系统发生变更，发布类型请选择非兼容式升级，避免影响已有流水线的使用。",i="error",e.next=21;break;case 13:return t.loading.isLoading=!0,l={atomCode:t.atomForm.atomCode,name:t.atomForm.name,category:t.atomForm.category,classifyCode:t.atomForm.classifyCode,version:t.curVersion,releaseType:t.atomForm.releaseType,os:t.atomForm.os,labelIdList:t.atomForm.labelIdList,publisher:t.atomForm.publisher,versionContent:t.atomForm.versionContent,logoUrl:t.atomForm.logoUrl||void 0,summary:t.atomForm.summary||void 0,description:t.atomForm.description||void 0,packageShaContent:t.atomForm.packageShaContent,pkgName:t.atomForm.pkgName},e.next=17,t.$store.dispatch("store/editAtom",{projectId:t.atomForm.projectCode,params:l});case 17:u=e.sent,o="提交成功",i="success",u&&t.toPublishProgress("shelfAtom"===t.$route.name?"shelf":"upgrade",u);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(7),200===e.t0.httpStatus?(c=t.$createElement,t.$bkInfo({type:"error",title:"提交失败",showFooter:!1,subHeader:c("p",{style:{textDecoration:"none",cursor:"pointer",whiteSpace:"normal",textAlign:"left"}},e.t0.message?e.t0.message:e.t0)})):(o=e.t0.message?e.t0.message:e.t0,i="error");case 26:return e.prev=26,"error"===i&&t.$bkMessage({message:o,theme:i}),t.loading.isLoading=!1,e.finish(26);case 30:case"end":return e.stop()}}),e,t,[[7,23,26,30]])})))()}}}},"gm/O":function(t,e,s){},gs3A:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.loading.isLoading,title:t.loading.title},expression:"{\n        isLoading: loading.isLoading,\n        title: loading.title\n    }"}],staticClass:"edit-atom-wrapper"},[s("h3",{staticClass:"market-home-title"},[s("icon",{staticClass:"title-icon",attrs:{name:"color-logo-store",size:"25"}}),t._v(" "),s("p",{staticClass:"title-name"},[s("span",{staticClass:"back-home",on:{click:function(e){return t.toAtomStore()}}},[t._v("研发商店")]),t._v(" "),s("i",{staticClass:"right-arrow banner-arrow"}),t._v(" "),s("span",{staticClass:"back-home",on:{click:function(e){return t.toAtomList()}}},[t._v("工作台")]),t._v(" "),s("i",{staticClass:"right-arrow banner-arrow"}),t._v(" "),s("span",{},[t._v(t._s(t.curTitle)+"（"+t._s(t.atomForm.atomCode)+"）")])]),t._v(" "),s("a",{staticClass:"title-work",attrs:{target:"_blank",href:t.docsLink}},[t._v("插件指引")])],1),t._v(" "),t.showContent?s("div",{staticClass:"edit-atom-content"},[s("form",{staticClass:"bk-form edit-atom-form g-form-radio"},[s("div",{staticClass:"bk-form-item name-form-item is-required"},[s("label",{staticClass:"bk-label"},[t._v("名称")]),t._v(" "),s("div",{staticClass:"bk-form-content atom-item-content is-tooltips"},[s("div",{staticStyle:{width:"40%"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.atomForm.name,expression:"atomForm.name"},{name:"validate",rawName:"v-validate",value:{required:!0,max:20},expression:"{\n                                required: true,\n                                max: 20\n                            }"}],ref:"atomName",staticClass:"bk-form-input atom-name-input",class:{"is-danger":t.errors.has("atomName")},attrs:{type:"text",placeholder:"请输入中英文名称",name:"atomName"},domProps:{value:t.atomForm.name},on:{input:function(e){e.target.composing||t.$set(t.atomForm,"name",e.target.value)}}}),t._v(" "),s("p",{class:t.errors.has("atomName")?"error-tips":"normal-tips"},[t._v(t._s(t.errors.first("atomName")))])]),t._v(" "),s("bk-popover",{attrs:{placement:"right"}},[s("i",{staticClass:"bk-icon icon-info-circle"}),t._v(" "),s("template",{slot:"content"},[s("p",[t._v("插件名称不超过20个字符")])])],2)],1)]),t._v(" "),s("div",{staticClass:"bk-form-item is-required"},[s("label",{staticClass:"bk-label category-label"},[t._v("范畴")]),t._v(" "),s("div",{staticClass:"bk-form-content atom-item-content"},[s("bk-radio-group",{staticClass:"radio-group",model:{value:t.atomForm.category,callback:function(e){t.$set(t.atomForm,"category",e)},expression:"atomForm.category"}},t._l(t.categoryList,(function(e,a){return s("bk-radio",{key:a,attrs:{value:e.value},nativeOn:{click:function(e){t.formErrors.categoryError=!1}}},[t._v(t._s(e.label))])})),1),t._v(" "),t.formErrors.categoryError?s("div",{staticClass:"error-tips"},[t._v("字段有误，请重新选择")]):t._e()],1)]),t._v(" "),s("div",{staticClass:"bk-form-item  is-required"},[s("label",{staticClass:"bk-label"},[t._v("分类")]),t._v(" "),s("div",{staticClass:"bk-form-content atom-item-content atom-classify-content"},[s("bk-select",{staticStyle:{width:"40%"},attrs:{searchable:"",clearable:!1},on:{selected:t.changeClassify},model:{value:t.atomForm.classifyCode,callback:function(e){t.$set(t.atomForm,"classifyCode",e)},expression:"atomForm.classifyCode"}},t._l(t.sortList,(function(t,e){return s("bk-option",{key:e,attrs:{id:t.classifyCode,name:t.classifyName}})})),1),t._v(" "),t.formErrors.sortError?s("div",{staticClass:"error-tips"},[t._v("分类不能为空")]):t._e()],1)]),t._v(" "),s("div",{staticClass:"bk-form-item is-required"},[s("label",{staticClass:"bk-label env-label"},[t._v("操作系统")]),t._v(" "),s("div",{staticClass:"bk-form-content atom-item-content"},[s("bk-checkbox-group",{model:{value:t.atomForm.os,callback:function(e){t.$set(t.atomForm,"os",e)},expression:"atomForm.os"}},t._l(t.envList,(function(e,a){var o;return s("bk-checkbox",{key:a,attrs:{value:e.value},nativeOn:{click:function(s){return t.changeOs(e.value)}}},[s("i",{class:(o={"bk-icon":!0},o["icon-"+e.icon]=!0,o)}),s("span",{staticClass:"bk-checkbox-text"},[t._v(t._s(e.label))])])})),1),t._v(" "),t.formErrors.envError?s("div",{staticClass:"error-tips env-error"},[t._v("操作系统不能为空")]):t._e()],1)]),t._v(" "),s("div",{staticClass:"bk-form-item"},[s("label",{staticClass:"bk-label"},[t._v("功能标签")]),t._v(" "),s("div",{staticClass:"bk-form-content template-item-content"},[s("bk-select",{attrs:{placeholder:"请选择功能标签","show-select-all":"",searchable:"",multiple:""},on:{selected:t.changeClassify},model:{value:t.atomForm.labelIdList,callback:function(e){t.$set(t.atomForm,"labelIdList",e)},expression:"atomForm.labelIdList"}},t._l(t.labelList,(function(t,e){return s("bk-option",{key:e,attrs:{id:t.id,name:t.labelName}})})),1)],1)]),t._v(" "),s("div",{staticClass:"bk-form-item introduction-form-item is-required"},[s("label",{staticClass:"bk-label"},[t._v("简介")]),t._v(" "),s("div",{staticClass:"bk-form-content atom-item-content is-tooltips"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.atomForm.summary,expression:"atomForm.summary"},{name:"validate",rawName:"v-validate",value:{required:!0,max:70},expression:"{\n                            required: true,\n                            max: 70\n                        }"}],staticClass:"bk-form-input atom-introduction-input",class:{"is-danger":t.errors.has("introduction")},attrs:{type:"text",placeholder:"插件一句话简介，不超过70个字符",name:"introduction",maxlength:"70"},domProps:{value:t.atomForm.summary},on:{input:function(e){e.target.composing||t.$set(t.atomForm,"summary",e.target.value)}}}),t._v(" "),s("bk-popover",{attrs:{placement:"left"}},[s("i",{staticClass:"bk-icon icon-info-circle"}),t._v(" "),s("template",{slot:"content"},[s("p",[t._v("插件一句话简介，不超过70个字符。")]),t._v(" "),s("p",[t._v("展示在插件市场以及流水线选择插件页面。")])])],2)],1),t._v(" "),s("p",{class:t.errors.has("introduction")?"error-tips":"normal-tips"},[t._v(t._s(t.errors.first("introduction")))])]),t._v(" "),s("div",{staticClass:"bk-form-item remark-form-item"},[s("label",{staticClass:"bk-label"},[t._v("详细描述")]),t._v(" "),s("div",{staticClass:"bk-form-content atom-item-content is-tooltips"},[s("mavon-editor",{ref:"mdHook",staticClass:"atom-remark-input",attrs:{placeholder:t.descTemplate,toolbars:t.toolbarOptions,"external-link":!1},on:{imgAdd:t.addImage,imgDel:t.delImage,change:t.changeData},model:{value:t.atomForm.description,callback:function(e){t.$set(t.atomForm,"description",e)},expression:"atomForm.description"}}),t._v(" "),s("bk-popover",{attrs:{placement:"left"}},[s("i",{staticClass:"bk-icon icon-info-circle"}),t._v(" "),s("template",{slot:"content"},[s("p",[t._v("插件详细介绍，请说明插件功能、使用场景、使用限制和受限解决方案[可选]、常见的失败原因和解决方案、以及接口人联系方式。")]),t._v(" "),s("p",[t._v("展示在插件市场查看插件详情界面，帮助用户快速了解插件和解决遇到的问题。")])])],2)],1)]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"bk-form-item name-form-item is-required"},[s("label",{staticClass:"bk-label"},[t._v("发布者")]),t._v(" "),s("div",{staticClass:"bk-form-content atom-item-content"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.atomForm.publisher,expression:"atomForm.publisher"},{name:"validate",rawName:"v-validate",value:{required:!0,max:20},expression:"{\n                            required: true,\n                            max: 20\n                        }"}],staticClass:"bk-form-input atom-name-input",class:{"is-danger":t.errors.has("publisher")},attrs:{type:"text",placeholder:"请输入",name:"publisher"},domProps:{value:t.atomForm.publisher},on:{input:function(e){e.target.composing||t.$set(t.atomForm,"publisher",e.target.value)}}}),t._v(" "),s("p",{class:t.errors.has("publisher")?"error-tips":"normal-tips"},[t._v(t._s(t.errors.first("publisher")))])])]),t._v(" "),s("div",{staticClass:"bk-form-item publish-form-item is-required"},[s("label",{staticClass:"bk-label publish-type-label"},[t._v("发布类型")]),t._v(" "),s("div",{staticClass:"bk-form-content atom-item-content is-tooltips radio-flex"},[t.atomForm.version?s("section",{staticStyle:{"min-width":"100%"}},[s("bk-radio-group",{staticClass:"radio-group",model:{value:t.atomForm.releaseType,callback:function(e){t.$set(t.atomForm,"releaseType",e)},expression:"atomForm.releaseType"}},t._l(t.publishTypeList,(function(e,a){return s("bk-radio",{key:a,attrs:{value:e.value},nativeOn:{click:function(e){t.formErrors.releaseTypeError=!1}}},[s("bk-popover",{staticStyle:{"margin-top":"0","margin-left":"0"},attrs:{placement:"top",delay:800}},[s("span",{staticClass:"bk-radio-text"},[t._v(t._s(e.label))]),t._v(" "),s("template",{slot:"content"},[s("p",[t._v(t._s(e.desc))])])],2)],1)})),1),t._v(" "),t.formErrors.releaseTypeError?s("div",{staticClass:"error-tips"},[t._v("发布类型不能为空")]):t._e()],1):s("section",{staticStyle:{"min-width":"100%"}},[s("bk-radio-group",{staticClass:"radio-group",model:{value:t.atomForm.releaseType,callback:function(e){t.$set(t.atomForm,"releaseType",e)},expression:"atomForm.releaseType"}},t._l(t.publishShelf,(function(e,a){return s("bk-radio",{key:a,attrs:{value:e.value},nativeOn:{click:function(e){t.formErrors.releaseTypeError=!1}}},[t._v(t._s(e.label))])})),1),t._v(" "),t.formErrors.releaseTypeError?s("div",{staticClass:"error-tips"},[t._v("发布类型不能为空")]):t._e()],1)])]),t._v(" "),s("div",{staticClass:"bk-form-item version-num-form-item is-required",staticStyle:{"margin-top":"10px"}},[s("label",{staticClass:"bk-label"},[t._v("版本号")]),t._v(" "),s("div",{staticClass:"bk-form-content atom-item-content is-tooltips"},[s("p",{staticClass:"version-num-content",staticStyle:{"min-width":"100%"}},[t._v(t._s(t.curVersion)+"\n                        "),s("span",{staticClass:"version-prompt"},[t._v("（主版本号.次版本号.修正号）")])]),t._v(" "),s("bk-popover",{attrs:{placement:"left"}},[s("i",{staticClass:"bk-icon icon-info-circle"}),t._v(" "),s("template",{slot:"content"},[s("p",[t._v("根据发布类型自动生成")])])],2)],1)]),t._v(" "),s("div",{staticClass:"bk-form-item release-package-form-item is-required",staticStyle:{"margin-top":"10px"}},[s("label",{staticClass:"bk-label"},[t._v("发布包")]),t._v(" "),s("div",{staticClass:"bk-form-content atom-item-content"},[s("bk-file-upload",{attrs:{"post-url":t.releasePackageUrl,os:t.atomForm.os,tip:"只允许上传 zip 格式的文件",accept:"application/zip"},on:{uploadSuccess:t.uploadPackageSuccess,uploadFail:t.uploadPackageErr}}),t._v(" "),t.formErrors.releasePackageError?s("div",{staticClass:"error-tips"},[t._v("发布包不能为空")]):t._e()],1)]),t._v(" "),s("div",{staticClass:"bk-form-item versionlog-form-item is-required"},[s("label",{staticClass:"bk-label"},[t._v("版本日志")]),t._v(" "),s("div",{staticClass:"bk-form-content atom-item-content"},[s("textarea",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0},expression:"{\n                            required: true\n                        }"},{name:"model",rawName:"v-model",value:t.atomForm.versionContent,expression:"atomForm.versionContent"}],staticClass:"bk-form-input atom-versionlog-input",class:{"is-danger":t.errors.has("versionContent")},attrs:{type:"text",placeholder:"",name:"versionContent"},domProps:{value:t.atomForm.versionContent},on:{input:function(e){e.target.composing||t.$set(t.atomForm,"versionContent",e.target.value)}}}),t._v(" "),s("p",{class:t.errors.has("versionContent")?"error-tips":"normal-tips"},[t._v(t._s(t.errors.first("versionContent")))])])]),t._v(" "),s("div",{staticClass:"form-footer"},[s("button",{staticClass:"bk-button bk-primary",attrs:{type:"button"},on:{click:function(e){return t.submit()}}},[t._v("提交")]),t._v(" "),s("button",{staticClass:"bk-button bk-default",attrs:{type:"button"},on:{click:function(e){return t.toAtomList()}}},[t._v("取消")])]),t._v(" "),s("div",{staticClass:"atom-logo-box",class:{"is-border":!t.atomForm.logoUrl},on:{click:t.uploadLogo}},[t.atomForm.logoUrl?s("section",[s("img",{attrs:{src:t.atomForm.logoUrl}})]):s("section",[s("i",{staticClass:"bk-icon icon-plus"}),t._v(" "),s("p",[t._v("上传LOGO")])])])])]):t._e(),t._v(" "),s("atom-logo",{attrs:{"show-dialog":t.showlogoDialog,"to-confirm-logo":t.toConfirmLogo,"to-close-dialog":t.toCloseDialog,"file-change":t.fileChange,"selected-url":t.selectedUrl,"is-uploading":t.isUploading}})],1)},o=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"version-msg"},[e("p",{staticClass:"form-title"},[this._v("版本信息")]),this._v(" "),e("hr",{staticClass:"cut-line"})])}];a._withStripped=!0,s.d(e,"a",(function(){return a})),s.d(e,"b",(function(){return o}))},pUi5:function(t,e,s){"use strict";s.r(e);var a=s("aF9P"),o=s("eo6R");for(var r in o)"default"!==r&&function(t){s.d(e,t,(function(){return o[t]}))}(r);s("x/L8");var i=s("psIG"),n=Object(i.a)(o.default,a.a,a.b,!1,null,null,null);n.options.__file="src/components/atom-logo.vue",e.default=n.exports},qvCM:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(s("06Hw")),o=i(s("YYXh")),r=i(s("t3kO"));function i(t){return t&&t.__esModule?t:{default:t}}var n=i(s("3vJe")).default.parse(document.cookie).backend_csrftoken;e.default={props:{postUrl:{type:String,default:""},name:{type:String,default:"upload-file"},headers:{type:Object,default:function(){return{}}},tip:{type:String,default:""},multiple:{type:Boolean,default:!1},accept:{type:String},maxSize:{type:Number},dragable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},os:{type:Array,default:function(){return[]}}},data:function(){return{uploadQueue:[],isUploadLoading:!1,progress:0,queryStatusTimer:null}},beforeDestroy:function(){this.resetUploadStatus(),this.clearUploadQueue()},methods:{selectFile:function(t){var e=t.target.files;if(e.length){var s=!0,a=!1,o=void 0;try{for(var i,n=(0,r.default)(e);!(s=(i=n.next()).done);s=!0){var l=i.value,u={name:l.name,size:l.size/1e3/1e3,type:l.type,origin:l,isUploadLoading:!1,status:"",statusText:""},c=u.name.lastIndexOf("."),m=u.name.substring(c,u.name.length);this.uploadQueue.push(u),this.maxSize&&u.size>this.maxSize?(u.status="error",u.statusText="文件不能超过"+this.maxSize+"M"):this.os.length?".zip"!==m.toLowerCase()?(u.status="error",u.statusText="只允许上传 zip 格式的文件"):this.uploadFile(u):(u.status="error",u.statusText="请先选择操作系统")}}catch(t){a=!0,o=t}finally{try{!s&&n.return&&n.return()}finally{if(a)throw o}}}},uploadFile:function(t){var e=this;this.isUploadLoading=!0;var s=new FormData;s.append("file",t.origin),s.append("os",'["'+this.os.join('","')+'"]'),t.status="uploading",t.statusText="上传中";var a=new XMLHttpRequest;t.xhr=a,a.withCredentials=!0,a.open("POST",this.postUrl,!0),a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){var s=JSON.parse(a.responseText);0===s.status?(e.isUploadLoading=!1,e.progress=100,t.status="success",t.statusText="上传成功",e.$emit("uploadSuccess",s.data)):(t.status="error",t.statusText=s.message,e.resetUploadStatus(s.message))}else if(a.response){var o=JSON.parse(a.responseText);t.status="error",t.statusText="",e.resetUploadStatus(o.message)}},a.upload&&(a.upload.onprogress=function(t){if(t.lengthComputable){var s=Math.floor(t.loaded/t.total*100);e.progress=s>=1?s-1:0}}),a.setRequestHeader("X-CSRFToken",n),a.send(s),this.$emit("uploadStart")},syncUploadTaskStatus:function(t){var e=this;return function(){var s=(0,o.default)(a.default.mark((function s(o,i){var n,l;return a.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.$store.dispatch("artifactory/syncUploadStatus",{projectCode:o,taskId:i});case 2:n=s.sent,l=n.taskStatus,s.t0=!0,s.next=s.t0===("RUNNING"===l)?7:s.t0===("SUCCESS"===l)?9:s.t0===("FAILED"===l)?10:s.t0===("TIMEOUT"===l)?10:11;break;case 7:return e.queryStatusTimer=setTimeout((function(){r(o,i)}),3e3),s.abrupt("break",11);case 9:return s.abrupt("return",t(n));case 10:return s.abrupt("break",11);case 11:case"end":return s.stop()}}),s,this)})));function r(t,e){return s.apply(this,arguments)}return r}()},removeFile:function(t){this.uploadQueue[t].xhr&&this.uploadQueue[t].xhr.abort(),this.uploadQueue.splice(t,1),this.resetUploadStatus()},clearUploadQueue:function(){this.uploadQueue.forEach((function(t){t.xhr.abort()})),this.uploadQueue=[]},resetUploadStatus:function(t){this.isUploadLoading=!1,clearTimeout(this.queryStatusTimer),this.$emit("uploadFail",t)}}}},rJUT:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIyLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8yIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMDI0IDEwMjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojNzM3OTg3O30KPC9zdHlsZT4KPGcgaWQ9IuS4iuS8oCI+Cgk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNODk3LDQyMi45Yy0yOC40LTI4LjQtNjMuMy00Ny44LTEwMS4zLTU3Yy0xMC4xLTU3LjktMzcuNi0xMTEuMi04MC0xNTMuNkM2NjEuMywxNTgsNTg4LjksMTI4LDUxMiwxMjgKCQlzLTE0OS4zLDMwLTIwMy42LDg0LjRjLTQyLjQsNDIuNC02OS45LDk1LjctODAsMTUzLjZjLTM4LjEsOS4yLTczLDI4LjYtMTAxLjMsNTdjLTQwLjYsNDAuNi02Myw5NC42LTYzLDE1MnYxMAoJCWMwLDU3LjQsMjIuNCwxMTEuNCw2MywxNTJzOTQuNiw2MywxNTIsNjNoNDF2LTY0aC00MWMtODMuMywwLTE1MS02Ny43LTE1MS0xNTF2LTEwYzAtODMuMyw2Ny43LTE1MSwxNTEtMTUxaDkuMgoJCWMtMC4xLTIuNi0wLjItNS4zLTAuMi03LjlsMCwwbDAsMGMwLTEuNywwLTMuMywwLjEtNC45YzAtMC40LDAtMC44LDAtMS4zYzAtMS42LDAuMS0zLjIsMC4yLTQuN2MwLTAuNCwwLTAuNywwLjEtMS4xCgkJYzAuMS0xLjIsMC4xLTIuNSwwLjItMy43YzAtMC42LDAuMS0xLjIsMC4xLTEuOGMwLjEtMS40LDAuMi0yLjcsMC4zLTQuMWMwLjEtMC44LDAuMi0xLjYsMC4zLTIuNWMwLjEtMC42LDAuMS0xLjIsMC4yLTEuOQoJCWMxLjItMTAuMywzLjEtMjAuNCw1LjYtMzAuMmwwLDBjOS44LTM4LjQsMjkuOC03My42LDU4LjYtMTAyLjNDMzk1LjksMjE1LjMsNDUyLjIsMTkyLDUxMiwxOTJzMTE2LjEsMjMuMywxNTguNCw2NS42CgkJYzI4LjcsMjguNyw0OC43LDYzLjksNTguNiwxMDIuM2wwLDBjMi41LDkuOCw0LjQsMTkuOSw1LjYsMzAuMmMwLjEsMC42LDAuMSwxLjIsMC4yLDEuOWMwLjEsMC44LDAuMiwxLjYsMC4zLDIuNQoJCWMwLjEsMS40LDAuMiwyLjcsMC4zLDQuMWMwLDAuNiwwLjEsMS4yLDAuMSwxLjhjMC4xLDEuMiwwLjIsMi41LDAuMiwzLjdjMCwwLjQsMCwwLjcsMC4xLDEuMWMwLjEsMS42LDAuMSwzLjIsMC4yLDQuNwoJCWMwLDAuNCwwLDAuOCwwLDEuM2MwLDEuNiwwLjEsMy4zLDAuMSw0LjlsMCwwbDAsMGMwLDIuNy0wLjEsNS4zLTAuMiw3LjloOS4yYzgzLjMsMCwxNTEsNjcuNywxNTEsMTUxdjEwYzAsODMuMy02Ny43LDE1MS0xNTEsMTUxCgkJaC00MXY2NGg0MWM1Ny40LDAsMTExLjQtMjIuNCwxNTItNjNzNjMtOTQuNiw2My0xNTJ2LTEwQzk2MCw1MTcuNSw5MzcuNiw0NjMuNSw4OTcsNDIyLjl6Ii8+Cgk8cG9seWdvbiBjbGFzcz0ic3QwIiBwb2ludHM9IjM3Ni4yLDYwMi45IDQyMS41LDY0OC4xIDQ4MCw1ODkuNiA0ODAsODk2IDU0NCw4OTYgNTQ0LDU4OS42IDYwMi41LDY0OC4xIDY0Ny44LDYwMi45IDUxMiw0NjcuMSAJIi8+CjwvZz4KPC9zdmc+Cg=="},sxj9:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.toolbars={bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0}},t3kO:function(t,e,s){t.exports={default:s("UR6/"),__esModule:!0}},"uMC/":function(t,e,s){var a=s("ADe/"),o=s("VJcA");t.exports=s("TaGV").getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return a(e.call(t))}},"x/L8":function(t,e,s){"use strict";var a=s("FQUK");s.n(a).a}}]);