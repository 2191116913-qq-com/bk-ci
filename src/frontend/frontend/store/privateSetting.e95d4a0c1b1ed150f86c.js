(window.webpackJsonp=window.webpackJsonp||[]).push([["privateSetting"],{"/Vow":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"private-add",on:{click:function(t){return t.target!==t.currentTarget?null:e.cancleOperate(t)}}},[i("div",{staticClass:"add-main"},[i("ul",{staticClass:"add-inputs"},[i("li",{class:{"control-active":e.isNameFocus,"input-error":e.isNameError}},[i("span",{staticClass:"must-input"},[e._v("字段名：")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.privateObj.fieldName,expression:"privateObj.fieldName"}],staticClass:"g-input-border",attrs:{type:"text"},domProps:{value:e.privateObj.fieldName},on:{focus:function(t){e.isNameFocus=!0},blur:function(t){e.startNameVerify=!0,e.isNameFocus=!1},input:function(t){t.target.composing||e.$set(e.privateObj,"fieldName",t.target.value)}}}),e._v(" "),e.privateObj.fieldName?i("i",{staticClass:"bk-icon icon-close-circle-shape clear-icon",on:{click:function(t){e.privateObj.fieldName=""}}}):e._e(),e._v(" "),i("i",{directives:[{name:"bktooltips",rawName:"v-bktooltips.top",value:"以英文字母开头，由英文字母、数字、连接符(-)或下划线(_)组成，长度大于3小于30个字符",expression:"'以英文字母开头，由英文字母、数字、连接符(-)或下划线(_)组成，长度大于3小于30个字符'",modifiers:{top:!0}}],staticClass:"bk-icon icon-info-circle icon-right"}),e._v(" "),e.isNameError?i("span",{staticClass:"err-message"},[e._v("以英文字母开头，由英文字母、数字、连接符(-)或下划线(_)组成，长度大于3小于30个字符")]):e._e()]),e._v(" "),i("li",{class:{"control-active":e.isValueFocus,"input-error":e.isValueError}},[i("span",{staticClass:"must-input"},[e._v("字段值：")]),e._v(" "),"checkbox"==(e.showPassWord?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:e.privateObj.fieldValue,expression:"privateObj.fieldValue"}],staticClass:"g-input-border",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.privateObj.fieldValue)?e._i(e.privateObj.fieldValue,null)>-1:e.privateObj.fieldValue},on:{focus:e.valueFocus,blur:function(t){e.startValueVerify=!0,e.isValueFocus=!1},change:function(t){var i=e.privateObj.fieldValue,a=t.target,s=!!a.checked;if(Array.isArray(i)){var n=e._i(i,null);a.checked?n<0&&e.$set(e.privateObj,"fieldValue",i.concat([null])):n>-1&&e.$set(e.privateObj,"fieldValue",i.slice(0,n).concat(i.slice(n+1)))}else e.$set(e.privateObj,"fieldValue",s)}}}):"radio"==(e.showPassWord?"text":"password")?i("input",{directives:[{name:"model",rawName:"v-model",value:e.privateObj.fieldValue,expression:"privateObj.fieldValue"}],staticClass:"g-input-border",attrs:{type:"radio"},domProps:{checked:e._q(e.privateObj.fieldValue,null)},on:{focus:e.valueFocus,blur:function(t){e.startValueVerify=!0,e.isValueFocus=!1},change:function(t){return e.$set(e.privateObj,"fieldValue",null)}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:e.privateObj.fieldValue,expression:"privateObj.fieldValue"}],staticClass:"g-input-border",attrs:{type:e.showPassWord?"text":"password"},domProps:{value:e.privateObj.fieldValue},on:{focus:e.valueFocus,blur:function(t){e.startValueVerify=!0,e.isValueFocus=!1},input:function(t){t.target.composing||e.$set(e.privateObj,"fieldValue",t.target.value)}}}),e._v(" "),e.privateObj.fieldValue?i("i",{staticClass:"bk-icon icon-close-circle-shape clear-icon",on:{click:function(t){e.privateObj.fieldValue=""}}}):e._e(),e._v(" "),e.showEye?[e.showPassWord?i("i",{staticClass:"bk-icon icon-eye icon-right",on:{click:function(t){e.showPassWord=!1}}}):i("i",{staticClass:"bk-icon icon-hide icon-right",on:{click:function(t){e.showPassWord=!0}}})]:e._e(),e._v(" "),e.isValueError?i("span",{staticClass:"err-message"},[e._v("字段值不能为空")]):e._e()],2),e._v(" "),i("li",{class:{"control-active":e.isDesFocus}},[i("span",{staticClass:"not-must"},[e._v("描述：")]),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.privateObj.fieldDesc,expression:"privateObj.fieldDesc"}],staticClass:"g-input-border",domProps:{value:e.privateObj.fieldDesc},on:{input:function(t){t.target.composing||e.$set(e.privateObj,"fieldDesc",t.target.value)}}})])]),e._v(" "),i("p",{staticClass:"add-buttons"},[i("button",{staticClass:"add-button confirm",on:{click:e.confirm}},[e._v("确认")]),e._v(" "),i("button",{staticClass:"add-button cancel",on:{click:e.cancleOperate}},[e._v("取消")])])])])},s=[];a._withStripped=!0,i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return s}))},"7yDQ":function(e,t,i){},"8TpU":function(e,t,i){"use strict";i.r(t);var a=i("Ivfr"),s=i("c6pK");for(var n in s)"default"!==n&&function(e){i.d(t,e,(function(){return s[e]}))}(n);i("rjRP");var r=i("psIG"),o=Object(r.a)(s.default,a.a,a.b,!1,null,"b36efabe",null);o.options.__file="src/views/atomDetail/private_setting.vue",t.default=o.exports},"8r4u":function(e,t,i){"use strict";i.r(t);var a=i("WOaI"),s=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);t.default=s.a},AQv0:function(e,t,i){},Ivfr:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("article",{staticClass:"setting-private"},[i("h3",{staticClass:"private-title"},[e._v("私有配置")]),e._v(" "),e.privateList.length?i("section",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.isLoading},expression:"{ isLoading }"}],staticClass:"private-main"},[i("bk-button",{attrs:{theme:"primary",title:"新增配置"},on:{click:function(t){e.showAdd=!0}}},[e._v("新增配置")]),e._v(" "),i("bk-table",{staticStyle:{"margin-top":"15px"},attrs:{data:e.privateList}},[i("bk-table-column",{attrs:{label:"名称",prop:"fieldName",width:"180"}}),e._v(" "),i("bk-table-column",{attrs:{label:"描述",prop:"fieldDesc"}}),e._v(" "),i("bk-table-column",{attrs:{label:"修改者",prop:"modifier",width:"180"}}),e._v(" "),i("bk-table-column",{attrs:{label:"修改时间",prop:"updateTime",width:"180"}}),e._v(" "),i("bk-table-column",{attrs:{label:"操作",width:"120","class-name":"handler-btn"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"update-btn",on:{click:function(i){return e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),i("span",{staticClass:"update-btn",on:{click:function(i){return e.handleDelete(t.row,t.$index)}}},[e._v("删除")])]}}],null,!1,3805590980)})],1)],1):i("section",{staticClass:"g-empty private-empty"},[e._v("\n        暂无私有配置\n        "),i("p",[e._v("\n            插件级别的敏感配置信息，可以在此添加，不暴露在插件代码中。插件逻辑中用到时从输入获取即可\n        ")]),e._v(" "),i("button",{on:{click:function(t){e.showAdd=!0}}},[e._v("添加")])]),e._v(" "),i("transition",{attrs:{name:"atom-fade"}},[e.showAdd?i("private-form",{attrs:{"sensitive-conf-id":e.sensitiveConfId,"private-obj":e.privateObj},on:{cancle:e.cancleOperate,refresh:e.getAllConf}}):e._e()],1)],1)},s=[];a._withStripped=!0,i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return s}))},LYsp:function(e,t,i){"use strict";i.r(t);var a=i("/Vow"),s=i("8r4u");for(var n in s)"default"!==n&&function(e){i.d(t,e,(function(){return s[e]}))}(n);i("b7sn");var r=i("psIG"),o=Object(r.a)(s.default,a.a,a.b,!1,null,"0060e396",null);o.options.__file="src/components/common/privateForm/index.vue",t.default=o.exports},WOaI:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,s=i("Kz1y"),n=(a=s)&&a.__esModule?a:{default:a},r=i("WIBD");t.default={props:{sensitiveConfId:String,privateObj:Object},data:function(){return{isValueFocus:!1,startValueVerify:!1,isNameFocus:!1,startNameVerify:!1,showPassWord:!1,showEye:!0}},computed:{isNameError:function(){return!!this.startNameVerify&&!/^[a-zA-Z][a-zA-Z0-9-_]{2,29}$/.test(this.privateObj.fieldName)},isValueError:function(){return!!this.startValueVerify&&!/\S/.test(this.privateObj.fieldValue)}},created:function(){this.initEyeStatus()},methods:(0,n.default)({},(0,r.mapActions)("store",["addSensitiveConf","modifySensitiveConf"]),{initEyeStatus:function(){this.sensitiveConfId&&(this.showEye=!1)},valueFocus:function(){this.isValueFocus=!0;var e=/^\*+$/.test(this.privateObj.fieldValue);this.sensitiveConfId&&e&&(this.privateObj.fieldValue="",this.showEye=!0)},confirm:function(){var e=this;this.startValueVerify=!0,this.startNameVerify=!0;var t=this.privateObj.fieldName;if(/^[a-zA-Z][a-zA-Z0-9-_]{2,29}$/.test(t))if(this.privateObj.fieldValue){var i={atomCode:this.$route.params.atomCode,id:this.sensitiveConfId,postData:this.privateObj};(this.sensitiveConfId?this.modifySensitiveConf:this.addSensitiveConf)(i).then((function(){e.cancleOperate(),e.$emit("refresh"),e.$bkMessage({message:"操作成功",theme:"success"})})).catch((function(t){e.$bkMessage({message:t.message||t,theme:"error"})}))}else{this.$bkMessage({message:"字段值校验失败，不能为空",theme:"warning"})}else{this.$bkMessage({message:"字段名校验失败，需要以英文字母开头，由英文字母、数字、连接符(-)或下划线(_)组成，长度大于3小于30个字符",theme:"warning"})}},cancleOperate:function(){this.$emit("cancle")}})}},b7sn:function(e,t,i){"use strict";var a=i("7yDQ");i.n(a).a},c6pK:function(e,t,i){"use strict";i.r(t);var a=i("cVta"),s=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);t.default=s.a},cVta:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(i("Kz1y")),s=i("WIBD"),n=r(i("LYsp"));function r(e){return e&&e.__esModule?e:{default:e}}t.default={components:{privateForm:n.default},data:function(){return{privateList:[],isLoading:!1,showAdd:!1,sensitiveConfId:"",privateObj:{fieldName:"",fieldValue:"",fieldDesc:""}}},created:function(){this.getAllConf()},methods:(0,a.default)({},(0,s.mapActions)("store",["getSensitiveConf","deleteSensitiveConf"]),{getAllConf:function(){var e=this;this.isLoading=!0,this.getSensitiveConf(this.$route.params.atomCode).then((function(t){e.privateList=t||[]})).catch((function(t){return e.$bkMessage({message:t.message||t,theme:"error"})})).finally((function(){e.isLoading=!1}))},cancleOperate:function(){this.showAdd=!1,this.sensitiveConfId="",(0,a.default)(this.privateObj,{fieldName:"",fieldValue:"",fieldDesc:""})},handleEdit:function(e){this.sensitiveConfId=e.fieldId,(0,a.default)(this.privateObj,e),delete this.privateObj.fieldId,this.showAdd=!0},handleDelete:function(e,t){var i=this,a=e.fieldId,s=e.fieldName,n=(0,this.$createElement)("p",{style:{textAlign:"center"}},"确定删除"+s+"？");this.$bkInfo({title:"删除",subHeader:n,confirmFn:function(){var e={atomCode:i.$route.params.atomCode,id:a};i.deleteSensitiveConf(e).then((function(){i.privateList.splice(t,1),i.$bkMessage({message:"删除成功",theme:"success"})})).catch((function(e){i.$bkMessage({message:e.message||e,theme:"error"})}))}})}})}},psIG:function(e,t,i){"use strict";function a(e,t,i,a,s,n,r,o){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),a&&(l.functional=!0),n&&(l._scopeId="data-v-"+n),r?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},l._ssrRegister=c):s&&(c=o?function(){s.call(this,this.$root.$options.shadowRoot)}:s),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}i.d(t,"a",(function(){return a}))},rjRP:function(e,t,i){"use strict";var a=i("AQv0");i.n(a).a}}]);