(window.webpackJsonp=window.webpackJsonp||[]).push([["atomList"],{"1EzO":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"atom-list-wrapper"},[a("h3",{staticClass:"market-home-title banner-nav"},[a("icon",{staticClass:"title-icon",attrs:{name:"color-logo-store",size:"25"}}),t._v(" "),a("p",{staticClass:"title-name"},[a("span",{staticClass:"back-home",on:{click:t.toAtomStore}},[t._v("研发商店")]),t._v(" "),a("i",{staticClass:"right-arrow banner-arrow"}),t._v(" "),a("span",{staticClass:"banner-des"},[t._v("工作台")])]),t._v(" "),a("a",{staticClass:"title-work",attrs:{target:"_blank",href:"atom"===t.currentTab?t.atomDevelopLink:t.templateLink}},[t._v(t._s("atom"===t.currentTab?"插件指引":"模板指引"))])],1),t._v(" "),a("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.loading.isLoading,title:t.loading.title},expression:"{\n            isLoading: loading.isLoading,\n            title: loading.title\n        }"}],staticClass:"atomstore-list-content"},[t.loading.isLoading?t._e():a("div",{staticClass:"atomstore-list-main"},[a("bk-tab",{attrs:{active:t.currentTab,type:"unborder-card"},on:{"update:active":function(e){t.currentTab=e},"tab-change":t.changeTab}},[a("bk-tab-panel",{attrs:{name:"atom"}},[a("template",{slot:"label"},[a("span",{staticClass:"bk-icon icon-tab icon-atom"}),t._v("\n                        流水线插件\n                    ")]),t._v(" "),a("span",{staticClass:"bk-icon icon-tab icon-atom",attrs:{slot:"tag"},slot:"tag"}),t._v(" "),a("div",{staticClass:"content-header"},[a("div",{staticClass:"atom-total-row"},[a("button",{staticClass:"bk-button bk-primary",on:{click:function(e){return t.createNewAtom()}}},[a("span",{staticStyle:{"margin-left":"0"}},[t._v("新增插件")])])]),t._v(" "),a("section",{class:[{"control-active":t.isInputFocus},"g-input-search","list-input"]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchName,expression:"searchName"}],staticClass:"g-input-border",attrs:{type:"text",placeholder:"请输入关键字搜索"},domProps:{value:t.searchName},on:{focus:function(e){t.isInputFocus=!0},blur:function(e){t.isInputFocus=!1},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)},input:function(e){e.target.composing||(t.searchName=e.target.value)}}}),t._v(" "),t.searchName?a("i",{staticClass:"bk-icon icon-close-circle-shape clear-icon",on:{click:t.clearSearch}}):a("i",{staticClass:"bk-icon icon-search"})])]),t._v(" "),a("bk-table",{staticStyle:{"margin-top":"15px"},attrs:{"empty-text":"暂时没有插件",data:t.renderList,pagination:t.pagination},on:{"page-change":t.pageChanged,"page-limit-change":t.pageCountChanged}},[a("bk-table-column",{attrs:{label:"插件名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"atom-name",attrs:{title:e.row.name},on:{click:function(a){return t.routerAtoms(e.row.atomCode)}}},[t._v(t._s(e.row.name))])]}}],null,!1,1272672321)}),t._v(" "),a("bk-table-column",{attrs:{label:"调试项目",prop:"projectName"}}),t._v(" "),a("bk-table-column",{attrs:{label:"开发语言",prop:"language"}}),t._v(" "),a("bk-table-column",{attrs:{label:"版本",prop:"version"}}),t._v(" "),a("bk-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return["COMMITTING"===e.row.atomStatus||"BUILDING"===e.row.atomStatus||"BUILD_FAIL"===e.row.atomStatus||"TESTING"===e.row.atomStatus||"AUDITING"===e.row.atomStatus||"UNDERCARRIAGING"===e.row.atomStatus?a("div",{staticClass:"bk-spin-loading bk-spin-loading-mini bk-spin-loading-primary"},[a("div",{staticClass:"rotate rotate1"}),t._v(" "),a("div",{staticClass:"rotate rotate2"}),t._v(" "),a("div",{staticClass:"rotate rotate3"}),t._v(" "),a("div",{staticClass:"rotate rotate4"}),t._v(" "),a("div",{staticClass:"rotate rotate5"}),t._v(" "),a("div",{staticClass:"rotate rotate6"}),t._v(" "),a("div",{staticClass:"rotate rotate7"}),t._v(" "),a("div",{staticClass:"rotate rotate8"})]):t._e(),t._v(" "),"RELEASED"===e.row.atomStatus?a("span",{staticClass:"atom-status-icon success"}):t._e(),t._v(" "),"GROUNDING_SUSPENSION"===e.row.atomStatus?a("span",{staticClass:"atom-status-icon fail"}):t._e(),t._v(" "),"AUDIT_REJECT"===e.row.atomStatus||"UNDERCARRIAGED"===e.row.atomStatus?a("span",{staticClass:"atom-status-icon obtained"}):t._e(),t._v(" "),"INIT"===e.row.atomStatus?a("span",{staticClass:"atom-status-icon bk-icon icon-initialize"}):t._e(),t._v(" "),a("span",[t._v(t._s(t.atomStatusList[e.row.atomStatus]))])]}}],null,!1,3146090008)}),t._v(" "),a("bk-table-column",{attrs:{label:"修改人",prop:"modifier"}}),t._v(" "),a("bk-table-column",{attrs:{label:"修改时间",prop:"updateTime",width:"150"}}),t._v(" "),a("bk-table-column",{attrs:{label:"操作",width:"200","class-name":"handler-btn"},scopedSlots:t._u([{key:"default",fn:function(e){return["GROUNDING_SUSPENSION"===e.row.atomStatus||"AUDIT_REJECT"===e.row.atomStatus||"RELEASED"===e.row.atomStatus?a("span",{staticClass:"upgrade-btn",on:{click:function(a){return t.editHandle("upgradeAtom","atom",e.row.atomId)}}},[t._v("升级")]):t._e(),t._v(" "),"RELEASED"===e.row.atomStatus?a("span",{staticClass:"install-btn",on:{click:function(a){return t.installAHandle("atom",e.row.atomCode)}}},[t._v("安装")]):t._e(),t._v(" "),"INIT"===e.row.atomStatus||"UNDERCARRIAGED"===e.row.atomStatus?a("span",{staticClass:"shelf-btn",on:{click:function(a){return t.editHandle("shelfAtom","atom",e.row.atomId)}}},[t._v("上架")]):t._e(),t._v(" "),"AUDIT_REJECT"===e.row.atomStatus||"RELEASED"===e.row.atomStatus||"GROUNDING_SUSPENSION"===e.row.atomStatus&&e.row.releaseFlag?a("span",{staticClass:"obtained-btn",on:{click:function(a){return t.offline("atom",e.row)}}},[t._v("下架")]):t._e(),t._v(" "),"COMMITTING"===e.row.atomStatus||"BUILDING"===e.row.atomStatus||"BUILD_FAIL"===e.row.atomStatus||"TESTING"===e.row.atomStatus||"AUDITING"===e.row.atomStatus?a("span",{staticClass:"schedule-btn",on:{click:function(a){return t.routerProgress(e.row.atomId)}}},[t._v("进度")]):t._e()]}}],null,!1,108949799)})],1)],2),t._v(" "),a("bk-tab-panel",{attrs:{name:"template"}},[a("template",{slot:"label"},[a("span",{staticClass:"bk-icon icon-tab icon-template"}),t._v("\n                        流水线模板\n                    ")]),t._v(" "),a("div",{staticClass:"content-header"},[a("div",{staticClass:"atom-total-row"},[a("button",{staticClass:"bk-button bk-primary",on:{click:function(e){return t.relateTemplate()}}},[a("span",{staticStyle:{"margin-left":"0"}},[t._v("关联模板")])])]),t._v(" "),a("section",{class:[{"control-active":t.isInputFocus},"g-input-search","list-input"]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchName,expression:"searchName"}],staticClass:"g-input-border",attrs:{type:"text",placeholder:"请输入关键字搜索"},domProps:{value:t.searchName},on:{focus:function(e){t.isInputFocus=!0},blur:function(e){t.isInputFocus=!1},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)},input:function(e){e.target.composing||(t.searchName=e.target.value)}}}),t._v(" "),t.searchName?a("i",{staticClass:"bk-icon icon-close-circle-shape clear-icon",on:{click:t.clearSearch}}):a("i",{staticClass:"bk-icon icon-search"})])]),t._v(" "),a("bk-table",{staticStyle:{"margin-top":"15px"},attrs:{"empty-text":"暂时没有模板",data:t.renderList,pagination:t.pagination},on:{"page-change":t.pageChanged,"page-limit-change":t.pageCountChanged}},[a("bk-table-column",{attrs:{label:"模板名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"atom-name",attrs:{title:e.row.templateName},on:{click:function(a){return t.routerAtoms(e.row.templateCode)}}},[t._v(t._s(e.row.templateName))])]}}],null,!1,3437620678)}),t._v(" "),a("bk-table-column",{attrs:{label:"所属项目",prop:"projectName"}}),t._v(" "),a("bk-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return["AUDITING"===e.row.templateStatus?a("div",{staticClass:"bk-spin-loading bk-spin-loading-mini bk-spin-loading-primary"},[a("div",{staticClass:"rotate rotate1"}),t._v(" "),a("div",{staticClass:"rotate rotate2"}),t._v(" "),a("div",{staticClass:"rotate rotate3"}),t._v(" "),a("div",{staticClass:"rotate rotate4"}),t._v(" "),a("div",{staticClass:"rotate rotate5"}),t._v(" "),a("div",{staticClass:"rotate rotate6"}),t._v(" "),a("div",{staticClass:"rotate rotate7"}),t._v(" "),a("div",{staticClass:"rotate rotate8"})]):t._e(),t._v(" "),"RELEASED"===e.row.templateStatus?a("span",{staticClass:"atom-status-icon success"}):t._e(),t._v(" "),"GROUNDING_SUSPENSION"===e.row.templateStatus?a("span",{staticClass:"atom-status-icon fail"}):t._e(),t._v(" "),"AUDIT_REJECT"===e.row.templateStatus||"UNDERCARRIAGED"===e.row.templateStatus?a("span",{staticClass:"atom-status-icon obtained"}):t._e(),t._v(" "),"INIT"===e.row.templateStatus?a("span",{staticClass:"atom-status-icon bk-icon icon-initialize"}):t._e(),t._v(" "),a("span",[t._v(t._s(t.templateStatusMap[e.row.templateStatus]))])]}}],null,!1,1502342007)}),t._v(" "),a("bk-table-column",{attrs:{label:"修改人",prop:"modifier"}}),t._v(" "),a("bk-table-column",{attrs:{label:"修改时间",prop:"updateTime",width:"150",formatter:t.timeFormatter}}),t._v(" "),a("bk-table-column",{attrs:{label:"操作",width:"250","class-name":"handler-btn"},scopedSlots:t._u([{key:"default",fn:function(e){return["INIT"===e.row.templateStatus||"UNDERCARRIAGED"===e.row.templateStatus||"GROUNDING_SUSPENSION"===e.row.templateStatus||"AUDIT_REJECT"===e.row.templateStatus?a("span",{staticClass:"shelf-btn",on:{click:function(a){return t.editHandle("editTemplate","template",e.row.templateId)}}},[t._v("上架\n                                ")]):t._e(),t._v(" "),"RELEASED"===e.row.templateStatus?a("span",{staticClass:"shelf-btn",on:{click:function(a){return t.editHandle("editTemplate","template",e.row.templateId)}}},[t._v("升级\n                                ")]):t._e(),t._v(" "),"RELEASED"===e.row.templateStatus?a("span",{staticClass:"shelf-btn",on:{click:function(a){return t.installAHandle("template",e.row.templateCode)}}},[t._v("安装\n                                ")]):t._e(),t._v(" "),"AUDITING"===e.row.templateStatus?a("span",{staticClass:"schedule-btn",on:{click:function(a){return t.toTemplateProgress(e.row.templateId)}}},[t._v("进度\n                                ")]):t._e(),t._v(" "),"AUDIT_REJECT"===e.row.templateStatus||"RELEASED"===e.row.templateStatus||"GROUNDING_SUSPENSION"===e.row.templateStatus&&e.row.releaseFlag?a("span",{staticClass:"obtained-btn",on:{click:function(a){return t.offline("template",e.row)}}},[t._v("下架")]):t._e(),t._v(" "),["INIT","GROUNDING_SUSPENSION","UNDERCARRIAGED"].includes(e.row.templateStatus)?a("span",{on:{click:function(a){return t.deleteTemplate(e.row)}}},[t._v("移除")]):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":"0"}},[a("a",{staticStyle:{color:"#3c96ff"},attrs:{target:"_blank",href:"/console/pipeline/"+e.row.projectCode+"/template/"+e.row.templateCode+"/edit"}},[t._v("源模板")])])]}}],null,!1,214676362)})],1)],2)],1)],1),t._v(" "),t.createAtomsideConfig.show?a("bk-sideslider",{staticClass:"create-atom-slider g-slide-radio",attrs:{"is-show":t.createAtomsideConfig.show,title:t.createAtomsideConfig.title,"quick-close":t.createAtomsideConfig.quickClose,width:t.createAtomsideConfig.width},on:{"update:isShow":function(e){return t.$set(t.createAtomsideConfig,"show",e)},"update:is-show":function(e){return t.$set(t.createAtomsideConfig,"show",e)}}},[a("template",{slot:"content"},[a("form",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.createAtomsideConfig.isLoading},expression:"{\n                        isLoading: createAtomsideConfig.isLoading\n                    }"}],staticClass:"bk-form create-atom-form"},[a("div",{staticClass:"bk-form-item is-required"},[a("label",{staticClass:"bk-label"},[t._v("名称")]),t._v(" "),a("div",{staticClass:"bk-form-content atom-item-content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.createAtomForm.name,expression:"createAtomForm.name"},{name:"validate",rawName:"v-validate",value:{required:!0,max:20},expression:"{\n                                    required: true,\n                                    max: 20\n                                }"}],staticClass:"bk-form-input atom-name-input",class:{"is-danger":t.errors.has("atomName")},attrs:{type:"text",placeholder:"请输入中英文名称，不超过20个字符",name:"atomName"},domProps:{value:t.createAtomForm.name},on:{input:function(e){e.target.composing||t.$set(t.createAtomForm,"name",e.target.value)}}}),t._v(" "),a("p",{class:t.errors.has("atomName")?"error-tips":"normal-tips"},[t._v(t._s(t.errors.first("atomName")))])])]),t._v(" "),a("div",{staticClass:"bk-form-item is-required"},[a("label",{staticClass:"bk-label"},[t._v("标识")]),t._v(" "),a("div",{staticClass:"bk-form-content atom-item-content is-tooltips"},[a("div",{staticStyle:{"min-width":"100%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.createAtomForm.atomCode,expression:"createAtomForm.atomCode"},{name:"validate",rawName:"v-validate",value:{required:!0,max:30,regex:"^[a-zA-Z]+$"},expression:"{\n                                        required: true,\n                                        max: 30,\n                                        regex: '^[a-zA-Z]+$'\n                                    }"}],staticClass:"bk-form-input atom-id-input",class:{"is-danger":t.errors.has("atomId")},attrs:{type:"text",placeholder:"请输入英文名称，不超过30个字符",name:"atomId"},domProps:{value:t.createAtomForm.atomCode},on:{input:function(e){e.target.composing||t.$set(t.createAtomForm,"atomCode",e.target.value)}}}),t._v(" "),a("p",{class:t.errors.has("atomId")?"error-tips":"normal-tips"},[t._v("\n                                    "+t._s(t.errors.first("atomId")&&t.errors.first("atomId").indexOf("正则")>0?"只能输入英文":t.errors.first("atomId"))+"\n                                ")])]),t._v(" "),a("bk-popover",{attrs:{placement:"right"}},[a("i",{staticClass:"bk-icon icon-info-circle"}),t._v(" "),a("template",{slot:"content"},[a("p",[t._v("唯一标识，创建后不能修改。将作为插件代码库路径。")])])],2)],1)]),t._v(" "),a("div",{staticClass:"bk-form-item is-required"},[a("label",{staticClass:"bk-label"},[t._v("调试项目")]),t._v(" "),a("div",{staticClass:"bk-form-content atom-item-content is-tooltips"},[a("div",{staticStyle:{"min-width":"100%"}},[a("bk-select",{attrs:{searchable:""},model:{value:t.createAtomForm.projectCode,callback:function(e){t.$set(t.createAtomForm,"projectCode",e)},expression:"createAtomForm.projectCode"}},[t._l(t.projectList,(function(e,s){return a("bk-option",{key:s,attrs:{id:e.project_code,name:e.project_name,placeholder:"请选择调试项目"},nativeOn:{click:function(e){return t.selectedProject(e)}}})})),t._v(" "),a("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"extension"},slot:"extension"},[a("a",{attrs:{href:t.itemUrl,target:"_blank"}},[a("i",{staticClass:"bk-icon icon-plus-circle"}),t._v("\n                                            "+t._s(t.itemText)+"\n                                        ")])])],2),t._v(" "),t.atomErrors.projectError?a("div",{staticClass:"error-tips"},[t._v("项目不能为空")]):t._e()],1),t._v(" "),a("bk-popover",{attrs:{placement:"right",width:"400"}},[a("i",{staticClass:"bk-icon icon-info-circle"}),t._v(" "),a("template",{slot:"content"},[a("p",[t._v("插件默认安装的项目，当新版本进入测试阶段后，该项目下使用当前插件且版本为[主版本号.latest]的流水线执行时，默认使用测试版本。开发者可以验证插件新版本。")])])],2)],1)]),t._v(" "),a("div",{staticClass:"bk-form-item is-required"},[a("label",{staticClass:"bk-label"},[t._v("开发语言")]),t._v(" "),a("div",{staticClass:"bk-form-content atom-item-content"},[a("bk-select",{attrs:{searchable:""},model:{value:t.createAtomForm.language,callback:function(e){t.$set(t.createAtomForm,"language",e)},expression:"createAtomForm.language"}},t._l(t.languageList,(function(e,s){return a("bk-option",{key:s,attrs:{id:e.language,name:e.name,placeholder:"请选择开发语言"},nativeOn:{click:function(e){return t.selectedLanguage(e)}}})})),1),t._v(" "),t.atomErrors.languageError?a("div",{staticClass:"error-tips"},[t._v("开发语言不能为空")]):t._e()],1)]),t._v(" "),a("div",{staticClass:"form-footer"},[a("button",{staticClass:"bk-button bk-primary",attrs:{type:"button"},on:{click:function(e){return t.submitCreateAtom()}}},[t._v("提交")]),t._v(" "),a("button",{staticClass:"bk-button bk-default",attrs:{type:"button"},on:{click:function(e){return t.cancelCreateAtom()}}},[t._v("取消")])])])])],2):t._e(),t._v(" "),t.offlinesideConfig.show?a("bk-sideslider",{staticClass:"offline-atom-slider",attrs:{"is-show":t.offlinesideConfig.show,title:t.offlinesideConfig.title,"quick-close":t.offlinesideConfig.quickClose,width:t.offlinesideConfig.width},on:{"update:isShow":function(e){return t.$set(t.offlinesideConfig,"show",e)},"update:is-show":function(e){return t.$set(t.offlinesideConfig,"show",e)}}},[a("template",{slot:"content"},[a("form",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.offlinesideConfig.isLoading},expression:"{ isLoading: offlinesideConfig.isLoading }"}],staticClass:"bk-form offline-atom-form"},[a("div",{staticClass:"bk-form-item"},[a("label",{staticClass:"bk-label"},[t._v("名称")]),t._v(" "),a("div",{staticClass:"bk-form-content"},[a("p",{staticClass:"content-value"},[t._v(t._s(t.curHandlerAtom.name))])])]),t._v(" "),a("div",{staticClass:"bk-form-item"},[a("label",{staticClass:"bk-label"},[t._v("标识")]),t._v(" "),a("div",{staticClass:"bk-form-content"},[a("p",{staticClass:"content-value"},[t._v(t._s(t.curHandlerAtom.atomCode))])])]),t._v(" "),a("div",{staticClass:"bk-form-item is-required"},[a("label",{staticClass:"bk-label"},[t._v("缓冲期")]),t._v(" "),a("div",{staticClass:"bk-form-content"},[a("bk-select",{attrs:{searchable:""},model:{value:t.buffer,callback:function(e){t.buffer=e},expression:"buffer"}},t._l(t.bufferLength,(function(e,s){return a("bk-option",{key:s,attrs:{id:e.value,name:e.label,placeholder:"请选择缓冲期"},nativeOn:{click:function(e){return t.selectedBuffer(e)}}})})),1),t._v(" "),t.atomErrors.bufferError?a("div",{staticClass:"error-tips"},[t._v("缓冲期不能为空")]):t._e()],1)]),t._v(" "),a("form-tips",{attrs:{"tips-content":t.offlineTips,"prompt-list":t.promptList}}),t._v(" "),a("div",{staticClass:"form-footer"},[a("button",{staticClass:"bk-button bk-primary",attrs:{type:"button"},on:{click:function(e){return t.submitofflineAtom()}}},[t._v("提交")])])],1)])],2):t._e(),t._v(" "),t.templatesideConfig.show?a("bk-sideslider",{staticClass:"create-atom-slider",attrs:{"is-show":t.templatesideConfig.show,title:t.templatesideConfig.title,"quick-close":t.templatesideConfig.quickClose,width:t.templatesideConfig.width},on:{"update:isShow":function(e){return t.$set(t.templatesideConfig,"show",e)},"update:is-show":function(e){return t.$set(t.templatesideConfig,"show",e)}}},[a("template",{slot:"content"},[a("form",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.templatesideConfig.isLoading},expression:"{\n                        isLoading: templatesideConfig.isLoading\n                    }"}],staticClass:"bk-form relate-template-form"},[a("div",{staticClass:"bk-form-item is-required"},[a("label",{staticClass:"bk-label"},[t._v("所属项目")]),t._v(" "),a("div",{staticClass:"bk-form-content atom-item-content is-tooltips"},[a("div",{staticStyle:{"min-width":"100%"}},[a("bk-select",{attrs:{searchable:""},model:{value:t.relateTemplateForm.projectCode,callback:function(e){t.$set(t.relateTemplateForm,"projectCode",e)},expression:"relateTemplateForm.projectCode"}},[t._l(t.projectList,(function(t,e){return a("bk-option",{key:e,attrs:{id:t.project_code,name:t.project_name,placeholder:"请选择项目"}})})),t._v(" "),a("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"extension"},slot:"extension"},[a("a",{attrs:{href:t.itemUrl,target:"_blank"}},[a("i",{staticClass:"bk-icon icon-plus-circle"}),t._v("\n                                            "+t._s(t.itemText)+"\n                                        ")])])],2),t._v(" "),t.templateErrors.projectError?a("div",{staticClass:"error-tips"},[t._v("项目不能为空")]):t._e()],1),t._v(" "),a("bk-popover",{attrs:{placement:"right"}},[a("i",{staticClass:"bk-icon icon-info-circle"}),t._v(" "),a("template",{slot:"content"},[a("p",[t._v("源模版所属项目")])])],2)],1)]),t._v(" "),a("div",{staticClass:"bk-form-item is-required"},[a("label",{staticClass:"bk-label"},[t._v("模板")]),t._v(" "),a("div",{staticClass:"bk-form-content atom-item-content"},[a("bk-select",{attrs:{searchable:""},model:{value:t.relateTemplateForm.template,callback:function(e){t.$set(t.relateTemplateForm,"template",e)},expression:"relateTemplateForm.template"}},t._l(t.templateList,(function(e,s){return a("bk-option",{key:s,attrs:{id:e.templateId,name:e.name,placeholder:"请选择模板"},nativeOn:{click:function(e){return t.selectedTemplate(e)}}})})),1),t._v(" "),t.templateErrors.tplError?a("div",{staticClass:"error-tips"},[t._v("模板不能为空")]):t._e()],1)]),t._v(" "),a("div",{staticClass:"bk-form-item is-required"},[a("label",{staticClass:"bk-label"},[t._v("名称")]),t._v(" "),a("div",{staticClass:"bk-form-content atom-item-content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.relateTemplateForm.name,expression:"relateTemplateForm.name"},{name:"validate",rawName:"v-validate",value:{required:!0,max:20},expression:"{\n                                    required: true,\n                                    max: 20\n                                }"}],staticClass:"bk-form-input atom-name-input",class:{"is-danger":t.errors.has("templateName")},attrs:{type:"text",placeholder:"请输入发布到市场后的模板名称",name:"templateName"},domProps:{value:t.relateTemplateForm.name},on:{input:function(e){e.target.composing||t.$set(t.relateTemplateForm,"name",e.target.value)}}}),t._v(" "),a("p",{class:t.errors.has("templateName")?"error-tips":"normal-tips"},[t._v(t._s(t.errors.first("templateName")))])])]),t._v(" "),a("div",{staticClass:"form-footer"},[a("button",{staticClass:"bk-button bk-primary",attrs:{type:"button"},on:{click:function(e){return t.submitRelateTemplate()}}},[t._v("提交")]),t._v(" "),a("button",{staticClass:"bk-button bk-default",attrs:{type:"button"},on:{click:function(e){return t.cancelRelateTemplate()}}},[t._v("取消")])])])])],2):t._e(),t._v(" "),t.offlineTempConfig.show?a("bk-sideslider",{staticClass:"offline-atom-slider",attrs:{"is-show":t.offlineTempConfig.show,title:t.offlineTempConfig.title,"quick-close":t.offlineTempConfig.quickClose,width:t.offlineTempConfig.width},on:{"update:isShow":function(e){return t.$set(t.offlineTempConfig,"show",e)},"update:is-show":function(e){return t.$set(t.offlineTempConfig,"show",e)}}},[a("template",{slot:"content"},[a("form",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.offlineTempConfig.isLoading},expression:"{\n                        isLoading: offlineTempConfig.isLoading\n                    }"}],staticClass:"bk-form offline-atom-form"},[a("div",{staticClass:"bk-form-item"},[a("label",{staticClass:"bk-label"},[t._v("名称")]),t._v(" "),a("div",{staticClass:"bk-form-content"},[a("p",{staticClass:"content-value"},[t._v(t._s(t.curHandlerTemp.templateName))])])]),t._v(" "),a("div",{staticClass:"bk-form-item"},[a("label",{staticClass:"bk-label"},[t._v("源模板")]),t._v(" "),a("div",{staticClass:"bk-form-content"},[a("a",{staticStyle:{color:"#3c96ff","margin-top":"7px",display:"block"},attrs:{target:"_blank",href:"/console/pipeline/"+t.curHandlerTemp.projectCode+"/template/"+t.curHandlerTemp.templateCode+"/edit"}},[t._v("查看")])])]),t._v(" "),a("form-tips",{attrs:{"tips-content":t.offlineTips,"prompt-list":t.tempPromptList}}),t._v(" "),a("div",{staticClass:"form-footer"},[a("button",{staticClass:"bk-button bk-primary",attrs:{type:"button"},on:{click:t.submitofflineTemp}},[t._v("提交")])])],1)])],2):t._e()],1)])},r=[];s._withStripped=!0,a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return r}))},"4R6H":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-tips"},[t._m(0),t._v(" "),a("div",{staticClass:"tips-content"},[a("p",{staticClass:"tips-row"},[a("span",{staticClass:"tips main-tips"},[t._v(t._s(t.tipsContent))])]),t._v(" "),t._l(t.promptList,(function(e,s){return a("p",{key:s,staticClass:"tips-body"},[a("span",{staticClass:"tips"},[t._v(t._s(e))])])}))],2)])},r=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tips-icon"},[e("i",{staticClass:"bk-icon icon-info-circle-shape"})])}];s._withStripped=!0,a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return r}))},"53lG":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=m(a("Kz1y")),r=m(a("snOE")),o=m(a("06Hw")),i=m(a("YYXh")),n=m(a("jEDj")),l=a("Vgl9"),c=a("7Qib");function m(t){return t&&t.__esModule?t:{default:t}}e.default={components:{formTips:n.default},data:function(){var t=this;return{isInputFocus:!1,showContent:!1,bufferError:!1,isSearch:!1,isInit:!1,buffer:"",currentTab:"atom",searchName:"",gitOAuthUrl:"",itemUrl:"/console/pm",itemText:"新建项目",offlineTips:"下架后：",atomDevelopLink:DOCS_URL_PREFIX+"/所有服务/流水线插件Store/快速入门.html",templateLink:DOCS_URL_PREFIX+"/所有服务/流水线模版/summary.html",atomCounts:0,renderList:[],templateList:[],languageList:[{language:"java",name:"java"},{language:"python",name:"python"}],promptList:["1、插件市场不再展示插件","2、已安装插件的项目不能再添加插件到流水线","3、已使用插件的流水线可以继续使用，但有插件已下架标识"],tempPromptList:["1、不再在模版市场中展示","2、已使用模版的流水线可以继续使用，但有模版已下架标识"],curHandlerAtom:{},curHandlerTemp:{},bufferLength:[{label:"0天",value:"0"},{label:"7天",value:"7"},{label:"15天",value:"15"}],createAtomForm:{projectCode:"",atomCode:"",name:"",language:""},relateTemplateForm:{projectCode:"",template:"",name:""},loading:{isLoading:!1,title:""},atomErrors:{projectError:!1,languageError:!1,bufferError:!1,openSourceError:!1},templateErrors:{projectError:!1,tplError:!1},createAtomsideConfig:{show:!1,isLoading:!1,quickClose:!1,width:565,title:"新增插件"},offlinesideConfig:{show:!1,isLoading:!1,title:"下架插件",quickClose:!1,width:565},offlineTempConfig:{show:!1,isLoading:!1,title:"下架模板",quickClose:!1,width:565},templatesideConfig:{show:!1,isLoading:!1,quickClose:!1,width:565,title:"关联模板到Store"},statusList:{publish:"已发布",commiting:"提交中",fail:"上架失败",testing:"测试中",auditing:"审核中",obtained:"已下架",draft:"草稿"},pagination:{current:1,count:1,limit:10},emptyAtomTipsConfig:{title:"暂时没有插件",desc:"可以创建你的第一个插件",btns:[{type:"primary",size:"normal",handler:function(){return t.createNewAtom()},text:"新增插件"}]},emptyTempTipsConfig:{title:"暂时没有模板",desc:"可以创建你的第一个模板",btns:[{type:"primary",size:"normal",handler:function(){return t.relateTemplate()},text:"关联模板"}]}}},computed:{listType:function(){return this.$route.params.type},atomStatusList:function(){return l.atomStatusMap},templateStatusMap:function(){return l.templateStatusList},projectList:function(){return window.projectList},userInfo:function(){return window.userInfo},isAtomTab:function(){return"atom"===this.currentTab}},watch:{"createAtomsideConfig.show":function(t){t||(this.atomErrors.projectError=!1,this.atomErrors.languageError=!1,this.createAtomForm={projectCode:"",atomCode:"",name:"",language:""})},"offlinesideConfig.show":function(t){t||(this.atomErrors.bufferError=!1,this.buffer="")},"relateTemplateForm.projectCode":function(t,e){t&&this.selectedTplProject()}},mounted:function(){var t=this;return(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isInit=!0,t.currentTab=t.listType,(0,c.getQueryString)("projectCode")&&(0,c.getQueryString)("templateId")&&(t.relateTemplateForm.projectCode=(0,c.getQueryString)("projectCode"),t.relateTemplateForm.template=(0,c.getQueryString)("templateId"),t.templatesideConfig.show=!0,t.currentTab="template"),t.requestList();case 4:case"end":return e.stop()}}),e,t)})))()},methods:{clearSearch:function(){this.searchName="",this.requestList()},timeFormatter:function(t,e,a,s){var r=new Date(a);return r.toISOString().slice(0,10)+" "+r.toTimeString().split(" ")[0]},deleteTemplate:function(t){var e=this;this.loading.isLoading=!0;var a="移除成功",s="success";this.$store.dispatch("store/deleteTemplate",t.templateCode).then((function(t){e.requestList()})).catch((function(t){a=t.message||t,s="error"})).finally((function(){e.$bkMessage({message:a,theme:s}),e.loading.isLoading=!1}))},requestList:function(){var t=this;return(0,i.default)(o.default.mark((function e(){var a,s,i,n,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.showContent=!1,t.loading.isLoading=!0,t.loading.title="数据加载中，请稍候",a=t.pagination.current,s=t.pagination.limit,e.prev=5,n=void 0,!t.isAtomTab){e.next=13;break}return e.next=10,t.$store.dispatch("store/requestAtomList",{atomName:t.searchName,page:a,pageSize:s});case 10:n=e.sent,e.next=16;break;case 13:return e.next=15,t.$store.dispatch("store/requestTemplateList",{templateName:t.searchName,page:a,pageSize:s});case 15:n=e.sent;case 16:(i=t.renderList).splice.apply(i,[0,t.renderList.length].concat((0,r.default)(n.records||[]))),t.renderList.length&&(t.pagination.count=n.count),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(5),l=e.t0.message?e.t0.message:e.t0,"error",t.$bkMessage({message:l,theme:"error"});case 25:return e.prev=25,t.showContent=!0,t.loading.isLoading=!1,t.isInit=!1,e.finish(25);case 30:case"end":return e.stop()}}),e,t,[[5,20,25,30]])})))()},pageCountChanged:function(t,e){var a=this;return(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==a.pagination.limit){e.next=2;break}return e.abrupt("return");case 2:return a.pagination.current=1,a.pagination.limit=t,e.next=6,a.requestList();case 6:case"end":return e.stop()}}),e,a)})))()},pageChanged:function(t){var e=this;return(0,i.default)(o.default.mark((function a(){return o.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.pagination.current=t,a.next=3,e.requestList();case 3:case"end":return a.stop()}}),a,e)})))()},search:function(){this.isSearch=!0,this.pagination.current=1,this.requestList()},checkValid:function(){var t=0;return this.createAtomForm.projectCode||(this.atomErrors.projectError=!0,t++),this.createAtomForm.language||(this.atomErrors.languageError=!0,t++),!(t>0)},submitCreateAtom:function(){var t=this;return(0,i.default)(o.default.mark((function e(){var a,r,i,n,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.checkValid(),e.next=3,t.$validator.validate();case 3:if(r=e.sent,!a||!r){e.next=27;break}return i=void 0,n=void 0,l=(0,s.default)(t.createAtomForm,{}),t.createAtomsideConfig.isLoading=!0,e.prev=8,e.next=11,t.$store.dispatch("store/createNewAtom",{params:l});case 11:i="新增成功",n="success",t.cancelCreateAtom(),t.routerAtoms(t.createAtomForm.atomCode),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),i=e.t0.message?e.t0.message:e.t0,n="error";case 21:return e.prev=21,t.$bkMessage({message:i,theme:n}),t.createAtomsideConfig.isLoading=!1,t.requestList(),"success"===n&&t.cancelCreateAtom(),e.finish(21);case 27:case"end":return e.stop()}}),e,t,[[8,17,21,27]])})))()},submitofflineAtom:function(){var t=this;return(0,i.default)(o.default.mark((function e(){var a,s,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.buffer){e.next=4;break}t.atomErrors.bufferError=!0,e.next=24;break;case 4:return a=void 0,s=void 0,r={bufferDay:t.buffer},t.offlinesideConfig.isLoading=!0,e.prev=7,e.next=10,t.$store.dispatch("store/offlineAtom",{atomCode:t.curHandlerAtom.atomCode,params:r});case 10:a="提交成功",s="success",t.offlinesideConfig.show=!1,t.requestList(),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(7),a=e.t0.message?e.t0.message:e.t0,s="error";case 20:return e.prev=20,t.$bkMessage({message:a,theme:s}),t.offlinesideConfig.isLoading=!1,e.finish(20);case 24:case"end":return e.stop()}}),e,t,[[7,16,20,24]])})))()},submitofflineTemp:function(){var t=this;return(0,i.default)(o.default.mark((function e(){var a,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0,s=void 0,t.offlineTempConfig.isLoading=!0,e.prev=2,e.next=5,t.$store.dispatch("store/offlineTemplate",{templateCode:t.curHandlerTemp.templateCode});case 5:a="下架成功",s="success",t.offlineTempConfig.show=!1,t.requestList(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),a=e.t0.message?e.t0.message:e.t0,s="error";case 15:return e.prev=15,t.$bkMessage({message:a,theme:s}),t.offlineTempConfig.isLoading=!1,e.finish(15);case 19:case"end":return e.stop()}}),e,t,[[2,11,15,19]])})))()},checkTplValid:function(){var t=0;return this.relateTemplateForm.projectCode||(this.templateErrors.projectError=!0,t++),this.relateTemplateForm.template||(this.templateErrors.tplError=!0,t++),!(t>0)},submitRelateTemplate:function(){var t=this;return(0,i.default)(o.default.mark((function e(){var a,s,r,i,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.checkTplValid(),e.next=3,t.$validator.validate();case 3:if(s=e.sent,!a||!s){e.next=25;break}return r=void 0,i=void 0,n={projectCode:t.relateTemplateForm.projectCode,templateName:t.relateTemplateForm.name},t.templatesideConfig.isLoading=!0,e.prev=8,e.next=11,t.$store.dispatch("store/relateTemplate",{templateCode:t.relateTemplateForm.template,params:n});case 11:r="关联成功",i="success",t.cancelRelateTemplate(),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(8),r=e.t0.message?e.t0.message:e.t0,i="error";case 20:return e.prev=20,t.$bkMessage({message:r,theme:i}),t.templatesideConfig.isLoading=!1,t.requestList(),e.finish(20);case 25:case"end":return e.stop()}}),e,t,[[8,16,20,25]])})))()},cancelRelateTemplate:function(){this.templatesideConfig.show=!1,this.templateErrors.projectError=!1,this.templateErrors.tplError=!1,this.relateTemplateForm={projectCode:"",template:"",name:""}},changeTab:function(t){this.isInit||(this.searchName="",this.currentTab=t,this.isSearch=!1,this.pagination.current=1,this.pagination.limit=10,this.renderList.splice(0,this.renderList.length),this.$router.push({name:"atomList",params:{type:t}}),this.requestList())},selectedProject:function(){this.atomErrors.projectError=!1},selectedTplProject:function(){var t=this;return(0,i.default)(o.default.mark((function e(){var a,s;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.templateErrors.projectError=!1,e.prev=1,e.next=4,t.$store.dispatch("store/requestPipelineTemplate",{projectCode:t.relateTemplateForm.projectCode});case 4:s=e.sent,(a=t.templateList).splice.apply(a,[0,t.templateList.length].concat((0,r.default)(s.models||[]))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.$bkMessage({message:e.t0.message?e.t0.message:e.t0,theme:"error"});case 11:case"end":return e.stop()}}),e,t,[[1,8]])})))()},selectedLanguage:function(){this.atomErrors.languageError=!1},selectedTemplate:function(){this.templateErrors.tplError=!1},selectedBuffer:function(){this.atomErrors.bufferError=!1},cancelCreateAtom:function(){this.createAtomsideConfig.show=!1},routerAtoms:function(t){var e={};this.isAtomTab?e.atomCode=t:e.templateCode=t,this.$router.push({name:this.isAtomTab?"overview":"tplOverview",params:e})},routerProgress:function(t){this.$router.push({name:"releaseProgress",params:{releaseType:"shelf",atomId:t}})},toTemplateProgress:function(t){this.$router.push({name:"upgradeTemplate",params:{templateId:t}})},toAtomStore:function(){this.$router.push({name:"atomHome"})},openValidate:function(){window.open(this.gitOAuthUrl,"_self")},createNewAtom:function(){this.createAtomsideConfig.show=!0},relateTemplate:function(){this.templatesideConfig.show=!0},offline:function(t,e){"atom"===t?(this.offlinesideConfig.show=!0,this.curHandlerAtom=e):(this.offlineTempConfig.show=!0,this.curHandlerTemp=e)},offlineTemplate:function(){},installAHandle:function(t,e){var a={},s="atom"===t?"installAtom":"installTemplate";"atom"===t?a.atomCode=e:a.templateCode=e,this.$router.push({name:s,params:a,hash:"#MYATOM"})},editHandle:function(t,e,a){var s={};"atom"===e?s.atomId=a:s.templateId=a,this.$router.push({name:t,params:s})},localTime:function(t){return(0,c.convertTime)(t)},requestDeleteAtom:function(t){var e=this;return(0,i.default)(o.default.mark((function a(){var s,r;return o.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=void 0,r=void 0,a.prev=1,a.next=4,e.$store.dispatch("store/requestDeleteAtom",{atomId:t});case 4:s="删除成功",r="success",e.requestList(),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(1),s=s=a.t0.message?a.t0.message:a.t0,r="error";case 13:return a.prev=13,e.$bkMessage({message:s,theme:r}),a.finish(13);case 16:case"end":return a.stop()}}),a,e,[[1,9,13,16]])})))()},deleteAtom:function(t){var e,a=this,s=(0,this.$createElement)("p",{style:{textAlign:"center"}},"确定删除插件("+t.name+")？");this.$bkInfo({title:"删除",content:s,confirmFn:(e=(0,i.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t,a)}))),function(){return e.apply(this,arguments)})})}}}},"6goq":function(t,e,a){},"A+/B":function(t,e,a){"use strict";var s=a("6goq");a.n(s).a},QmZ6:function(t,e,a){"use strict";a.r(e);var s=a("SDqp"),r=a.n(s);for(var o in s)"default"!==o&&function(t){a.d(e,t,(function(){return s[t]}))}(o);e.default=r.a},SDqp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{tipsContent:{type:String,default:""},promptList:{type:Array,default:[]}}}},Wqko:function(t,e,a){"use strict";a.r(e);var s=a("53lG"),r=a.n(s);for(var o in s)"default"!==o&&function(t){a.d(e,t,(function(){return s[t]}))}(o);e.default=r.a},dpGG:function(t,e,a){"use strict";a.r(e);var s=a("1EzO"),r=a("Wqko");for(var o in r)"default"!==o&&function(t){a.d(e,t,(function(){return r[t]}))}(o);a("A+/B");var i=a("psIG"),n=Object(i.a)(r.default,s.a,s.b,!1,null,null,null);n.options.__file="src/views/atom_list.vue",e.default=n.exports},jEDj:function(t,e,a){"use strict";a.r(e);var s=a("4R6H"),r=a("QmZ6");for(var o in r)"default"!==o&&function(t){a.d(e,t,(function(){return r[t]}))}(o);a("tZtJ");var i=a("psIG"),n=Object(i.a)(r.default,s.a,s.b,!1,null,null,null);n.options.__file="src/components/common/formTips/index.vue",e.default=n.exports},mPAL:function(t,e,a){},tZtJ:function(t,e,a){"use strict";var s=a("mPAL");a.n(s).a}}]);