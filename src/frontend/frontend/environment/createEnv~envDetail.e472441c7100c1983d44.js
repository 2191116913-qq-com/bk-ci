(window.webpackJsonp=window.webpackJsonp||[]).push([["createEnv~envDetail"],{"2agv":function(e,t,s){"use strict";var a=s("8Xl/"),n=s("/6KZ"),i=s("dCrc"),o=s("oICS"),c=s("Ng5M"),l=s("gou2"),r=s("ErhN"),d=s("VJcA");n(n.S+n.F*!s("Clx3")((function(e){Array.from(e)})),"Array",{from:function(e){var t,s,n,u,h=i(e),p="function"==typeof this?this:Array,f=arguments.length,v=f>1?arguments[1]:void 0,C=void 0!==v,_=0,b=d(h);if(C&&(v=a(v,f>2?arguments[2]:void 0,2)),null==b||p==Array&&c(b))for(s=new p(t=l(h.length));t>_;_++)r(s,_,C?v(h[_],_):h[_]);else for(u=b.call(h),s=new p;!(n=u.next()).done;_++)r(s,_,C?o(u,v,[n.value,_],!0):n.value);return s.length=_,s}})},"2yte":function(e,t,s){"use strict";s.r(t);var a=s("HXVx"),n=s("4Sj6");for(var i in n)"default"!==i&&function(e){s.d(t,e,(function(){return n[e]}))}(i);s("OqRV");var o=s("psIG"),c=Object(o.a)(n.default,a.a,a.b,!1,null,null,null);c.options.__file="src/components/devops/environment/node-select-dialog.vue",t.default=c.exports},"4Sj6":function(e,t,s){"use strict";s.r(t);var a=s("9KAt"),n=s.n(a);for(var i in a)"default"!==i&&function(e){s.d(t,e,(function(){return a[e]}))}(i);t.default=n.a},"7lnb":function(e,t,s){e.exports={default:s("Vlwe"),__esModule:!0}},"9KAt":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(s("snOE")),n=o(s("Kz1y")),i=s("WIBD");function o(e){return e&&e.__esModule?e:{default:e}}t.default={props:{nodeSelectConf:Object,loading:Object,curUserInfo:Object,selectHandlercConf:Object,rowList:Array,confirmFn:Function,toggleAllSelect:Function,cancelFn:Function,changeCreatedUser:Function,query:Function,isCmdbNode:{type:Boolean,default:!1},isCC:{type:Boolean,default:!1},searchInfo:{type:Object,default:{data:[],onChange:function(){}}}},data:function(){return{isSearchFooter:!1,inputValue:"",searchKeyList:[]}},computed:(0,n.default)({},(0,i.mapGetters)("environment",["getNodeTypeMap","getNodeStatusMap"]),{inputStyle:function(){var e=this.inputValue;return{width:8*(this.getCharLength(e)+1)+"px"}},hasConstruct:function(){return this.rowList.some((function(e){return"THIRDPARTY"===e.nodeType&&e.isDisplay}))}}),watch:{"nodeSelectConf.isShow":function(e){e||(this.inputValue="",this.searchKeyList.splice(0,this.searchKeyList.length))}},methods:{getCharLength:function(e){for(var t=e.length,s=0,a=0;a<t;a++)0!=(65280&e.charCodeAt(a))&&s++,s++;return s},handleFocus:function(){this.isSearchFooter=!this.isSearchFooter},handleBlur:function(){this.isSearchFooter=!1},focusSearch:function(){this.isSearchFooter||(this.isSearchFooter=!0),this.$refs.searchInput.focus()},deleteAllKey:function(){this.searchKeyList.splice(0,this.searchKeyList.length),this.inputValue=""},paste:function(e){var t,s=this,n=e.clipboardData.getData("text").replace(/\r\n/g," "),i=(n=n.replace(/\t/g," ")).split(" ");(i=i.filter((function(e){return e}))).length&&((t=this.searchKeyList).push.apply(t,(0,a.default)(i)),this.inputValue="",setTimeout((function(){s.inputValue="",s.$nextTick((function(){s.$refs.bizSearcher.scrollTo(s.$refs.bizSearcher.offsetWidth+s.$refs.bizSearcher.scrollWidth,0)}))}),10))},selectedKey:function(e){var t=this;if(e&&/\s*\S+/.test(e)){var s=e.replace(/(^\s*)|(\s*$)/g,"");this.searchKeyList.push(s),this.inputValue="",this.$nextTick((function(){t.$refs.bizSearcher.scrollTo(t.$refs.bizSearcher.offsetWidth+t.$refs.bizSearcher.scrollWidth,0)}))}},searchNode:function(){this.selectedKey(this.inputValue),this.query(this.searchKeyList),this.isSearchFooter=!1},keyupHandler:function(e){switch(e.code){case"Space":this.selectedKey(this.inputValue);break;case"Enter":case"NumpadEnter":this.searchNode();break;case"Backspace":this.inputValue||this.searchKeyList.pop()}},deleteKey:function(e){this.searchKeyList.splice(e,1)}}}},ErhN:function(e,t,s){"use strict";var a=s("eOWL"),n=s("zJT+");e.exports=function(e,t,s){t in e?a.f(e,t,n(0,s)):e[t]=s}},HXVx:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("bk-dialog",{attrs:{width:"900","ext-cls":"node-select-wrapper","close-icon":!1},model:{value:e.nodeSelectConf.isShow,callback:function(t){e.$set(e.nodeSelectConf,"isShow",t)},expression:"nodeSelectConf.isShow"}},[s("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.loading.isLoading,title:e.loading.title},expression:"{\n            isLoading: loading.isLoading,\n            title: loading.title\n        }"}]},[s("div",{staticClass:"node-list-header"},[s("div",{staticClass:"title"},[e._v("选择要添加的节点\n                "),s("span",{staticClass:"selected-node-prompt"},[e._v("\n                    共"),s("span",{staticClass:"node-count"},[e._v(" "+e._s(e.selectHandlercConf.curTotalCount)+" ")]),e._v("个节点\n                ")]),e._v(" "),s("span",{staticClass:"selected-node-prompt"},[e._v("\n                    已选择"),s("span",{staticClass:"node-count"},[e._v(" "+e._s(e.selectHandlercConf.selectedNodeCount)+" ")]),e._v("个节点\n                ")]),e._v(" "),e.isCC||e.isCmdbNode?s("bk-popover",{attrs:{placement:"right"}},[s("i",{staticClass:"bk-icon icon-info-circle"}),e._v(" "),s("template",{slot:"content"},[e.isCC?s("p",{staticStyle:{"max-width":"300px","text-align":"left","white-space":"normal","word-break":"break-all","font-weight":"400"}},[e._v("用户可以导入CC中责任人或备份责任人为当前用户的节点（服务器），如果看不到要导入的节点，可以修改机器责任人后再导入或找责任人代为导入")]):e._e(),e._v(" "),e.isCmdbNode?s("p",{staticStyle:{"max-width":"300px","text-align":"left","white-space":"normal","word-break":"break-all","font-weight":"400"}},[e._v("用户可以导入CMDB中责任人或备份责任人为当前用户的节点（服务器），如果看不到要导入的节点，可以修改机器责任人后再导入或找责任人代为导入")]):e._e()])],2):e._e()],1),e._v(" "),s("div",{staticClass:"search-input-row"},[s("div",{staticClass:"biz-search-input"},[s("div",{staticClass:"biz-ip-searcher-wrapper"},[s("div",{ref:"bizSearcher",staticClass:"biz-searcher",on:{click:e.focusSearch}},[s("ul",{ref:"searchKey",staticClass:"search-key"},[e._l(e.searchKeyList,(function(t,a){return s("li",{key:a,staticClass:"key-node"},[s("span",[e._v(e._s(t))]),e._v(" "),s("i",{staticClass:"bk-icon icon-close",on:{click:function(t){return e.deleteKey(a)}}})])})),e._v(" "),s("li",{staticClass:"input-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],ref:"searchInput",staticClass:"search-input",style:e.inputStyle,attrs:{type:"text"},domProps:{value:e.inputValue},on:{blur:e.handleBlur,paste:e.paste,keyup:e.keyupHandler,input:function(t){t.target.composing||(e.inputValue=t.target.value)}}})])],2)]),e._v(" "),s("div",{staticClass:"actions"},[e.searchKeyList.length?s("i",{staticClass:"bk-icon icon-close",on:{click:e.deleteAllKey}}):e._e(),e._v(" "),s("i",{staticClass:"bk-icon icon-search",on:{click:e.searchNode}})]),e._v(" "),e.isSearchFooter?s("div",{staticClass:"ip-searcher-footer"},[s("p",[e._v("多个IP以空格分开，按回车搜索")])]):e._e()])])])]),e._v(" "),s("div",{staticClass:"node-table"},[!e.selectHandlercConf.searchEmpty&&e.rowList.length?s("div",{staticClass:"node-table-message"},[s("div",{staticClass:"table-node-head"},[s("bk-checkbox",{attrs:{"true-value":!0,"false-value":!1},on:{change:e.toggleAllSelect},model:{value:e.selectHandlercConf.allNodeSelected,callback:function(t){e.$set(e.selectHandlercConf,"allNodeSelected",t)},expression:"selectHandlercConf.allNodeSelected"}}),e._v(" "),s("div",{staticClass:"table-node-item node-item-ip"},[e._v("IP")]),e._v(" "),s("div",{staticClass:"table-node-item node-item-name"},[e._v("主机名")]),e._v(" "),s("div",{staticClass:"table-node-item node-item-type"},[e._v("来源/导入人")]),e._v(" "),s("div",{staticClass:"table-node-item node-item-status"},[e._v("主机状态")]),e._v(" "),s("div",{staticClass:"table-node-item node-item-agstatus"},[s("span",[e._v("区域")])])],1),e._v(" "),s("div",{staticClass:"table-node-body"},e._l(e.rowList,(function(t,a){return t.isDisplay?s("div",{key:a,staticClass:"table-node-row"},[s("div",{staticClass:"table-node-item node-item-checkbox"},[s("bk-checkbox",{attrs:{"true-value":!0,"false-value":!1,disabled:t.isEixtEnvNode},model:{value:t.isChecked,callback:function(s){e.$set(t,"isChecked",s)},expression:"col.isChecked"}})],1),e._v(" "),s("div",{staticClass:"table-node-item node-item-ip"},[s("span",{staticClass:"node-ip"},[e._v(e._s(t.ip))])]),e._v(" "),s("div",{staticClass:"table-node-item node-item-name",class:{"over-content":e.selectHandlercConf.curDisplayCount>6}},[s("span",{staticClass:"node-name"},[e._v(e._s(t.name))])]),e._v(" "),s("div",{staticClass:"table-node-item node-item-type",class:{"over-content":e.selectHandlercConf.curDisplayCount>6}},[s("div",[s("span",{staticClass:"node-name"},[e._v(e._s(e.getNodeTypeMap[t.nodeType]))]),e._v(" "),s("span",[e._v("("+e._s(t.createdUser)+")")])])]),e._v(" "),s("div",{staticClass:"table-node-item node-item-status"},[s("span",{staticClass:"node-status",class:{"over-content":e.selectHandlercConf.curDisplayCount>6}},[e._v(e._s(e.getNodeStatusMap[t.nodeStatus]))])]),e._v(" "),s("div",{staticClass:"table-node-item node-item-agstatus",class:{"over-content":e.selectHandlercConf.curDisplayCount>6}},[s("span",[e._v(e._s(t.gateway))])])]):e._e()})),0)]):e._e(),e._v(" "),e.selectHandlercConf.searchEmpty||!e.rowList.length?s("div",{staticClass:"no-data-row"},[!e.isCC&&!e.isCmdbNode||e.selectHandlercConf.curTotalCount?s("span",[e._v("暂无数据")]):s("span",[e._v("暂未找到主机负责人或备份负责人是你的主机，请联系对应负责人来添加")])]):e._e()])]),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"footer-handler"},[s("bk-button",{attrs:{theme:"primary",disabled:e.nodeSelectConf.unselected},on:{click:e.confirmFn}},[e._v(e._s(e.nodeSelectConf.importText))]),e._v(" "),s("bk-button",{attrs:{theme:"default"},on:{click:e.cancelFn}},[e._v("取消")])],1)])])},n=[];a._withStripped=!0,s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return n}))},OqRV:function(e,t,s){"use strict";var a=s("v699");s.n(a).a},Vlwe:function(e,t,s){s("WwSA"),s("2agv"),e.exports=s("TaGV").Array.from},snOE:function(e,t,s){"use strict";t.__esModule=!0;var a,n=s("7lnb"),i=(a=n)&&a.__esModule?a:{default:a};t.default=function(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return(0,i.default)(e)}},v699:function(e,t,s){}}]);