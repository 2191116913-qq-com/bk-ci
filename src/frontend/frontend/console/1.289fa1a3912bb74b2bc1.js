(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"1QRf":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:e.loadingOption,expression:"loadingOption"}],staticClass:"devops-index"},["true"===e.showExplorerTips&&e.isShowPreviewTips&&!e.chromeExplorer?o("div",{staticClass:"user-prompt"},[e._m(0),e._v(" "),o("div",{staticClass:"close-btn"},[o("span",{staticClass:"close-remind",on:{click:e.closeExplorerTips}},[e._v("不再提示")]),e._v(" "),o("i",{staticClass:"bk-icon icon-close",on:{click:e.closePreviewTips}})])]):e._e(),e._v(" "),e.projectList?[o("Header"),e._v(" "),o("main",[e.hasProjectList?[e.hasProject?e.isOfflineProject?o("empty-tips",{attrs:{title:"项目已禁用",desc:"该项目已被禁用，请切换项目试试，或重新启用该项目"}},[o("bk-button",{attrs:{theme:"primary"},on:{click:e.switchProject}},[e._v("\n                        切换项目\n                    ")]),e._v(" "),o("a",{staticClass:"empty-btns-item",attrs:{target:"_blank",href:"/console/pm"}},[o("bk-button",{attrs:{theme:"success"}},[e._v("项目管理")])],1)],1):e._e():o("empty-tips",{attrs:{title:"无该项目权限",desc:"你并非该项目组成员或者该项目不存在，请切换项目试试"}},[o("bk-button",{attrs:{type:"primary"},on:{click:e.switchProject}},[e._v("\n                        切换项目\n                    ")])],1)]:e._e(),e._v(" "),!e.hasProjectList||e.isOnlineProject||e.isApprovalingProject?o("router-view"):e._e()],2)]:e._e(),e._v(" "),e.showLoginDialog?o("login-dialog"):e._e()],2)};r._withStripped=!0;var n=o("yO+b"),i=o.n(n),s=o("wv3L"),c=o.n(s),a=o("rIqr"),l=o.n(a),p=o("7oj+"),u=o.n(p),d=o("rIjD"),f=o.n(d),h=o("i7/w"),v=o.n(h),g=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"devops-header"},[o("div",{staticClass:"header-left-bar"},[o("router-link",{staticClass:"header-logo",attrs:{to:"/console/"}},[o("Logo",{attrs:{name:"devops-logo",width:"100",height:"28"}})],1),e._v(" "),e.showProjectList?o("bk-select",{ref:"projectDropdown",staticClass:"bkdevops-project-selector",attrs:{placeholder:"请选择项目",value:e.projectId,clearable:!1,searchable:""},on:{change:e.handleProjectChange,toggle:e.handleDropdownVisible}},[e._l(e.selectProjectList,(function(e){return o("bk-option",{key:e.project_code,attrs:{id:e.project_code,name:e.project_name}})})),e._v(" "),o("template",{slot:"extension"},[o("div",{staticClass:"bk-selector-create-item",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.popProjectDialog()}}},[o("i",{staticClass:"bk-icon icon-plus-circle"}),e._v(" "),o("span",{staticClass:"text"},[e._v("新建项目")])]),e._v(" "),o("div",{staticClass:"bk-selector-create-item",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.goToPm(t)}}},[o("i",{staticClass:"bk-icon icon-apps"}),e._v(" "),o("span",{staticClass:"text"},[e._v("项目管理")])])])],2):e._e(),e._v(" "),e.showNav?o("nav-menu"):e._e(),e._v(" "),e.title?o("h3",{staticClass:"service-title",on:{click:e.goHome}},[o("logo",{attrs:{name:e.serviceLogo,size:"20"}}),e._v("\n            "+e._s(e.title)+"\n        ")],1):e._e()],1),e._v(" "),o("div",{staticClass:"header-right-bar"},[o("i",{staticClass:"bk-icon icon-helper",on:{click:function(t){return t.stopPropagation(),e.goToDocs(t)}}}),e._v(" "),o("User",e._b({staticClass:"user-info"},"User",e.user,!1))],1),e._v(" "),o("project-dialog",{attrs:{"init-show-dialog":e.showProjectDialog,title:e.projectDialogTitle}})],1)};g._withStripped=!0;var m=o("la05"),w=o("85Lh"),b=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.hideUserInfo,expression:"hideUserInfo"}],class:{"devops-user-info":!0,active:e.show}},[o("div",{staticClass:"user-entry",on:{click:function(t){return t.stopPropagation(),e.toggleUserInfo(t)}}},[e._v("\n        "+e._s(e.username)+"\n        "),o("i",{staticClass:"bk-icon icon-down-shape"})]),e._v(" "),e.show?o("div",{staticClass:"user-info-dropmenu"},[o("p",{staticClass:"user-avatar"},[o("span",[e._v(e._s(e.chineseName))])]),e._v(" "),e._t("menu",[o("ul",e._l(e.menu,(function(t,r){return o("li",{key:r},[t.to?o("router-link",{staticClass:"user-menu-item",attrs:{to:t.to},nativeOn:{click:function(t){return e.hideUserInfo(t)}}},[e._v("\n                        "+e._s(t.label)+"\n                    ")]):t.cb?o("span",{staticClass:"user-menu-item",on:{click:function(e){return e.stopPropagation(),t.cb(e)}}},[e._v(e._s(t.label))]):e._e()],1)})),0)])],2):e._e()])};b._withStripped=!0;var j=o("t3kO"),y=o.n(j),_=[],P="$clickoutsideCtx",k="";document.addEventListener("mousedown",(function(e){return k=e}),!1),document.addEventListener("mouseup",(function(e){var t=!0,o=!1,r=void 0;try{for(var n,i=y()(_);!(t=(n=i.next()).done);t=!0){n.value[P].clickoutsideHandler(e,k)}}catch(e){o=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(o)throw r}}}),!1);var C,x={bind:function(e,t,o){var r=_.push(e)-1;e[P]={id:r,clickoutsideHandler:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(o.context&&r.target&&n.target)||e.contains(r.target)||e.contains(n.target)||e===r.target||o.context.popup&&(o.context.popup.contains(r.target)||o.context.popup.contains(n.target))||(t.expression&&e[P].callbackName&&o.context[e[P].callbackName]?o.context[e[P].callbackName]():e[P].bindingFn&&e[P].bindingFn())},callbackName:t.expression,callbackFn:t.value}},update:function(e,t){e[P].callbackName=t.expression,e[P].callbackFn=t.value},unbind:function(e){for(var t=0,o=_.length;t<o;t++)if(_[t][P].id===e[P].id){_.splice(t,1);break}}},O=(C=function(e,t){return(C=f.a||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}C(e,t),e.prototype=null===t?u()(t):(o.prototype=t.prototype,new o)}),S=function(e,t,o,r){var n,s=arguments.length,a=s<3?t:null===r?r=l()(t,o):r;if("object"===("undefined"==typeof Reflect?"undefined":c()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(a=(s<3?n(a):s>3?n(t,o,a):n(t,o))||a);return s>3&&a&&i()(t,o,a),a},D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.show=!1,t}return O(t,e),t.prototype.toggleUserInfo=function(e){this.show=!this.show},t.prototype.hideUserInfo=function(){this.show=!1},t.prototype.handleShow=function(e,t){e!==t&&this.togglePopupShow(e)},Object.defineProperty(t.prototype,"menu",{get:function(){return[{to:"/console/pm",label:"项目管理"}]},enumerable:!0,configurable:!0}),S([Object(m.b)()],t.prototype,"username",void 0),S([Object(m.b)()],t.prototype,"avatarUrl",void 0),S([Object(m.b)()],t.prototype,"chineseName",void 0),S([Object(m.b)()],t.prototype,"bkpaasUserId",void 0),S([w.a],t.prototype,"togglePopupShow",void 0),S([Object(m.c)("show")],t.prototype,"handleShow",null),t=S([Object(m.a)({directives:{clickoutside:x}})],t)}(v.a),L=(o("AngI"),o("psIG")),E=Object(L.a)(D,b,[],!1,null,null,null);E.options.__file="src/components/User/index.vue";var N=E.exports,A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.hideNavMenu,expression:"hideNavMenu"}],class:{"devops-header-nav":!0,active:e.show}},[r("p",{staticClass:"nav-entry",class:{active:e.show},on:{click:function(t){return t.stopPropagation(),e.toggleNavMenu(t)}}},[r("span",[e._v("服务")]),e._v(" "),e.showNewServiveTips?r("span",{staticClass:"unread-icon"}):e._e(),e._v(" "),r("i",{staticClass:"bk-icon icon-angle-down"})]),e._v(" "),r("transition",{attrs:{name:"fade"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"nav-menu-layout",class:{showTopPrompt:"true"===e.showExplorerTips&&e.isShowPreviewTips&&!e.chromeExplorer}},[r("div",{staticClass:"nav-menu-layout-content",on:{click:function(t){return t.stopPropagation(),e.hideNavMenu(t)}}},[r("div",{staticClass:"nav-collect"},[r("h3",[e._v("我的收藏")]),e._v(" "),e.collectServices.length>0?r("ul",{staticClass:"nav-collect-menu"},e._l(e.collectServices,(function(t){return r("li",{key:t.id,staticClass:"collect-item"},[r("logo",{staticClass:"service-logo",attrs:{name:e.getServiceLogoByPath(t.link_new),size:"18"}}),e._v(" "),r("a",{attrs:{href:e.addConsole(t.link_new)},on:{click:function(o){return o.preventDefault(),e.gotoPage(t)}}},[e._v("\n                                "+e._s(e.serviceName(t.name))+"\n                                "),r("span",{staticClass:"service-id"},[e._v(e._s(e.serviceId(t.name)))])])],1)})),0):r("div",{staticClass:"empty-collect"},[r("img",{attrs:{src:o("8/bI")}}),e._v(" "),r("p",[e._v("未收藏任何服务")])])]),e._v(" "),r("div",{staticClass:"nav-menu"},[r("nav-box",{attrs:{services:e.services,"toggle-collect":e.toggleCollect}})],1)])])])],1)};A._withStripped=!0;var I=o("/9Wh"),T=o.n(I),R=o("eR4j"),M=o.n(R),$=o("KyLU"),U=o.n($),H=o("OBCi"),B=o.n(H),q=o("bdvc"),Y=o("E4OK"),z=o("a/Mf"),V=o("Hyou"),Q=function(){var e=function(t,o){return(e=f.a||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?u()(o):(r.prototype=o.prototype,new r)}}(),Z=function(e,t,o,r){var n,s=arguments.length,a=s<3?t:null===r?r=l()(t,o):r;if("object"===("undefined"==typeof Reflect?"undefined":c()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(a=(s<3?n(a):s>3?n(t,o,a):n(t,o))||a);return s>3&&a&&i()(t,o,a),a},W=function(e,t,o,r){return new(o||(o=B.a))((function(n,i){function s(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?n(e.value):new o((function(t){t(e.value)})).then(s,c)}a((r=r.apply(e,t||[])).next())}))},G=function(e,t){var o,r,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof U.a&&(i[M.a]=function(){return this}),i;function c(i){return function(c){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,r&&(n=2&i[0]?r.return:i[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;switch(r=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},K=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.show=!1,t.showNewServiveTips=!1,t.showExplorerTips=localStorage.getItem("showExplorerTips"),t}return Q(t,e),Object.defineProperty(t.prototype,"chromeExplorer",{get:function(){var e=window.navigator.userAgent;return e.indexOf("Chrome")>=0&&-1===e.indexOf("QQ")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"newServiceList",{get:function(){var e=localStorage.getItem("newServiceList");return e?JSON.parse(e):[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"curNewServices",{get:function(){var e=[];return window.allServices.forEach((function(t){t.children.forEach((function(t){"new"===t.status&&e.push(t.name)}))})),e},enumerable:!0,configurable:!0}),t.prototype.toggleNavMenu=function(){var e=this;this.showNewServiveTips&&(this.showNewServiveTips=!1,this.curNewServices.forEach((function(t){-1===e.newServiceList.indexOf(t)&&e.newServiceList.push(t)})),this.newServiceList.length&&localStorage.setItem("newServiceList",T()(this.newServiceList))),this.show=!this.show},t.prototype.hideNavMenu=function(){this.show=!1},t.prototype.serviceName=function(e){return e.slice(0,e.indexOf("("))},t.prototype.getServiceLogoByPath=function(e){return Object(q.b)(e)},t.prototype.addConsole=function(e){return Object(q.j)("/console/",e)},t.prototype.serviceId=function(e){return e.replace(/^\S+?\(([\s\S]+?)\)\S*$/,"$1")},t.prototype.gotoPage=function(e){var t=e.link_new,o=window.currentPage&&Object(q.a)(window.currentPage.link_new),r=Object(q.a)(t),n=this.addConsole(t);o===r&&window.currentPage&&"iframe"===window.currentPage.inject_type?V.a.$emit("goHome"):this.$router.push(n)},t.prototype.created=function(){var e=this;this.curNewServices.length&&this.curNewServices.some((function(t){return-1===e.newServiceList.indexOf(t)}))&&(this.showNewServiveTips=!0)},t.prototype.toggleCollect=function(e,t){return W(this,void 0,void 0,(function(){var o;return G(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t&&8===this.collectServices.length?(this.$bkMessage({message:"及时清除不常使用的链接，才能添加新的链接哦：）",theme:"error"}),[2]):(e.collected=t,[4,this.toggleServiceCollect({serviceId:e.id,isCollected:t})]);case 1:return r.sent(),[3,3];case 2:return o=r.sent(),console.warn(o),e.collected=!t,[3,3];case 3:return[2]}}))}))},Z([Object(w.b)("getCollectServices")],t.prototype,"collectServices",void 0),Z([w.c],t.prototype,"services",void 0),Z([w.c],t.prototype,"isShowPreviewTips",void 0),Z([w.a],t.prototype,"toggleServiceCollect",void 0),t=Z([Object(m.a)({name:"nav-menu",components:{Logo:Y.a,NavBox:z.a},directives:{clickoutside:x}})],t)}(v.a),F=(o("LpnX"),Object(L.a)(K,A,[],!1,null,null,null));F.options.__file="src/components/Header/NavMenu.vue";var J=F.exports,X=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("bk-dialog",{staticClass:"devops-project-dialog",attrs:{"show-footer":!0,width:e.width,"quick-close":!1,"close-icon":!1},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[o("h3",{staticClass:"project-dialog-header",attrs:{slot:"header"},slot:"header"},[e._v("\n        "+e._s(e.title)+"\n    ")]),e._v(" "),o("bk-form",{staticClass:"biz-pm-form",attrs:{model:e.newProject}},[o("devops-form-item",{attrs:{label:"项目名称",required:!0,"is-error":e.errors.has("project_name")}},[o("bk-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,min:4,max:12,projectNameUnique:[e.newProject.project_id]},expression:"{ required: true, min: 4, max: 12, projectNameUnique: [newProject.project_id] }"}],attrs:{maxlength:"12",name:"project_name",placeholder:"请输入4-12字符的项目名称"},model:{value:e.newProject.project_name,callback:function(t){e.$set(e.newProject,"project_name",t)},expression:"newProject.project_name"}}),e._v(" "),e.errors.has("project_name")?o("div",{staticClass:"project-dialog-error-tips",attrs:{slot:"error-tips"},slot:"error-tips"},[e._v("\n                "+e._s(e.errors.first("project_name"))+"\n                "),"项目名称已存在"===e.errors.first("project_name")?o("span"):e._e()]):e._e()],1),e._v(" "),o("devops-form-item",{attrs:{label:"英文缩写",required:!0,rules:[],property:"english_name","is-error":e.errors.has("english_name"),"error-msg":e.errors.first("english_name")}},[o("bk-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,min:2,projectEnglishNameUnique:[e.newProject.project_id]},expression:"{ required: true, min: 2, projectEnglishNameUnique: [newProject.project_id] }"}],attrs:{placeholder:"请输入2-32字符的小写字母+数字，以小写字母开头",name:"english_name",maxlength:"32",disabled:!e.isNew},model:{value:e.newProject.english_name,callback:function(t){e.$set(e.newProject,"english_name",t)},expression:"newProject.english_name"}})],1),e._v(" "),o("bk-form-item",{attrs:{label:"项目描述",required:!0,property:"description"}},[o("bk-input",{attrs:{type:"textarea",maxlength:"100",placeholder:"请输入项目描述",name:"description"},model:{value:e.newProject.description,callback:function(t){e.$set(e.newProject,"description",t)},expression:"newProject.description"}})],1),e._v(" "),o("bk-form-item",{attrs:{label:"项目类型",required:!0,property:"project_type"}},[o("bk-select",{attrs:{placeholder:"选择项目类型",name:"center",searchable:""},model:{value:e.newProject.project_type,callback:function(t){e.$set(e.newProject,"project_type",t)},expression:"newProject.project_type"}},e._l(e.projectTypeList,(function(e){return o("bk-option",{key:e.id,attrs:{id:e.id,name:e.name}})})),1)],1)],1),e._v(" "),o("template",{slot:"footer"},[o("div",{staticClass:"bk-dialog-outer"},[o("bk-button",{staticClass:"bk-dialog-btn bk-dialog-btn-confirm",attrs:{theme:"primary",disabled:e.isCreating,loading:e.isCreating},on:{click:e.saveProject}},[e._v("\n                确定\n            ")]),e._v(" "),o("bk-button",{staticClass:"bk-dialog-btn bk-dialog-btn-cancel",attrs:{disabled:e.isCreating},on:{click:e.cancelProject}},[e._v("\n                取消\n            ")])],1)])],2)};X._withStripped=!0;var ee=function(){var e=function(t,o){return(e=f.a||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?u()(o):(r.prototype=o.prototype,new r)}}(),te=function(e,t,o,r){var n,s=arguments.length,a=s<3?t:null===r?r=l()(t,o):r;if("object"===("undefined"==typeof Reflect?"undefined":c()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(a=(s<3?n(a):s>3?n(t,o,a):n(t,o))||a);return s>3&&a&&i()(t,o,a),a},oe=function(e,t,o,r){return new(o||(o=B.a))((function(n,i){function s(e){try{a(r.next(e))}catch(e){i(e)}}function c(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?n(e.value):new o((function(t){t(e.value)})).then(s,c)}a((r=r.apply(e,t||[])).next())}))},re=function(e,t){var o,r,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof U.a&&(i[M.a]=function(){return this}),i;function c(i){return function(c){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,r&&(n=2&i[0]?r.return:i[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;switch(r=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.descriptionLength=100,t.validate={},t.title="新建项目",t.isNew=!0,t.isCreating=!1,t.deptLoading={bg:!1,dept:!1,center:!1},t.projectTypeList=[{id:1,name:"手游"},{id:2,name:"端游"},{id:3,name:"页游"},{id:4,name:"平台产品"},{id:5,name:"支撑产品"}],t}return ee(t,e),t.prototype.handleProjectChange=function(e){var t,o=e.target,r=o.name,n=o.value,i=o.type,s=o.checked,c="checkbox"===i;this.updateNewProject(((t={})[r]=c?s:n,t))},Object.defineProperty(t.prototype,"showDialog",{get:function(){return this.showProjectDialog},set:function(e){this.toggleProjectDialog({showProjectDialog:e})},enumerable:!0,configurable:!0}),t.prototype.watchDialog=function(e){return oe(this,void 0,void 0,(function(){return re(this,(function(t){return e&&(this.$validator.reset(),this.newProject.project_name?this.isNew=!1:this.isNew=!0,this.title=this.isEmptyProject(this.newProject)?"新建项目":"编辑项目"),[2]}))}))},t.prototype.closeDialog=function(){this.showDialog=!1},t.prototype.addProject=function(){return oe(this,void 0,void 0,(function(){var e,t,o,r=this;return re(this,(function(n){switch(n.label){case 0:e=this.newProject,n.label=1;case 1:return n.trys.push([1,6,,7]),[4,this.ajaxAddPM(e)];case 2:return"boolean"==typeof(t=n.sent())&&t?(this.$bkMessage({theme:"success",message:"项目创建成功！"}),this.closeDialog(),[4,this.getProjects()]):[3,4];case 3:return n.sent(),V.a.$emit("addNewProject",e),[3,5];case 4:this.$bkMessage({theme:"error",message:"接口报错！"}),n.label=5;case 5:return setTimeout((function(){r.isCreating=!1}),100),[3,7];case 6:return o=n.sent(),this.$bkMessage({theme:"error",message:o.message||"接口异常！"}),setTimeout((function(){r.isCreating=!1}),100),[3,7];case 7:return[2]}}))}))},t.prototype.updateProject=function(e){return oe(this,void 0,void 0,(function(){var t,o,r=this;return re(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),[4,this.ajaxUpdatePM(e)];case 1:return n.sent()?(this.$bkMessage({theme:"success",message:"项目修改成功！"}),this.closeDialog(),[4,this.getProjects()]):[3,3];case 2:return n.sent(),[3,4];case 3:this.$bkMessage({theme:"error",message:"接口报错！"}),n.label=4;case 4:return setTimeout((function(){r.isCreating=!1}),100),[3,6];case 5:return t=n.sent(),o=t.message||"接口异常！",this.$bkMessage({theme:"error",message:o}),setTimeout((function(){r.isCreating=!1}),100),[3,6];case 6:return[2]}}))}))},t.prototype.saveProject=function(){return oe(this,void 0,void 0,(function(){var e,t,o,r;return re(this,(function(n){return e=this.newProject,console.log(e),t=/^[a-z][a-z0-9]{1,32}$/,""===e.project_name?(this.$bkMessage({theme:"error",message:"项目名称不能为空！"}),[2,!1]):e.project_name.length<=3||e.project_name.length>20?(this.$bkMessage({theme:"error",message:"项目名称长度必须大于3字符小于21字符！"}),[2,!1]):t.test(e.english_name)?""===e.description?(this.$bkMessage({theme:"error",message:"请输入项目描述！"}),[2,!1]):""===e.project_type?(this.$bkMessage({theme:"error",message:"请选择项目类型！"}),[2,!1]):(this.isCreating=!0,this.isNew?this.addProject():(o=this.newProject.project_id,r={id:o,data:this.newProject},this.updateProject(r)),[2,!0]):(this.$bkMessage({theme:"error",message:"英文缩写必须由小写字母+数字组成，以小写字母开头，长度限制32字符！"}),[2,!1])}))}))},t.prototype.cancelProject=function(){this.isCreating=!1,this.showDialog=!1},t.prototype.created=function(){return oe(this,void 0,void 0,(function(){return re(this,(function(e){return this.title=this.isEmptyProject(this.newProject)?"新建项目":"编辑项目",[2]}))}))},te([Object(m.b)({default:!1})],t.prototype,"initShowDialog",void 0),te([Object(m.b)({default:860})],t.prototype,"width",void 0),te([w.c],t.prototype,"newProject",void 0),te([w.c],t.prototype,"showProjectDialog",void 0),te([w.b],t.prototype,"isEmptyProject",void 0),te([w.a],t.prototype,"updateNewProject",void 0),te([w.a],t.prototype,"checkProjectField",void 0),te([w.a],t.prototype,"toggleProjectDialog",void 0),te([w.a],t.prototype,"ajaxUpdatePM",void 0),te([w.a],t.prototype,"ajaxAddPM",void 0),te([w.a],t.prototype,"getProjects",void 0),te([Object(m.c)("showDialog")],t.prototype,"watchDialog",null),t=te([m.a],t)}(v.a),ie=(o("Tp3F"),Object(L.a)(ne,X,[],!1,null,"59f4cb04",null));ie.options.__file="src/components/ProjectDialog/index.vue";var se=ie.exports,ce=o("2W1i"),ae=function(){var e=function(t,o){return(e=f.a||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?u()(o):(r.prototype=o.prototype,new r)}}(),le=function(e,t,o,r){var n,s=arguments.length,a=s<3?t:null===r?r=l()(t,o):r;if("object"===("undefined"==typeof Reflect?"undefined":c()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(a=(s<3?n(a):s>3?n(t,o,a):n(t,o))||a);return s>3&&a&&i()(t,o,a),a},pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDropdownMenuVisible=!1,t.isShowTooltip=!0,t}return ae(t,e),Object.defineProperty(t.prototype,"showProjectList",{get:function(){return this.headerConfig.showProjectList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showNav",{get:function(){return this.headerConfig.showNav},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"projectId",{get:function(){return this.$route.params.projectId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.$route.meta.header},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serviceLogo",{get:function(){return this.$route.meta.logo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectProjectList",{get:function(){return this.projectList.filter((function(e){return(1===e.approval_status||2===e.approval_status)&&!e.is_offlined}))},enumerable:!0,configurable:!0}),t.prototype.created=function(){var e=this;V.a.$on("show-project-menu",(function(){var t=e.$refs.projectDropdown.$el;t&&t.click()})),V.a.$on("hide-project-menu",(function(){if(e.isDropdownMenuVisible){var t=e.$refs.projectDropdown.$el;t&&t.click()}})),V.a.$on("show-project-dialog",(function(t){e.popProjectDialog(t)}))},t.prototype.handleDropdownVisible=function(e){this.isDropdownMenuVisible!==e&&this.togglePopupShow(e),this.isDropdownMenuVisible=e},t.prototype.goHome=function(){V.a.$emit("goHome");var e=this.$route.meta.to;e&&this.$router.push({name:e,params:this.$route.params})},t.prototype.goHomeById=function(e,t){void 0===t&&(t=!1);var o=window.currentPage,r=o.show_project_list,n=Object(q.j)("/console",o.link_new);"codecc"===this.$route.name?n="/console/codecc/"+e+"/coverity/myproject":r&&("path"===o.project_id_type?n=Object(q.j)(n,e):n+="?projectId="+e),t?location.href=n:this.$router.replace({path:n})},t.prototype.handleProjectChange=function(e){var t=this.$route.params.projectId,o=this.selectProjectList.find((function(e){return e.project_code===t})),r=this.selectProjectList.find((function(t){return t.project_code===e}));t&&!o?this.goHomeById(e):this.$router.replace({params:{projectId:e}}),ce.set(X_DEVOPS_PROJECT_ID,e,{domain:"tencent.com",path:"/"}),(!o&&r.gray||o&&o.gray!==r.gray)&&(localStorage.setItem("projectId",e),this.goHomeById(e,!0))},t.prototype.to=function(e){window.open(e,"_blank")},t.prototype.goToDocs=function(){this.to("/console/docs")},t.prototype.goToPm=function(){this.to("/console/pm")},t.prototype.popProjectDialog=function(e){this.toggleProjectDialog({showProjectDialog:!0,project:e})},t.prototype.closeTooltip=function(){this.isShowTooltip=!1},le([w.c],t.prototype,"user",void 0),le([w.c],t.prototype,"projectList",void 0),le([w.c],t.prototype,"showProjectDialog",void 0),le([w.c],t.prototype,"projectDialogTitle",void 0),le([w.c],t.prototype,"headerConfig",void 0),le([w.b],t.prototype,"onlineProjectList",void 0),le([w.a],t.prototype,"toggleProjectDialog",void 0),le([w.a],t.prototype,"togglePopupShow",void 0),t=le([Object(m.a)({components:{User:N,NavMenu:J,ProjectDialog:se,Logo:Y.a}})],t)}(v.a),ue=(o("hy4B"),Object(L.a)(pe,g,[],!1,null,null,null));ue.options.__file="src/components/Header/index.vue";var de=ue.exports,fe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("bk-dialog",{staticClass:"devops-login-dialog",attrs:{"show-footer":!1,width:e.width,theme:"primary"},on:{confirm:e.toApplyPermission},model:{value:e.showLoginDialog,callback:function(t){e.showLoginDialog=t},expression:"showLoginDialog"}},[o("main",{staticClass:"devops-login-iframe-container"},[o("iframe",{attrs:{src:e.iframeSrc,scrolling:"no",border:"0",width:"618",height:"560"}})])])};fe._withStripped=!0;var he=function(){var e=function(t,o){return(e=f.a||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?u()(o):(r.prototype=o.prototype,new r)}}(),ve=function(e,t,o,r){var n,s=arguments.length,a=s<3?t:null===r?r=l()(t,o):r;if("object"===("undefined"==typeof Reflect?"undefined":c()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(a=(s<3?n(a):s>3?n(t,o,a):n(t,o))||a);return s>3&&a&&i()(t,o,a),a},ge=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iframeSrc=LOGIN_SERVICE_URL+"/plain?app_code=1&c_url="+location.origin+"/console/static/login_success.html?is_ajax=1",t.showLoginDialog=!0,t.width=666,t}return he(t,e),t.prototype.beforeDestroy=function(){location.reload()},ve([w.a],t.prototype,"setUserInfo",void 0),t=ve([m.a],t)}(v.a),me=(o("4qm5"),Object(L.a)(ge,fe,[],!1,null,null,null));me.options.__file="src/components/LoginDialog/index.vue";var we=me.exports,be=function(){var e=function(t,o){return(e=f.a||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?u()(o):(r.prototype=o.prototype,new r)}}(),je=function(e,t,o,r){var n,s=arguments.length,a=s<3?t:null===r?r=l()(t,o):r;if("object"===("undefined"==typeof Reflect?"undefined":c()(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,r);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(a=(s<3?n(a):s>3?n(t,o,a):n(t,o))||a);return s>3&&a&&i()(t,o,a),a},ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showLoginDialog=!1,t.showExplorerTips=localStorage.getItem("showExplorerTips"),t}return be(t,e),Object.defineProperty(t.prototype,"loadingOption",{get:function(){return{isLoading:null===this.projectList}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasProject",{get:function(){var e=this;return this.projectList.some((function(t){return t.project_code===e.$route.params.projectId}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOfflineProject",{get:function(){var e=this,t=this.projectList.find((function(t){return t.project_code===e.$route.params.projectId}));return!!t&&t.is_offlined},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isApprovalingProject",{get:function(){var e=this;return!!this.approvalingProjectList.find((function(t){return t.project_code===e.$route.params.projectId}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOnlineProject",{get:function(){var e=this;return!!this.onlineProjectList.find((function(t){return t.project_code===e.$route.params.projectId}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasProjectList",{get:function(){return this.headerConfig.showProjectList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chromeExplorer",{get:function(){var e=window.navigator.userAgent;return e.indexOf("Chrome")>=0&&-1===e.indexOf("QQ")},enumerable:!0,configurable:!0}),t.prototype.routeChange=function(e){this.hasProjectList&&this.saveProjectId()},t.prototype.switchProject=function(){this.iframeUtil.toggleProjectMenu(!0)},t.prototype.closeExplorerTips=function(){localStorage.setItem("showExplorerTips","false"),this.closePreviewTips()},t.prototype.saveProjectId=function(){var e=this.$route;this.projectList.find((function(t){return t.project_code===e.params.projectId&&!t.is_offlined&&(2===t.approval_status||1===t.approval_status)}))&&localStorage.setItem("projectId",e.params.projectId)},t.prototype.created=function(){var e=this;this.hasProjectList&&this.saveProjectId(),V.a.$on("toggle-login-dialog",(function(t){e.showLoginDialog=t})),null===this.showExplorerTips&&(localStorage.setItem("showExplorerTips","true"),this.showExplorerTips=localStorage.getItem("showExplorerTips")),V.a.$on("update-project-id",(function(t){e.$router.replace({params:{projectId:t}})}))},je([w.c],t.prototype,"projectList",void 0),je([w.c],t.prototype,"headerConfig",void 0),je([w.c],t.prototype,"isShowPreviewTips",void 0),je([w.b],t.prototype,"onlineProjectList",void 0),je([w.b],t.prototype,"approvalingProjectList",void 0),je([w.a],t.prototype,"closePreviewTips",void 0),je([Object(m.c)("$route.path")],t.prototype,"routeChange",null),t=je([Object(m.a)({components:{Header:de,LoginDialog:we}})],t)}(v.a),_e=(o("ypze"),Object(L.a)(ye,r,[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("i",{staticClass:"bk-icon icon-info-circle-shape"}),this._v("推荐使用谷歌浏览器以获得更好的体验")])}],!1,null,null,null));_e.options.__file="src/views/Index.vue";t.default=_e.exports},"4qm5":function(e,t,o){"use strict";var r=o("spCz");o.n(r).a},"8/bI":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAgCAYAAABHA7voAAAExklEQVRYhd2Y3WtbdRjHP7+Tc/L+3jRd+pK+mpVOe9EJVelA/waZU3brjaCC7kK8EHYjKugfoExRBGWCIvNGUBFpvKjaCGXSrBvt6LKtW9a0SZq3k+QcL5qMuiZZ3lpcv3DIjzyv3/M75/k95xHzi8vUwtzM5P11OBI9B7wJ9NdUPjhcB96dnQ5dqKegyFJDB3LlNwiMA78+qBCORF8FPvR7XUiSaDvTViEEqGp5ZDOZ/mRhaSUzOx36uh0/VYJzwCvAqb3CcCT6DPCR22EjvpVC1/XOsm4RkiRwOawimc5eWFhaWZ2dDi206kPMLy5/DEwAU8Al4CvgN8APLNot5sFsQcXrshMM9CIOaRM1TWctdod0NofZaCSTy98EnpqdDsX26j3sEZWAVeAukK+sU4ABuKgo8qCma5gUmdGBPhTZgGw4nMuoyEwEAyiyTCWHAeD7haUVays3SgI+AH4AYpX138D7QvCs02YhXygyMRw41PevCoNBIjTcj6qWsJhNSJJ0Evh8YWml6WSq+/sj8HJl/Txwzu91s7mdZijgw2o2dTn15mExGxkb6mM7naHX4wA4DZxv1r5KMAFcAY4Dn3mddpFIpnE7bBzzebqdc8vwuhwEej3cTSTp63EDvLOwtHKmGVtRrYzhSNQOLFjMximjIpPNqTwRGkaRDQeW+OZ2mh63oyldXYcrazGy+QJOu4XN7Z0s8NzczOQfjez2lqBPDZI05XU5SKazjA/1HSi5RHKH9dtx1GKpKX0hYDwYQAhBQS3hsFmswLfhSHSwkZ0EEI5E3wBeCAZ83LqbwO91YbOaKZXL/7nKZa1jYgAb97ZYjW2gFktE12Jkcvl9Og/GLpXLCAFjQ8fI5ApYzEZMijxYIVm3sor5xeVTwC8Dfq+i6Tq341t1EzMYJJ48MdENjuQLKtfWN3j8seA+Wbms8dc/1x7qY/r4MJev3kDTtIvAS3Mzk/s6ERn4wmW3KiMDvRSKJVz22jdjM5kmkdxpmUg9mE1GRgf9DXX6/R6cttr5yLKE02YhNBIgunrzDPAd8M0+PWDU53EihMBsVDAblZoO8wW1qwQBbBZzQ7nDasHnaVyEfG4HskGiVNbGaskb9zlHAEeeoPxwlUcH4Uh0339HdQcngPeghR0UQnBYn4M6lUDt9fdTwGvAi8B20ztoMRvRNI10JtdW1FaQ2snuxjQZ2zH3sttTG4GTTe+gx2nHYbNwZe0mPR4HsnQwbVyxVNrtUV127NbGx0gdhIHXgbeBsy08onBiYoj12/fYSu0c2PhCEhL9fV6Cx3yduLkMnIUWq6hskBgb9LM7zfj/Ye8ksIqjWkXvo2vnYHInS7FYbtlOkQ24HC2NWVpCVwhevxUnnkhhrNPHNoKqFun1Ohnp7+1GKvvQFYLJdAZ/jwdbG1Uvk8uztZ2CAyRYBr2jmj/g93J1fQPaKaxCZ3wo0En4agNSrCWTgfVsvjDaSQCfx0mP20FZa/2L3yBJiA6myflCsRp3tZZcAr68s5nsuEMRQrQ14O2EnK7rrMbuAMSBn2rmNb+4bAV+FkI83dfjwmYxdRT0sFAqlYlvpcjkCipwem5m8lItPaHrOpWhzVvsnv7DPBqfUUngd+D83Mzkn/WU/gX1Y5bhdbVP8gAAAABJRU5ErkJggg=="},AngI:function(e,t,o){"use strict";var r=o("Eccx");o.n(r).a},Eccx:function(e,t,o){},LpnX:function(e,t,o){"use strict";var r=o("wYXi");o.n(r).a},RHS3:function(e,t,o){},TfrH:function(e,t,o){},Tp3F:function(e,t,o){"use strict";var r=o("fWSY");o.n(r).a},fWSY:function(e,t,o){},hy4B:function(e,t,o){"use strict";var r=o("RHS3");o.n(r).a},spCz:function(e,t,o){},wYXi:function(e,t,o){},ypze:function(e,t,o){"use strict";var r=o("TfrH");o.n(r).a}}]);