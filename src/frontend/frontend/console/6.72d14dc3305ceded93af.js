(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{BUs7:function(e,t,o){"use strict";var r=o("t+N0");o.n(r).a},"t+N0":function(e,t,o){},"t+zn":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"devops-iframe-content",class:{showTopPrompt:"true"===e.showExplorerTips&&e.isShowPreviewTips&&!e.chromeExplorer}},[e.isAnyPopupShow?o("div",{staticClass:"iframe-over-layout"}):e._e(),e._v(" "),o("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.isLoading},expression:"{ isLoading }"}],style:{height:"100%"}},[e.src?o("iframe",{ref:"iframeEle",attrs:{id:"iframe-box",allowfullscreen:"",src:e.src},on:{load:e.onLoad}}):e._e()])])};r._withStripped=!0;var i,n=o("PSh9"),s=o.n(n),a=o("yO+b"),c=o.n(a),p=o("wv3L"),f=o.n(p),l=o("rIqr"),u=o.n(l),h=o("7oj+"),d=o.n(h),m=o("rIjD"),g=o.n(m),v=o("i7/w"),y=o.n(v),w=o("la05"),j=o("Hyou"),b=o("bdvc"),$=o("85Lh"),L=(i=function(e,t){return(i=g.a||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?d()(t):(o.prototype=t.prototype,new o)}),P=function(e,t,o,r){var i,n=arguments.length,s=n<3?t:null===r?r=u()(t,o):r;if("object"===("undefined"==typeof Reflect?"undefined":f()(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(n<3?i(s):n>3?i(t,o,s):i(t,o))||s);return n>3&&s&&c()(t,o,s),s};w.a.registerHooks(["beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate"]);var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isLoading=!0,t.initPath="",t.src="",t.leaving=!1,t.showExplorerTips=localStorage.getItem("showExplorerTips"),t}return L(t,e),t.prototype.created=function(){this.init(),j.a.$on("goHome",this.backHome)},t.prototype.beforeRouteLeave=function(e,t,o){!this.leaving&&location.href.indexOf("pipeline")>-1&&(location.href.indexOf("edit")>-1||location.href.indexOf("setting")>-1)?this.leaveConfirm(e,t,o):o()},t.prototype.leaveConfirm=function(e,t,o){var r=this;this.leaving=!0,this.$bkInfo({title:"确认要离开",subTitle:"离开后，新编辑的数据将丢失",confirmFn:function(){r.src=null,r.$nextTick((function(){o(!0)}))},cancelFn:function(){o(!1),r.leaving=!1}})},t.prototype.beforeDestroy=function(){this.leaving=!1},Object.defineProperty(t.prototype,"needLoading",{get:function(){return"codecc"===this.$route.name||"job"===this.$route.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chromeExplorer",{get:function(){var e=window.navigator.userAgent;return e.indexOf("Chrome")>=0&&-1===e.indexOf("QQ")},enumerable:!0,configurable:!0}),t.prototype.backHome=function(){this.needLoading&&(this.isLoading=!0),this.$refs.iframeEle&&this.iframeUtil.goHome(this.$refs.iframeEle.contentWindow)},t.prototype.init=function(){var e=this.headerConfig.showProjectList,t=this.$route.meta.projectIdType,o=Object(b.g)(this.$route.query),r=this.$route.path.replace("/console",""),i=this.$route.hash;if(e){var n=/^\/?\w+\/(([\w-]+)\/?)(\S*)\/?$/,a=r.match(n),c=this.$route.params.projectId,p=a?a[3]:"";if("path"===t)this.src=Object(b.j)(window.currentPage.iframe_url,c,p)+(o?"?"+o:"")+i;else{var f=s()(this.$route.query,{projectId:c});this.src=Object(b.j)(window.currentPage.iframe_url,p)+"?"+Object(b.g)(f)+i,console.log(window.currentPage.iframe_url,p)}}else{n=/^\/?\w+\/(\S*)\/?$/,p=r.match(n)?r.replace(n,"$1"):"";var l=s()({project_code:localStorage.getItem("projectId")},this.$route.query);console.log(window.currentPage.iframe_url,p),this.src=Object(b.j)(window.currentPage.iframe_url,p)+"?"+Object(b.g)(l)+i}},t.prototype.onLoad=function(){if(this.isLoading=!1,this.$refs.iframeEle){var e=this.$refs.iframeEle.contentWindow;this.iframeUtil.syncProjectList(e,this.projectList),this.iframeUtil.syncUserInfo(e,this.user),this.$route.params.projectId&&this.iframeUtil.syncProjectId(e,this.$route.params.projectId)}},t.prototype.isSameModule=function(e,t){return Object(b.a)(e)===Object(b.a)(t)},t.prototype.routeChange=function(e,t){var o=e.path,r=e.params,i=t.path,n=t.params;this.isSameModule(o,i)?r.projectId!==n.projectId&&(this.needLoading&&(this.isLoading=!0),this.$refs.iframeEle&&r.projectId&&this.iframeUtil.syncProjectId(this.$refs.iframeEle.contentWindow,r.projectId)):(this.isLoading=!0,this.init())},t.prototype.handleProjectListChange=function(e,t){if(this.$refs.iframeEle){var o=this.$refs.iframeEle.contentWindow;this.iframeUtil.syncProjectList(o,e)}},t.prototype.handleUserChange=function(e){if(this.$refs.iframeEle){var t=this.$refs.iframeEle.contentWindow;this.iframeUtil.syncUserInfo(t,e)}},P([$.c],t.prototype,"projectList",void 0),P([$.c],t.prototype,"isAnyPopupShow",void 0),P([$.c],t.prototype,"isShowPreviewTips",void 0),P([$.c],t.prototype,"user",void 0),P([$.c],t.prototype,"headerConfig",void 0),P([Object(w.c)("$route")],t.prototype,"routeChange",null),P([Object(w.c)("projectList")],t.prototype,"handleProjectListChange",null),P([Object(w.c)("user")],t.prototype,"handleUserChange",null),t=P([w.a],t)}(y.a),I=(o("BUs7"),o("psIG")),O=Object(I.a)(_,r,[],!1,null,null,null);O.options.__file="src/views/IFrame.vue";t.default=O.exports}}]);