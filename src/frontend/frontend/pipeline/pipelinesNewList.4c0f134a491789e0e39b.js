(window.webpackJsonp=window.webpackJsonp||[]).push([["pipelinesNewList"],{"+53F":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[e.hasFilter?i("empty-tips",{attrs:{title:e.filterNoResultTipsConfig.title,desc:e.filterNoResultTipsConfig.desc,btns:e.filterNoResultTipsConfig.btns}}):"collect"===e.pageType?i("empty-tips",{attrs:{"img-type":e.collectEmptyTipsConfig.imgType,title:e.collectEmptyTipsConfig.title,desc:e.collectEmptyTipsConfig.desc,btns:e.collectEmptyTipsConfig.btns}}):"myPipeline"===e.pageType?i("empty-tips",{attrs:{title:e.mypipelineEmptyTipsConfig.title,desc:e.mypipelineEmptyTipsConfig.desc,btns:e.mypipelineEmptyTipsConfig.btns}}):"allPipeline"===e.pageType?i("empty-tips",{attrs:{title:e.allPipelineEmptyTipsConfig.title,desc:e.allPipelineEmptyTipsConfig.desc,btns:e.allPipelineEmptyTipsConfig.btns}}):i("empty-tips",{attrs:{title:e.otherViewsEmptyTipsConfig.title,desc:e.otherViewsEmptyTipsConfig.desc,btns:e.otherViewsEmptyTipsConfig.btns}})],1)},a=[];n._withStripped=!0,i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}))},"+SeQ":function(e,t,i){"use strict";i.r(t);var n=i("CPZF"),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t.default=a.a},"+T+w":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(i("/9Wh")),a=y(i("TcPG")),r=y(i("06Hw")),s=y(i("YYXh")),o=y(i("tZmG")),l=y(i("Kz1y")),c=y(i("0t4y")),u=i("WIBD"),p=y(i("nolR")),d=i("2K1W"),f=y(i("k6n0")),m=y(i("Sitx")),v=y(i("q0mH")),h=y(i("Cmsp")),g=y(i("baW9")),b=i("ygAv");function y(e){return e&&e.__esModule?e:{default:e}}t.default={components:{"task-card":f.default,"task-table":m.default,"list-create-header":h.default,"list-empty":v.default,PipelineTemplatePopup:p.default,pipelineFilter:g.default},data:function(){var e=localStorage.getItem("pipelineLayout")||"card",t=localStorage.getItem("pipelineSortType")||"CREATE_TIME";return{hasTemplatePermission:!0,templatePopupShow:!1,loading:{isLoading:!1,title:""},showContent:!1,responsiveConfig:{wrapper:null,width:0,cardRealWidth:0,cardMaxWidth:0,standardMarginRight:25,allowCalc:!0},copyDialogConfig:{isShow:!1,title:"复制流水线",closeIcon:!1,quickClose:!1,padding:"0 20px",pipelineId:""},copyConfig:{newPipelineName:"",newPipelineDesc:"",nameHasError:!1,descHasError:!1,loading:!1,newPipelineGroup:"",config:{data:this.groupList,onChange:this.pipelineGroupChange}},saveAsTemp:{isShow:!1,title:"另存为模板",closeIcon:!1,quickClose:!1,padding:"0 20px",pipelineId:"",templateName:"",isCopySetting:!0},copySettings:[{label:"是",value:!0},{label:"否",value:!1}],tipsSetting:{content:"选“是”则将流水线设置应用于复制后的模版",placements:["right"]},layout:e,sortType:t,slideShow:!1,isDisabled:!1,filter:{},currentFilter:{}}},computed:(0,l.default)({},(0,u.mapGetters)({pipelineList:"pipelines/getAllPipelineList",statusMap:"pipelines/getStatusMap",statusMapCN:"pipelines/getStatusMapCN",tagGroupList:"pipelines/getTagGroupList"}),(0,u.mapState)("pipelines",["currentViewId","pageLoading","hasCreatePermission"]),{projectId:function(){return this.$route.params.projectId},pageType:function(){return this.$route.params.type},hasFilter:function(){return this.filter&&(0,o.default)(this.filter).length&&(""!==this.filter.filterByCreator||""!==this.filter.filterByPipelineName||""!==this.filter.filterByLabels)}}),watch:{"$route.params.type":function(e){e&&(this.filter={},this.currentFilter={},this.initPage(),this.showContent=!0)},projectId:{handler:function(e){this.initWebSocket(e)},immediate:!0}},created:function(){var e=this;d.bus.$off("title-click"),d.bus.$on("title-click",(function(t){e.titleClickHandler(t)})),d.bus.$off("error-noticed"),d.bus.$on("error-noticed",(function(t){e.errorNoticed(t)})),d.bus.$off("triggers-exec"),d.bus.$on("triggers-exec",(function(t,i){e.triggersExec(t,i)})),d.bus.$off("terminate-pipeline"),d.bus.$on("terminate-pipeline",(function(t){e.terminatePipeline(t)})),d.bus.$off("resume-pipeline"),d.bus.$on("resume-pipeline",(function(t){e.resumePipeline(t)})),d.bus.$off("set-permission"),d.bus.$on("set-permission",(function(t,i,n){e.setPermissionConfig(t,i,n)}))},mounted:function(){this.initPage()},beforeDestroy:function(){c.default.disconnect()},methods:{changeLayoutType:function(e){var t=this;return(0,s.default)(r.default.mark((function i(){return r.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:localStorage.setItem("pipelineLayout",e),t.layout=e;case 2:case"end":return i.stop()}}),i,t)})))()},changeOrderType:function(e){var t=this;return(0,s.default)(r.default.mark((function i(){return r.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return localStorage.setItem("pipelineSortType",e),t.sortType=e,i.next=4,t.requestPipelineList(e);case 4:case"end":return i.stop()}}),i,t)})))()},filterCommit:function(e,t){var i=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,s.default)(r.default.mark((function a(){return r.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i.filter=e,i.currentFilter=t,!n){a.next=5;break}return a.next=5,i.requestPipelineList(i.sortType);case 5:i.isDisabled=!1;case 6:case"end":return a.stop()}}),a,i)})))()},toggleTemplatePopup:function(e){this.hasCreatePermission?this.templatePopupShow=e:this.toggleCreatePermission()},toggleCreatePermission:function(){this.setPermissionConfig("流水线","创建","")},localConvertMStoString:function(e){return(0,b.convertMStoString)(e)},showSlide:function(e){this.slideShow=e},togglePageLoading:function(e){this.$store.commit("pipelines/showPageLoading",e)},calcLatestStartBuildTime:function(e){if(!e.latestBuildStartTime)return"--";try{var t=this.localConvertMStoString(e.currentTimestamp-e.latestBuildStartTime).match(/^[0-9]{1,}([\u4e00-\u9fa5]){1,}/)[0];return t.indexOf("分")>0&&(t+="钟"),t+"前"}catch(e){return"---"}},calcPercentage:function(e){var t=e.latestBuildStartTime,i=e.latestBuildEstimatedExecutionSeconds,n=+new Date;if(!t||!i)return"0%";var a=Math.ceil((n-t)/(100*i*1e3));return"error"===this.statusMap[e.latestBuildStatus]?"100%":a>99?"99%":a<1?"1%":a+"%"},init:function(){var e=this;return(0,s.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.requestTemplatePermission();case 2:return t.next=4,e.requestHasCreatePermission();case 4:return t.next=6,e.requestPipelineList(e.sortType);case 6:e.requestGrouptLists();case 7:case"end":return t.stop()}}),t,e)})))()},initPage:function(){var e=this;return(0,s.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.time("init"),e.togglePageLoading(!0),t.next=4,e.init();case 4:e.showContent=!0,console.timeEnd("init"),e.togglePageLoading(!1);case 7:case"end":return t.stop()}}),t,e)})))()},initWebSocket:function(e){var t=this,i="/topic/pipelineStatus/"+e;c.default.connect(e,i,{success:function(e){var i=JSON.parse(e.body);t.updatePipelineStatus(i)},error:function(e){return t.$showTips({message:e,theme:"error"})}})},requestTemplatePermission:function(){var e=this;this.$store.dispatch("pipelines/requestTemplatePermission",this.projectId).then((function(t){e.hasTemplatePermission=t}))},requestPipelineList:function(e){var t=this;return(0,s.default)(r.default.mark((function i(){var n,a,s,o,l,c;return r.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.$store,a=t.filter,s=void 0,i.prev=2,i.next=5,n.dispatch("pipelines/requestAllPipelinesListByFilter",{projectId:t.projectId,page:1,pageSize:-1,sortType:e||"CREATE_TIME",filterByLabels:a.filterByLabels,filterByPipelineName:a.filterByPipelineName,filterByCreator:a.filterByCreator,viewId:t.currentViewId});case 5:s=i.sent,o=void 0,s.count?(l=s.records,c={},o=l.map((function(e,i){return c={name:e.pipelineName,desc:"string"==typeof e.pipelineDesc&&e.pipelineDesc.trim(),isRunning:!1,status:"",content:[{key:"最新构建号",value:e.latestBuildNum?"#"+e.latestBuildNum:"--"},{key:"最新执行时间",value:""}],runningInfo:{time:0,percentage:t.calcPercentage(e),log:"",buildCount:e.runningBuildCount||0},footer:[{upperText:e.taskCount,lowerText:"插件总数",handler:t.goEditPipeline},{upperText:e.buildCount,lowerText:"已执行次数",handler:t.goHistory}],marginRight:0,width:"352px",customBtns:[],buttonAllow:{confirmFailure:!0,terminatePipeline:!0,exec:!0,continuePipeline:!0},pipelineId:e.pipelineId,buildId:e.latestBuildId||0,extMenu:[],isInstanceTemplate:e.instanceFromTemplate},e.feConfig=c,e}))):o=[],n.commit("pipelines/updateAllPipelineList",o),t.updatePipelineStatus(o,!0),i.next=16;break;case 12:i.prev=12,i.t0=i.catch(2),n.commit("pipelines/updateAllPipelineList",[]),t.$showTips({message:i.t0.message||i.t0,theme:"error"});case 16:case"end":return i.stop()}}),i,t,[[2,12]])})))()},requestGrouptLists:function(){var e=this;return(0,s.default)(r.default.mark((function t(){var i,n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.$store,n=void 0,t.prev=2,t.next=5,i.dispatch("pipelines/requestGetGroupLists",{projectId:e.projectId});case 5:n=t.sent,i.commit("pipelines/updateGroupLists",n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),e.$showTips({message:t.t0.message||t.t0,theme:"error"});case 12:case"end":return t.stop()}}),t,e,[[2,9]])})))()},requestHasCreatePermission:function(){var e=this;return(0,s.default)(r.default.mark((function t(){var i,n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.$store,n=void 0,t.prev=2,t.next=5,i.dispatch("pipelines/requestHasCreatePermission",{projectId:e.projectId});case 5:n=t.sent,i.commit("pipelines/updateCreatePermission",n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),e.$showTips({message:t.t0.message||t.t0,theme:"error"});case 12:case"end":return t.stop()}}),t,e,[[2,9]])})))()},togglePipelineCollect:function(e){var t=this;return(0,s.default)(r.default.mark((function i(){var n,a;return r.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t.pipelineList.find((function(t){return t.pipelineId===e}))){i.next=3;break}return i.abrupt("return");case 3:return a=!n.hasCollect,i.prev=4,i.next=7,t.$store.dispatch("pipelines/requestToggleCollect",{projectId:t.projectId,pipelineId:e,isCollect:a});case 7:n.hasCollect=a,n.feConfig.extMenu[1].text=a?"取消收藏":"收藏","collect"!==t.currentViewId||a||t.$store.commit("pipelines/removePipelineById",e),t.$showTips({message:a?"收藏成功":"取消收藏成功",theme:"success"}),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(4),t.$showTips({message:i.t0.message||i.t0,theme:"error"});case 16:case"end":return i.stop()}}),i,t,[[4,13]])})))()},goEditPipeline:function(e){this.$router.push({name:"pipelinesEdit",params:{projectId:this.projectId,pipelineId:e}})},goHistory:function(e){this.$router.push({name:"pipelinesHistory",params:{projectId:this.projectId,pipelineId:e}})},requestPipelineStatus:function(e){var t=this;return(0,s.default)(r.default.mark((function i(){var n,a,s,o,l;return r.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t.$store,a=t.pipelineList,s=t.projectId,0!==(o=e?a.map((function(e,t){return e.pipelineId})):a.filter((function(e,t){if(e.feConfig&&"running"===e.feConfig.status)return e})).map((function(e,t){return e.pipelineId}))).length){i.next=4;break}return i.abrupt("return",!1);case 4:return i.prev=4,i.next=7,n.dispatch("pipelines/requestPipelineStatus",{projectId:s,pipelineId:o});case 7:l=i.sent,t.updatePipelineStatus(l),i.next=14;break;case 11:i.prev=11,i.t0=i.catch(4),t.$showTips({message:i.t0.message||i.t0,theme:"error"});case 14:return i.abrupt("return",!0);case 15:case"end":return i.stop()}}),i,t,[[4,11]])})))()},updatePipelineStatus:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.$store,a=this.pipelineList,r=this.statusMap,s=JSON.parse(localStorage.getItem("pipelineKnowError"));a.map((function(a,o){var l=i?a:e[a.pipelineId];if(l){var c=[],u=!1,p=r[l.latestBuildStatus],d=void 0;switch(d="error"===p?s&&s[a.projectId+"_"+a.pipelineId+"_"+a.latestBuildId]?"known_error":"error":p||"not_built"){case"known_error":case"success":u=!1;break;case"running":case"warning":case"error":u=!0;break;default:u=!1}switch(n.commit("pipelines/updatePipelineValueById",{pipelineId:a.pipelineId,obj:{isRunning:u}}),d){case"error":c.splice(0,c.length,{icon:"check-1",text:"我知道了",handler:"error-noticed"});break;case"running":c.splice(0,c.length,{text:"终止",handler:"terminate-pipeline"});break;case"warning":c.splice.apply(c,[0,c.length].concat([{text:"继续",handler:"resume-pipeline"},{text:"终止",handler:"terminate-pipeline"}]))}var f={status:d,content:{index:[0,1],key:["value","value"],value:[l.latestBuildNum?"#"+l.latestBuildNum:"--",l.latestBuildStartTime?t.calcLatestStartBuildTime(l):"未执行过"]},footer:{index:[0,1],key:["upperText","upperText"],value:[l.taskCount,l.buildCount]},runningInfo:{key:["time","percentage","log","buildCount"],value:[(0,b.convertMStoStringByRule)("error"===p?l.latestBuildEndTime-l.latestBuildStartTime:l.currentTimestamp-l.latestBuildStartTime),t.calcPercentage(l),l.latestBuildTaskName,l.runningBuildCount||0]},customBtns:c,buildId:l.latestBuildId||0},m=t.pipelineList.find((function(e){return e.pipelineId===a.pipelineId}));a.feConfig.extMenu.length||(f.extMenu=[{text:"编辑",handler:t.goEditPipeline},{text:m.hasCollect?"取消收藏":"收藏",handler:t.togglePipelineCollect},{text:"复制为",handler:t.copyPipeline},{text:"另存为模板",disable:!t.hasTemplatePermission,handler:t.copyAsTemplate},{text:"删除",handler:t.deletePipeline}]),n.commit("pipelines/updatePipelineValueById",{pipelineId:a.pipelineId,obj:f})}}))},triggersExec:function(e,t){var i=this;return(0,s.default)(r.default.mark((function n(){var a,s,o,l,c,u,p,d,f;return r.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=i.$store,s=i.projectId,o=i.pipelineList,l=o.find((function(e){return e.pipelineId===t})),c=l.feConfig,u="",p="",n.prev=5,n.next=8,a.dispatch("pipelines/requestExecPipeline",{projectId:s,pipelineId:t,params:e});case 8:d=n.sent,u="启动构建成功",p="success",l.latestBuildId=d.id,(f=c.runningInfo).percentage="1%",f.time="0秒",f.log="",f.buildCount=1,c.status="running",c.isRunning=!0,n.next=32;break;case 21:if(n.prev=21,n.t0=n.catch(5),403!==n.t0.code){n.next=28;break}return i.setPermissionConfig("流水线："+l.pipelineName,"执行",l.pipelineId),n.abrupt("return");case 28:c.status="known_error",c.isRunning=!1,u=n.t0.message||n.t0,p="error";case 32:return n.prev=32,u&&i.$showTips({message:u,theme:p}),n.finish(32);case 35:case"end":return n.stop()}}),n,i,[[5,21,32,35]])})))()},errorNoticed:function(e){var t=this;return(0,s.default)(r.default.mark((function i(){var s,o,l;return r.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:s=JSON.parse(localStorage.getItem("pipelineKnowError")),o=t.pipelineList.find((function(t){return t.pipelineId===e})),l=o.projectId+"_"+o.pipelineId+"_"+o.latestBuildId,s?s[l]=1:s=(0,a.default)({},l,1),localStorage.setItem("pipelineKnowError",(0,n.default)(s)),o.feConfig&&(o.feConfig.status="known_error",o.feConfig.isRunning=!1);case 6:case"end":return i.stop()}}),i,t)})))()},terminatePipeline:function(e){var t=this;return(0,s.default)(r.default.mark((function i(){var n,a,s,o;return r.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t.$store,a=t.projectId,s=t.pipelineList.find((function(t){return t.pipelineId===e})),(o=s.feConfig).buttonAllow.terminatePipeline){i.next=5;break}return i.abrupt("return");case 5:return o.buttonAllow.terminatePipeline=!1,i.prev=6,i.next=9,n.dispatch("pipelines/requestTerminatePipeline",{projectId:a,pipelineId:s.pipelineId,buildId:o.buildId||s.latestBuildId});case 9:n.commit("pipelines/updatePipelineValueById",{pipelineId:e,obj:{isRunning:!1,status:"known_error"}}),i.next=15;break;case 12:i.prev=12,i.t0=i.catch(6),403===i.t0.code?t.setPermissionConfig("流水线："+s.pipelineName,"执行",s.pipelineId):t.$showTips({message:i.t0.message||i.t0,theme:"error"});case 15:return i.prev=15,o.buttonAllow.terminatePipeline=!0,i.finish(15);case 18:case"end":return i.stop()}}),i,t,[[6,12,15,18]])})))()},resumePipeline:function(e){var t=this;return(0,s.default)(r.default.mark((function i(){var n,a,s,o;return r.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t.$store,a=t.projectId,s=t.pipelineList.find((function(t){return t.pipelineId===e})),(o=s.feConfig).buttonAllow.continuePipeline){i.next=5;break}return i.abrupt("return");case 5:return o.buttonAllow.continuePipeline=!1,i.prev=6,i.next=9,n.dispatch("pipeline/requestResumePipeline",{projectId:a,pipelineId:s.id});case 9:n.commit("pipelines/updatePipelineValueById",{pipelineId:e,obj:{isRunning:!0,status:"running"}}),i.next=15;break;case 12:i.prev=12,i.t0=i.catch(6),t.$showTips({message:i.t0.data?i.t0.data.message:i.t0,theme:"error"});case 15:return i.prev=15,o.buttonAllow.continuePipeline=!0,i.finish(15);case 18:case"end":return i.stop()}}),i,t,[[6,12,15,18]])})))()},titleClickHandler:function(e){this.$router.push({name:"pipelinesHistory",params:{projectId:this.projectId,pipelineId:e}})},copyAsTemplate:function(e){var t=this.pipelineList.find((function(t){return t.pipelineId===e}));this.saveAsTemp.templateName=t.pipelineName+"_template",this.saveAsTemp.isShow=!0,this.saveAsTemp.pipelineId=e},saveAsConfirmHandler:function(){var e=this;return(0,s.default)(r.default.mark((function t(){var i,n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validate();case 2:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:if((e.saveAsTemp.templateName||"").trim()){t.next=9;break}return e.saveAsTemp.nameHasError=!0,t.abrupt("return");case 9:i=e.projectId,n={pipelineId:e.saveAsTemp.pipelineId,templateName:e.saveAsTemp.templateName,isCopySetting:e.saveAsTemp.isCopySetting},e.$store.dispatch("pipelines/saveAsTemplate",{projectId:i,postData:n}).then((function(t){var i=t.id;e.saveAsCancelHandler(),e.$showTips({message:"另存为模板成功",theme:"success"}),e.$router.push({name:"templateEdit",params:{templateId:i}})})).catch((function(t){var i=t.message||"另存为模板失败";e.$showTips({message:i,theme:"error"})}));case 12:case"end":return t.stop()}}),t,e)})))()},saveAsCancelHandler:function(){this.saveAsTemp.isShow=!1,this.saveAsTemp.templateName="",this.saveAsTemp.pipelineId="",this.saveAsTemp.nameHasError=!1},copyPipeline:function(e){var t=this.copyDialogConfig,i=this.pipelineList.find((function(t){return t.pipelineId===e}));this.copyConfig.newPipelineName=i.pipelineName+"_copy",t.hasHeader=!1,t.isShow=!0,t.pipelineId=e},deletePipeline:function(e){var t=this,i=this.$store,n=this.pipelineList.find((function(t){return t.pipelineId===e})),a="删除"+n.pipelineName+"流水线";(0,b.navConfirm)({title:"确认",content:a}).then((function(){var a=void 0,o=void 0;t.loading.title="正在删除流水线，请稍候",t.togglePageLoading(!0),setTimeout((0,s.default)(r.default.mark((function s(){return r.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,i.dispatch("pipelines/deletePipeline",{projectId:t.projectId,pipelineId:n.pipelineId});case 3:i.commit("pipelines/removePipelineById",e),a="删除流水线成功",o="success",r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),403===r.t0.code?t.setPermissionConfig("流水线："+n.pipelineName,"删除",n.pipelineId):(a=r.t0.message||r.t0,o="error");case 11:return r.prev=11,a&&t.$showTips({message:a,theme:o}),t.togglePageLoading(!1),r.finish(11);case 15:case"end":return r.stop()}}),s,t,[[0,8,11,15]])}))),1e3)})).catch((function(){}))},copyConfirmHandler:function(){var e=this;return(0,s.default)(r.default.mark((function t(){var i,a,s,o,l,c,u,p,d,f,m,v,h,g,b;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.copyConfig,a=i.newPipelineName,s=i.newPipelineDesc,o=e.copyConfig,l=e.projectId,c=e.$store,u="",p="",a){t.next=6;break}return o.nameHasError=!0,t.abrupt("return",!1);case 6:return d=e.pipelineList.find((function(t){return t.pipelineId===e.copyDialogConfig.pipelineId})),t.prev=7,o.loading=!0,t.next=11,c.dispatch("pipelines/copyPipeline",{projectId:l,pipelineId:e.copyDialogConfig.pipelineId,args:{name:a,desc:s,group:d.group,hasCollect:!1}});case 11:v=t.sent,u="复制成功",p="success",setTimeout((function(){e.copyDialogConfig.isShow=!1}),500),h=JSON.parse((0,n.default)(d)),g=[{text:"编辑",handler:e.goEditPipeline},{text:"收藏",handler:e.togglePipelineCollect},{text:"复制为",handler:e.copyPipeline},{text:"另存为模板",handler:e.copyAsTemplate},{text:"删除",handler:e.deletePipeline}],b=[{upperText:h.feConfig.footer[0].upperText,lowerText:"插件总数",handler:e.goEditPipeline},{upperText:"0",lowerText:"已执行次数",handler:e.goHistory}],h.pipelineId=v.id,h.hasCollect=!1,h.pipelineName=a,h.pipelineDesc=s,h.latestBuildStatus="",h.feConfig.name=a,h.feConfig.desc=s,h.feConfig.pipelineId=v.id,h.feConfig.content[1].value="未执行过",h.feConfig.status="not_built",(f=h.feConfig.extMenu).splice.apply(f,[0,h.feConfig.extMenu.length].concat(g)),(m=h.feConfig.footer).splice.apply(m,[0,h.feConfig.footer.length].concat(b)),h.feConfig.isInstanceTemplate=!1,c.commit("pipelines/addPipeline",{item:h}),t.next=37;break;case 34:t.prev=34,t.t0=t.catch(7),403===t.t0.code?(e.copyDialogConfig.isShow=!1,e.setPermissionConfig("流水线："+d.pipelineName,"编辑",d.pipelineId)):(u=t.t0.message||t.t0,p="error");case 37:return t.prev=37,setTimeout((function(){o.loading=!1,u&&e.$showTips({message:u,theme:p})}),300),t.finish(37);case 40:case"end":return t.stop()}}),t,e,[[7,34,37,40]])})))()},copyCancelHandler:function(){var e=this.copyConfig;e.newPipelineName="",e.newPipelineDesc="",e.nameHasError=!1,e.descHasError=!1},setPermissionConfig:function(e,t,i){var n="role_manager";switch(t){case"创建":n="role_creator";break;case"执行":n="role_executor";break;case"查看":n="role_viewer"}this.$showAskPermissionDialog({noPermissionList:[{resource:e,option:t}],applyPermissionUrl:PERM_URL_PIRFIX+"/backend/api/perm/apply/subsystem/?client_id=pipeline&project_code="+this.projectId+"&service_code=pipeline&"+n+"=pipeline:"+i})}}}},"+zfC":function(e,t,i){"use strict";i.r(t);var n=i("mee8"),a=i("JdUT");for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);i("ikr4");var s=i("psIG"),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/devops/progressBar/index.vue",t.default=o.exports},"/GLl":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"devops-empty-tips"},["noCollect"!==e.imgType?n("img",{staticClass:"no-data-pic",attrs:{src:e.noDataSrc,alt:""}}):e._e(),e._v(" "),"noCollect"===e.imgType?n("img",{staticClass:"no-collect-pic",attrs:{src:i("qeuZ"),alt:""}}):e._e(),e._v(" "),n("p",{staticClass:"title"},[e._v(e._s(e.title))]),e._v(" "),n("p",{staticClass:"desc"},[e._v(e._s(e.desc))]),e._v(" "),n("p",{staticClass:"btns-row"},[e._t("btns",[e.btns.length?e._l(e.btns,(function(t,i){return n("bk-button",{key:i,attrs:{disabled:e.btnDisabled,theme:t.theme,size:t.size},on:{click:t.handler}},[e._v("\n                    "+e._s(t.text)+"\n                ")])})):e._e()])],2)])},a=[];n._withStripped=!0,i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}))},"0JCp":function(e,t,i){},"0TkH":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.config.extMenu.length?i("div",{staticClass:"footer-ext-item",class:{active:e.isShowExtMenu},on:{mouseenter:function(t){return e.showExtMenu()},mouseleave:function(t){return e.hideExtMenu()}}},[e._m(0),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowExtMenu,expression:"isShowExtMenu"}],staticClass:"footer-ext-menu"},[i("ul",e._l(e.config.extMenu,(function(t,n){return i("li",{key:n,class:[{"is-disable":t.disable},"ext-menu-item"],on:{click:function(i){return i.stopPropagation(),e.clickMenuItem(t)}}},[e._v(e._s(t.text))])})),0)])]):e._e()},a=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"footer-ext-dots"},[t("div",{staticClass:"ext-dot"}),this._v(" "),t("div",{staticClass:"ext-dot"}),this._v(" "),t("div",{staticClass:"ext-dot"})])}];n._withStripped=!0,i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}))},"0t4y":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(i("OBCi")),a=o(i("Zv/C")),r=o(i("2lBV")),s=o(i("MPpm"));function o(e){return e&&e.__esModule?e:{default:e}}var l=i("sMCd").Stomp,c=function(){function e(){(0,a.default)(this,e),this.errTime=1,this.stompClient={}}return(0,r.default)(e,[{key:"connect",value:function(){this.disconnect().then(this.build.apply(this,arguments))}},{key:"disconnect",value:function(){var e=this;return new n.default((function(t){e.stompClient.connected?e.stompClient.disconnect(t):t()}))}},{key:"build",value:function(e,t,i){var n=this,a=i.success,r=i.error,o=new s.default(WS_URL_PREFIX+"/process/websocket/user/pipelines/pipelineStatus?projectId="+e);this.stompClient=l.over(o),this.stompClient.debug=null,this.stompClient.connect({},(function(){n.stompClient.subscribe(t,(function(e){n.errTime=1,a(e)}))}),(function(i){n.errTime<=8?(n.errTime++,setTimeout((function(){return n.connect(e,t,{success:a,error:r})}),1e4)):r(i.message||"websocket异常")}))}}]),e}();t.default=new c},"1GL7":function(e,t,i){},"1rXd":function(e,t,i){"use strict";i.r(t);var n=i("W7sL"),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t.default=a.a},"3tY9":function(e,t,i){"use strict";i.r(t);var n=i("9H/W"),a=i("qJYy");for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);var s=i("psIG"),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/pipelineParamsForm.vue",t.default=o.exports},"4A9V":function(e,t,i){"use strict";var n=i("UvJJ");i.n(n).a},"6N0z":function(e,t,i){"use strict";i.r(t);var n=i("0TkH"),a=i("UAyc");for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);i("4A9V");var s=i("psIG"),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/pipelineList/extMenu/index.vue",t.default=o.exports},"7U/S":function(e,t,i){"use strict";i.r(t);var n=i("d2qh"),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t.default=a.a},"8dO6":function(e,t,i){},"9H/W":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{"text-align":"left"}},[i("form",{ref:"previewParamsForm",staticClass:"bk-form",attrs:{target:"previewHiddenIframe",onsubmit:"return false;"}},e._l(e.paramList,(function(t){return i("form-field",{key:t.id,attrs:{required:t.required,"is-error":e.errors.has(t.id),"error-msg":e.errors.first(t.id),label:t.id}},[i(t.component,e._b({directives:[{name:"validate",rawName:"v-validate",value:{required:t.required},expression:"{ required: param.required }"}],tag:"component",attrs:{"handle-change":e.handleParamUpdate,disabled:e.disabled}},"component",t,!1)),e._v(" "),e.errors.has(t.id)?e._e():i("span",{staticClass:"bk-form-help",staticStyle:{color:"#63656E",position:"static"},attrs:{title:t.desc}},[e._v(e._s(t.desc))])],1)})),1),e._v(" "),i("iframe",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{name:"previewHiddenIframe"}})])},a=[];n._withStripped=!0,i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}))},"9ycb":function(e,t,i){},AcLf:function(e,t,i){"use strict";var n=i("XyUZ");i.n(n).a},BEa8:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=i("Kz1y"),r=(n=a)&&n.__esModule?n:{default:n};t.default={props:{createText:{type:String,default:""},buttonDisabled:{type:Boolean,default:!1},buttonType:{type:String,default:"button"},dropdownMenuConfig:{type:Object,default:function(){return{showHandler:function(){},hideHandler:function(){},align:"center",list:[]}}}},data:function(){return{localDropdownMenuConfig:{showHandler:function(){},hideHandler:function(){},align:"center",list:[]}}},mounted:function(){this.localDropdownMenuConfig=(0,r.default)(this.localDropdownMenuConfig,this.dropdownMenuConfig)},methods:{toggleTemplatePopup:function(e){this.$emit("createPipeline")}}}},CPZF:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(i("wQpU")),a=i("2K1W"),r=l(i("+zfC")),s=l(i("n5FU")),o=l(i("6N0z"));function l(e){return e&&e.__esModule?e:{default:e}}t.default={components:{"progress-bar":r.default,triggers:s.default,extMenu:o.default},props:{canManualStartup:{type:Boolean,default:!0},hasPermission:{type:Boolean,default:!0},config:{type:Object,default:function(){return{buildId:0,buttonAllow:{},content:[],customBtns:[],extMenu:[],footer:[],isRunning:!1,name:"",runningInfo:{time:"0秒",percentage:"0%",log:"",buildCount:0},status:"success"}}},index:{type:Number,default:0}},data:function(){return{iconStatusMap:{error:"exclamation",warning:"pause",success:"check-1"},isShowExtMenu:!1,extMenuTimer:-1,taskNameWidth:0}},methods:{emitEventHandler:function(e,t){a.bus.$emit(e,t)},cardContentClick:function(){var e=this.config;"not_built"===e.status?this.$router.push({name:"pipelinesHistory",params:{projectId:this.$route.params.projectId,pipelineId:e.pipelineId}}):this.$router.push({name:"pipelinesDetail",params:{projectId:this.$route.params.projectId,pipelineId:e.pipelineId,buildNo:e.buildId}})},triggersExec:function(e){var t=e.pipelineId,i=(0,n.default)(e,["pipelineId"]);a.bus.$emit("triggers-exec",i,t)},titleClickHandler:function(e){a.bus.$emit("title-click",e)},applyPermission:function(e){a.bus.$emit("set-permission","流水线："+e.name,"查看",e.pipelineId)}}}},Cmsp:function(e,t,i){"use strict";i.r(t);var n=i("gU+O"),a=i("7U/S");for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);i("q1tI");var s=i("psIG"),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/pipelineList/listCreateHeader.vue",t.default=o.exports},"E2+b":function(e,t,i){"use strict";var n=i("1GL7");i.n(n).a},EqgO:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(i("06Hw")),a=p(i("wQpU")),r=p(i("YYXh")),s=p(i("tZmG")),o=p(i("Kz1y")),l=i("WIBD"),c=p(i("E4OK")),u=p(i("1kG9"));function p(e){return e&&e.__esModule?e:{default:e}}t.default={name:"pipeline-template-popup",components:{Logo:c.default,stages:u.default},props:{togglePopup:{type:Function,required:!0},isShow:{type:Boolean,required:!0,default:!1}},data:function(){return{isDisabled:!1,activeTempIndex:-1,tempTypeIndex:0,showPreview:!1,isLoading:!this.pipelineTemplate,headerHeight:50,viewHeight:0,newPipelineName:"",searchName:"",templateType:"FREEDOM",curCategory:"",labelSelected:[]}},computed:(0,o.default)({},(0,l.mapState)("soda",["pipelineTemplate","templateCategory","storeTemplate"]),(0,l.mapGetters)({tagGroupList:"pipelines/getTagGroupList"}),{tplTypes:function(){var e=[{label:"自由模式",value:"FREEDOM",tip:"可以自由调整流水线编排，不受模版管控"}];return"public"!==(this.activeTemp.templateType||"").toLowerCase()?e.push({label:"约束模式",value:"CONSTRAINT",tip:"不能自由调整流水线编排，可通过模版更新实例"}):this.templateType="FREEDOM",e},tempTypeList:function(){return this.templateCategory||[]},categoryList:function(){return(this.templateCategory||[]).filter((function(e){return!["custom","store"].includes(e.categoryCode)}))},hasSelectTemp:function(){return-1!==this.activeTempIndex&&this.activeTemp},tempList:function(){var e=[],t=this.tempTypeIndex,i=this.pipelineTemplate,n=this.tempTypeList,a=n[t]&&n[t].categoryCode;return"store"===a?e=(this.storeTemplate||[]).map((function(e){return(0,o.default)({},e,{isInstall:!(0,s.default)(i||[]).includes(e.code),isFlag:e.flag,stages:i[e.code]&&i[e.code].stages||[]})})):(0,s.default)(i||[]).map((function(t){("custom"===a&&!i[t].category.length||i[t].category.includes(a))&&e.push((0,o.default)({},i[t],{isInstall:!1,isFlag:!0}))})),e},activeTemp:function(){return this.tempList[this.activeTempIndex]||{}},tempPipeline:function(){return this.hasSelectTemp?this.activeTemp:null},tempInfo:function(){return{author:"作者",atomNum:"插件",desc:"简介"}},projectId:function(){return this.$route.params.projectId},isConfirmDisable:function(){var e=(0,s.default)(this.activeTemp);return this.isDisabled||!this.newPipelineName||this.activeTemp.isInstall||e.length<=0},isActiveTempEmpty:function(){return(0,s.default)(this.activeTemp).length<=0}}),watch:{pipelineTemplate:function(e,t){e&&(this.isLoading=!1,this.selectTemp(0))},isShow:function(){var e=this;this.isShow?(this.isLoading=!0,this.requestCategory(),this.requestPipelineTemplate({projectId:this.projectId}),this.computPopupHeight(),window.addEventListener("resize",this.computPopupHeight),this.$nextTick((function(){e.$refs.pipelineName&&e.$refs.pipelineName.focus()}))):window.removeEventListener("resize",this.computPopupHeight)}},methods:(0,o.default)({},(0,l.mapActions)("soda",["requestCategory","requestPipelineTemplate","requestStoreTemplate"]),(0,l.mapActions)("atom",["setPipeline"]),{search:function(){this.selectTemp(0),this.requestMarkTemplates(this.searchName,this.curCategory)},selectTemp:function(e){var t=this.tempList.length&&this.tempList[e];e===this.activeTempIndex||t.isInstall||(this.activeTempIndex=e)},installTemplate:function(e){var t=WEB_URL_PIRFIX+"/store/"+e.code+"/install/template?projectCode="+this.projectId+"#MARKET";window.open(t,"_blank")},selectTempType:function(e){var t=this;e!==this.tempTypeList.length-1||this.storeTemplate||this.requestMarkTemplates(),setTimeout((function(){t.selectTemp(0)}),100),this.tempTypeIndex=e,this.togglePreview(!1)},refreshStoreTEmp:function(){this.selectTemp(0),this.curCategory="",this.searchName="",this.requestPipelineTemplate({projectId:this.projectId}),this.requestMarkTemplates()},selectCategory:function(e){this.curCategory===e?this.curCategory="":this.curCategory=e,this.requestMarkTemplates(this.searchName,this.curCategory)},toggleTemplatePopup:function(e){this.togglePopup(e),this.selectTemp(0),this.togglePreview(!1),this.newPipelineName="",this.setPipeline(null)},togglePreview:function(e){this.showPreview=e},requestMarkTemplates:function(e,t){this.requestStoreTemplate({templateName:e||void 0,category:t||void 0})},createNewPipeline:function(){var e=this;return(0,r.default)(n.default.mark((function t(){var i,r,l,c;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.activeTemp,i.author,i.atomNum,i.icon,r=(0,a.default)(i,["author","atomNum","icon"]),(0,o.default)(r,{name:e.newPipelineName,labels:e.labelSelected}),!((0,s.default)(e.activeTemp).length<=0)){t.next=6;break}return e.$showTips({message:"流水线（"+r.name+"）新增失败， 请先选择模板",theme:"error"}),t.abrupt("return");case 6:if("CONSTRAINT"!==e.templateType){t.next=9;break}return e.$router.push({name:"createInstance",params:{templateId:e.activeTemp.templateId,curVersionId:e.activeTemp.version,pipelineName:r.name}}),t.abrupt("return");case 9:return t.prev=9,e.isDisabled=!0,t.next=13,e.$ajax.post("/process/api/user/pipelines/"+e.projectId,r);case 13:l=t.sent,(c=l.data.id)?(e.$showTips({message:r.name+"新增成功",theme:"success"}),e.$router.push({name:"pipelinesEdit",params:{pipelineId:c}})):e.$showTips({message:r.name+"新增失败",theme:"error"}),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(9),403===t.t0.code?e.$showAskPermissionDialog({noPermissionList:[{resource:"流水线",option:"创建"}],applyPermissionUrl:PERM_URL_PIRFIX+"/backend/api/perm/apply/subsystem/?client_id=pipeline&project_code="+e.$route.params.projectId+"&service_code=pipeline&role_creator=pipeline"}):e.$showTips({message:t.t0.message,theme:"error"});case 21:return t.prev=21,e.isDisabled=!1,t.finish(21);case 24:case"end":return t.stop()}}),t,e,[[9,18,21,24]])})))()},computPopupHeight:function(){this.viewHeight=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-this.headerHeight-120+"px"}})}},F4yi:function(e,t,i){"use strict";var n=i("wMB3");i.n(n).a},IIgw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{percentage:{type:String},status:{type:String},hasIcon:{type:Boolean,default:!1}}}},JZRv:function(e,t,i){"use strict";i.r(t);var n=i("vST7"),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t.default=a.a},JcFz:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pipelines-triggers"},[i("div",{staticClass:"pipeline-trigger-wrapper",on:{click:e.toggleStatus}},[e._t("exec-bar",[e.canManualStartup?e._e():i("div",{staticClass:"pipeline-trigger-item pipeline-disable"},[i("i",{staticClass:"bk-icon icon-displayable trigger-icon",attrs:{title:"不支持手动启动流水线"}})]),e._v(" "),e.canManualStartup&&"running"!==e.status?i("div",{staticClass:"pipeline-trigger-item pipeline-ready"},[i("i",{staticClass:"bk-icon icon-right-shape trigger-icon"})]):e._e(),e._v(" "),e.canManualStartup&&"running"===e.status?i("div",{staticClass:"pipeline-trigger-item pipeline-running"},[i("i",{staticClass:"bk-icon icon-circle-2-1 spin-icon",attrs:{alt:"执行中"}})]):e._e()],{isDisable:e.disabled})],2),e._v(" "),i("bk-dialog",{attrs:{title:"请输入流水线运行参数",width:"800","close-icon":!1},on:{confirm:e.confirmHandler,cancel:e.cancelHandler},model:{value:e.isDialogShow,callback:function(t){e.isDialogShow=t},expression:"isDialogShow"}},[i("section",{staticClass:"bk-form dialog-params-form"},[i("pipeline-params-form",{ref:"paramsForm",attrs:{"param-values":e.paramValues,"handle-param-change":e.handleParamChange,params:e.paramList}})],1)])],1)},a=[];n._withStripped=!0,i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}))},JdUT:function(e,t,i){"use strict";i.r(t);var n=i("IIgw"),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t.default=a.a},JwXn:function(e,t,i){"use strict";i.r(t);var n=i("/GLl"),a=i("JZRv");for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);i("E2+b");var s=i("psIG"),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/pipelineList/imgEmptyTips.vue",t.default=o.exports},KXcO:function(e,t,i){},LoUp:function(e,t,i){"use strict";var n=i("0JCp");i.n(n).a},MtPY:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(i("Kz1y")),a=i("WIBD"),r=s(i("JwXn"));function s(e){return e&&e.__esModule?e:{default:e}}t.default={components:{emptyTips:r.default},props:{hasPipeline:{type:Object,default:{}},hasFilter:{type:Boolean,default:!1}},data:function(){var e=this;return{filterNoResultTipsConfig:{title:"搜索结果为空",desc:"找不到满足当前过滤条件的流水线，请重新设置过滤条件",imgType:"",btns:[{theme:"primary",size:"normal",handler:function(){return e.showSlide(!0)},text:"重新过滤"}]},collectEmptyTipsConfig:{title:"您尚未添加任何流水线至收藏夹",desc:"将鼠标悬浮到更多ICON上点击收藏",imgType:"noCollect"},mypipelineEmptyTipsConfig:{title:"创建自己的第一条流水线",desc:"你还没有拥有任务流水线，可以点击下方 “创建流水线” 按钮，进行创建",imgType:"",btns:[{theme:"primary",size:"normal",handler:function(){return e.createPipeline()},text:"创建流水线"},{theme:"default",size:"normal",handler:function(){return e.tutorial()},text:"了解更多"}]},allPipelineEmptyTipsConfig:{title:"创建项目的第一条流水线",desc:"该项目下还没有拥有任务流水线，可以点击下方 “创建流水线” 按钮，进行创建",imgType:"",btns:[{theme:"primary",size:"normal",handler:function(){return e.createPipeline()},text:"创建流水线"},{theme:"default",size:"normal",handler:function(){return e.tutorial()},text:"了解更多"}]},otherViewsEmptyTipsConfig:{title:"该视图下没有任何流水线",desc:"该视图下还没有拥有任务流水线，可以点击下方 “创建流水线” 按钮，进行创建，或切换到其它视图",imgType:"",btns:[{theme:"primary",size:"normal",handler:function(){return e.createPipeline()},text:"创建流水线"},{theme:"default",size:"normal",handler:function(){return e.tutorial()},text:"了解更多"}]}}},computed:(0,n.default)({},(0,a.mapState)("pipelines",["currentViewId"]),{pageType:function(){return this.currentViewId}}),methods:{showSlide:function(e){this.$emit("showSlide",e)},createPipeline:function(){this.$emit("showCreate",!0)},tutorial:function(){window.open(DOCS_URL_PREFIX+"/所有服务/流水线/什么是流水线/summary.html","_blank")}}}},N5Ym:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(i("Kz1y")),a=c(i("06Hw")),r=c(i("YYXh")),s=c(i("3tY9")),o=i("2K1W"),l=i("WIBD");function c(e){return e&&e.__esModule?e:{default:e}}t.default={components:{PipelineParamsForm:s.default},props:{beforeExec:{type:Function,default:function(){return function(){}}},canManualStartup:{type:Boolean,default:!0},status:{type:String,default:"ready"},pipelineId:{type:String,default:""}},data:function(){return{isDialogShow:!1,paramList:[],paramValues:{},disabled:!1}},computed:{projectId:function(){return this.$route.params.projectId},replay:function(){return this.$store.state.pipelines.replay}},watch:{replay:function(e,t){var i=this;return(0,r.default)(a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}return i.$store.state.pipelines.replay=!1,t.next=4,i.toggleStatus();case 4:case"end":return t.stop()}}),t,i)})))()}},mounted:function(){o.bus.$on("trigger-excute",this.toggleStatus)},beforeDestroy:function(){o.bus.$off("trigger-excute",this.toggleStatus)},methods:(0,n.default)({},(0,l.mapActions)("atom",["setExecuteStatus"]),{selectedHandler:function(e){this.$validator.errors.remove(e)},handleParamChange:function(e,t){this.paramValues[e]=t},toggleStatus:function(){var e=this;return(0,r.default)(a.default.mark((function t(){var i;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.disabled&&"running"!==e.status&&e.canManualStartup){t.next=2;break}return t.abrupt("return");case 2:if(e.setExecuteStatus(!0),e.disabled=!0,!e.beforeExec||"function"!=typeof e.beforeExec){t.next=11;break}return t.next=7,e.beforeExec(!0);case 7:if(t.sent){t.next=11;break}return e.disabled=!1,e.setExecuteStatus(!1),t.abrupt("return");case 11:if(e.$emit("click-event"),t.prev=12,!e.pipelineId||!e.projectId){t.next=36;break}return t.next=16,e.$store.dispatch("pipelines/requestStartupInfo",{projectId:e.projectId,pipelineId:e.pipelineId});case 16:if(!(i=t.sent).canManualStartup){t.next=33;break}if(e.paramList=i.properties.filter((function(e){return e.required})),!i.canElementSkip){t.next=24;break}e.$store.commit("pipelines/updateCurAtomPrams",i),e.$router.push({name:"pipelinesPreview",params:{projectId:e.projectId,pipelineId:e.pipelineId}}),t.next=31;break;case 24:if(!e.paramList.length||i.canElementSkip){t.next=29;break}e.isDialogShow=!0,e.paramValues=e.paramList.reduce((function(e,t){return e[t.id]=t.defaultValue,e}),{}),t.next=31;break;case 29:return t.next=31,e.execPipeline();case 31:t.next=34;break;case 33:throw new Error("当前流水线不包含手动触发插件");case 34:t.next=37;break;case 36:throw new Error("流水线参数错误");case 37:t.next=42;break;case 39:t.prev=39,t.t0=t.catch(12),403===t.t0.code?e.$showAskPermissionDialog({noPermissionList:[{resource:"流水线",option:"执行"}],applyPermissionUrl:PERM_URL_PIRFIX+"/backend/api/perm/apply/subsystem/?client_id=pipeline&project_code="+e.projectId+"&service_code=pipeline&role_executor=pipeline:"+e.pipelineId}):e.$showTips({message:t.t0.message||t.t0,theme:"error"});case 42:return t.prev=42,e.setExecuteStatus(!1),e.disabled=!1,t.finish(42);case 46:case"end":return t.stop()}}),t,e,[[12,39,42,46]])})))()},execPipeline:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.default)(a.default.mark((function i(){return a.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.$emit("exec",(0,n.default)({},t,{pipelineId:e.pipelineId}));case 2:e.disabled=!1,e.setExecuteStatus(!1);case 4:case"end":return i.stop()}}),i,e)})))()},confirmHandler:function(){var e=this;return(0,r.default)(a.default.mark((function t(){var i,n,r;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=!0,!e.$refs.paramsForm){t.next=6;break}return t.next=4,e.$refs.paramsForm.$validator.validateAll();case 4:i=t.sent,e.$refs.paramsForm.submitForm();case 6:if(!i){t.next=10;break}return n=e.paramValues,r=e.execPipeline,t.next=10,r(n);case 10:case"end":return t.stop()}}),t,e)})))()},cancelHandler:function(){this.disabled=!1}})}},NC29:function(e,t,i){},P3ei:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"create-header clearfix"},[i("div",{staticClass:"create-header-left"},["button"===e.buttonType?i("bk-button",{attrs:{size:"normal",theme:"primary",disabled:e.buttonDisabled},on:{click:e.toggleTemplatePopup}},[i("i",{staticClass:"bk-icon icon-plus"}),e._v(" "),i("span",[e._v(e._s(e.createText))])]):e._e(),e._v(" "),"menu"===e.buttonType?i("bk-dropdown-menu",{attrs:{align:e.localDropdownMenuConfig.align||"center"},on:{show:e.localDropdownMenuConfig.showHandler,hide:function(t){e.localDropdownMenuConfig.hideHandler}}},[i("bk-button",{attrs:{slot:"dropdown-trigger",theme:"primary",icon:"bk-icon icon-plus"},slot:"dropdown-trigger"},[e._v("\n                "+e._s(e.createText)+"\n            ")]),e._v(" "),i("ul",{staticClass:"bk-dropdown-list",attrs:{slot:"dropdown-content"},slot:"dropdown-content"},e._l(e.localDropdownMenuConfig.list,(function(t,n){return i("li",{key:n},[i("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.handler(n)}}},[e._v("\n                        "+e._s(t.text)+"\n                    ")])])})),0)],1):e._e()],1),e._v(" "),e.$slots.addon?i("div",{staticClass:"create-header-right"},[e._t("addon")],2):e._e()])},a=[];n._withStripped=!0,i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}))},"Q/BC":function(e,t,i){"use strict";i.r(t);var n=i("+T+w"),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t.default=a.a},RoC8:function(e,t,i){e.exports=i("y7ft")(546)},Sitx:function(e,t,i){"use strict";i.r(t);var n=i("TFNz"),a=i("1rXd");for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);i("LoUp");var s=i("psIG"),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/pipelineList/taskTable/index.vue",t.default=o.exports},TFNz:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("table",{staticClass:"bk-table pipeline-list-table"},[e._m(0),e._v(" "),i("tbody",[e._l(e.list,(function(t,n){return[i("tr",{key:"taskTable"+n+"_re",staticStyle:{position:"relative"}},[i("td",{staticClass:"table-list-name text-overflow",class:t.feConfig&&t.feConfig.status},[t.hasPermission?i("a",{staticClass:"text-link",attrs:{href:"javascript:;"},on:{click:function(i){return e.emitEventHandler("title-click",t.pipelineId)}}},[e._v("\n                        "+e._s(t.pipelineName)+"\n                    ")]):i("span",[e._v(e._s(t.pipelineName))])]),e._v(" "),t.hasPermission?i("td",[t.feConfig&&"success"!==t.feConfig.status&&"not_built"!==t.feConfig.status&&"known_error"!==t.feConfig.status?i("progress-bar",{staticClass:"table-list-progress mr15",attrs:{percentage:t.feConfig&&t.feConfig.runningInfo.percentage,status:t.feConfig&&t.feConfig.status,"has-icon":!0}}):i("triggers",{staticClass:"inline-component",attrs:{"pipeline-id":t.pipelineId,"can-manual-startup":t.canManualStartup},on:{exec:e.triggersExec}}),e._v(" "),t.feConfig&&t.feConfig.runningInfo.log&&"running"===t.feConfig.status?i("span",{staticClass:"row-item-desc text-overflow mr15"},[e._v("\n                        "+e._s(t.feConfig.runningInfo.log)+"\n                    ")]):e._e(),e._v(" "),t.feConfig&&"running"===t.feConfig.status?i("a",{staticClass:"text-link item-text-btn",attrs:{href:"javascript:;"},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),e.emitEventHandler("terminate-pipeline",t.pipelineId)}}},[e._v("\n                        终止\n                    ")]):e._e(),e._v(" "),t.feConfig&&"error"===t.feConfig.status?i("a",{staticClass:"text-link item-text-btn noticed",attrs:{href:"javascript:;"},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),e.emitEventHandler("error-noticed",t.pipelineId)}}},[e._v("\n                        知道了\n                        "),i("i",{staticClass:"bk-icon icon-check-1"})]):e._e()],1):i("td"),e._v(" "),i("td",[t.hasPermission?i("a",{staticClass:"text-link row-task-count",attrs:{href:"javascript:;"},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),e.$router.push({name:"pipelinesEdit",params:{pipelineId:t.pipelineId}})}}},[e._v("\n                        "+e._s(t.taskCount)+"\n                    ")]):i("span",[e._v(e._s(t.taskCount))])]),e._v(" "),i("td",[t.hasPermission?i("a",{staticClass:"text-link row-build-count",attrs:{href:"javascript:;"},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),e.$router.push({name:"pipelinesHistory",params:{pipelineId:t.pipelineId}})}}},[e._v("\n                        "+e._s(t.buildCount)+"\n                    ")]):i("span",[e._v(e._s(t.buildCount))])]),e._v(" "),i("td",[e._v(e._s(t.feConfig&&t.feConfig.content[0].value))]),e._v(" "),i("td",[e._v(e._s(e.calcLatestStartBuildTime(t)))]),e._v(" "),i("td",[t.hasPermission?i("ext-menu",{attrs:{config:t.feConfig}}):i("a",{staticClass:"text-link",attrs:{href:"javascript:;"},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),e.applyPermission(t.pipelineName,t.pipelineId)}}},[e._v("\n                        申请权限\n                    ")])],1)])]}))],2)])},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",{staticClass:"pl30",attrs:{width:"20%"}},[e._v("任务名称")]),e._v(" "),i("th",{attrs:{width:"30%"}}),e._v(" "),i("th",{attrs:{width:"8%"}},[e._v("插件总数")]),e._v(" "),i("th",{attrs:{width:"8%"}},[e._v("已执行次数")]),e._v(" "),i("th",{attrs:{width:"8%"}},[e._v("最新构建号")]),e._v(" "),i("th",{attrs:{width:"15%"}},[e._v("执行开始时间")]),e._v(" "),i("th",{attrs:{width:"10%"}},[e._v("操作")])])])}];n._withStripped=!0,i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}))},TZeu:function(e,t,i){"use strict";i.r(t);var n=i("N5Ym"),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t.default=a.a},U84T:function(e,t,i){"use strict";i.r(t);var n=i("kXap"),a=i("Q/BC");for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);i("c5X7");var s=i("psIG"),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="src/views/list/newlist.vue",t.default=o.exports},UAyc:function(e,t,i){"use strict";i.r(t);var n=i("zCn4"),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t.default=a.a},UvJJ:function(e,t,i){},VwUo:function(e,t,i){"use strict";var n=i("9ycb");i.n(n).a},W7sL:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(i("wQpU")),a=c(i("+zfC")),r=c(i("n5FU")),s=c(i("6N0z")),o=i("2K1W"),l=i("ygAv");function c(e){return e&&e.__esModule?e:{default:e}}t.default={components:{progressBar:a.default,triggers:r.default,extMenu:s.default},props:{list:{type:Array,default:[]}},data:function(){return{isShowExtMenu:!1}},methods:{localConvertMStoString:function(e){return(0,l.convertMStoString)(e)},calcLatestStartBuildTime:function(e){if(!e.latestBuildStartTime)return"--";try{var t=this.localConvertMStoString(e.currentTimestamp-e.latestBuildStartTime).match(/^[0-9]{1,}([\u4e00-\u9fa5]){1,}/)[0];return t.indexOf("分")>0&&(t+="钟"),t+"前"}catch(e){return"---"}},triggersExec:function(e){var t=e.pipelineId,i=(0,n.default)(e,["pipelineId"]);o.bus.$emit("triggers-exec",i,t)},emitEventHandler:function(e,t){o.bus.$emit(e,t)},applyPermission:function(e,t){o.bus.$emit("set-permission","流水线："+e,"查看",t)}}}},XyUZ:function(e,t,i){},"Y/by":function(e,t,i){"use strict";i.r(t);var n=i("EqgO"),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t.default=a.a},Yv05:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("bk-sideslider",{attrs:{"is-show":e.isShow,title:e.sliderOpt.title,"quick-close":e.sliderOpt.quickClose,width:e.sliderOpt.width},on:{"update:isShow":function(t){e.isShow=t},"update:is-show":function(t){e.isShow=t},hidden:e.hideSlide}},[i("div",{staticClass:"filter-wrapper",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"filter-content"},[i("div",[i("div",{staticClass:"form-group"},[i("label",{staticClass:"filter-label",attrs:{for:"pipelineName"}},[e._v("流水线名称")]),e._v(" "),i("input",{directives:[{name:"validate",rawName:"v-validate.initial",value:"max:40",expression:"'max:40'",modifiers:{initial:!0}},{name:"model",rawName:"v-model",value:e.currentFilter.filterByPipelineName,expression:"currentFilter.filterByPipelineName"}],staticClass:"bk-form-input input-text",class:{"is-danger":e.errors.has("pipelineName")},attrs:{type:"text",name:"pipelineName",id:"pipelineName",placeholder:"支持模糊匹配"},domProps:{value:e.currentFilter.filterByPipelineName},on:{input:function(t){t.target.composing||e.$set(e.currentFilter,"filterByPipelineName",t.target.value)}}}),e._v(" "),i("p",{class:e.errors.has("pipelineName")?"error-tips":"normal-tips"},[e._v(e._s(e.errors.first("pipelineName")))])]),e._v(" "),i("div",{staticClass:"form-group"},[i("form-field",{attrs:{label:"创建人"}},[i("user-input",{attrs:{"handle-change":e.handleChange,name:"users"},model:{value:e.currentFilter.filterByCreator,callback:function(t){e.$set(e.currentFilter,"filterByCreator",t)},expression:"currentFilter.filterByCreator"}})],1)],1),e._v(" "),e._l(e.tagGroupList,(function(t,n){return i("div",{key:n,staticClass:"form-group"},[i("label",{staticClass:"filter-label"},[e._v(e._s(t.name))]),e._v(" "),i("bk-select",{attrs:{multiple:"true"},model:{value:e.currentFilter[t.id],callback:function(i){e.$set(e.currentFilter,t.id,i)},expression:"currentFilter[group.id]"}},e._l(t.labels,(function(e,t){return i("bk-option",{key:t,attrs:{id:e.id,name:e.name}})})),1)],1)})),e._v(" "),i("div",{staticClass:"form-group filter-modify"},[i("bk-button",{attrs:{theme:"primary",size:"small",disabled:e.isDisabled},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.filterCommit(t)}}},[e._v("过滤")]),e._v(" "),i("a",{staticClass:"btn",on:{click:e.empty}},[e._v("清空")])],1)],2)])])])},a=[];n._withStripped=!0,i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}))},baW9:function(e,t,i){"use strict";i.r(t);var n=i("Yv05"),a=i("hLNm");for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);i("qzVq");var s=i("psIG"),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/pipelineList/PipelineFilter/index.vue",t.default=o.exports},c5X7:function(e,t,i){"use strict";var n=i("NC29");i.n(n).a},d2qh:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=i("yeJR"),r=(n=a)&&n.__esModule?n:{default:n};t.default={components:{createHeader:r.default},props:{layout:{type:String},hasFilter:{type:Boolean},num:{type:String,default:0}},data:function(){return{showOrderType:!1,orderList:[{id:"NAME",name:"按名称A-Z"},{id:"CREATE_TIME",name:"按创建时间"},{id:"UPDATE_TIME",name:"按修改时间"}]}},methods:{hideFeedBackMenu:function(){this.showOrderType=!1},toggleFeedBackMenu:function(){this.showOrderType=!this.showOrderType},changeLayoutType:function(e){this.$emit("changeLayout",e)},changeOrderType:function(e){this.showOrderType=!1,this.$emit("changeOrder",e)},toggleTemplatePopup:function(e){this.$emit("showCreate",e)},showSlide:function(){this.$emit("showSlide",!0)}}}},eTF4:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("bk-dialog",{attrs:{"ext-cls":"create-pipeline-form","has-header":!1,"has-footer":!1,"close-icon":!1,"show-footer":!1,width:1054,position:{top:"100"}},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[i("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.isLoading},expression:"{ isLoading }"}],staticClass:"pipeline-template"},[i("header",[e._v("\n                新建流水线\n                "),i("i",{staticClass:"bk-icon icon-close",on:{click:function(t){return e.toggleTemplatePopup(!1)}}})]),e._v(" "),i("div",{staticClass:"temp-type-tab"},e._l(e.tempTypeList,(function(t,n){return i("span",{key:t,class:{active:e.tempTypeIndex===n},on:{click:function(t){return e.selectTempType(n)}}},[e._v("\n                    "+e._s(t.categoryName)+"\n                    "),"store"===t.categoryCode&&e.tempTypeIndex===n?i("i",{staticClass:"bk-icon icon-refresh",on:{click:e.refreshStoreTEmp}}):e._e()])})),0),e._v(" "),i("div",{staticClass:"template-content",style:{height:e.viewHeight}},[e.tempList?i("div",{directives:[{name:"show",rawName:"v-show",value:!e.showPreview,expression:"!showPreview"}],staticClass:"left-temp-list"},[e.tempTypeIndex===e.tempTypeList.length-1?i("div",{staticClass:"search-row-content"},[i("div",{staticClass:"search-input-row"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchName,expression:"searchName"}],staticClass:"bk-form-input",attrs:{type:"text",placeholder:"请输入关键字",name:"searchInput"},domProps:{value:e.searchName},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()},input:function(t){t.target.composing||(e.searchName=t.target.value)}}}),e._v(" "),i("i",{staticClass:"bk-icon icon-search",on:{click:function(t){return e.search()}}})]),e._v(" "),i("div",{staticClass:"search-category"},e._l(e.categoryList,(function(t){return i("span",{key:t.id,class:{active:e.curCategory===t.categoryCode},on:{click:function(i){return e.selectCategory(t.categoryCode)}}},[t.iconUrl?i("img",{staticClass:"category-icon",attrs:{src:t.iconUrl}}):e._e(),e._v("\n                                "+e._s(t.categoryName)+"\n                            ")])})),0)]):e._e(),e._v(" "),i("h2",[e._v("模板列表（"+e._s(e.tempList.length)+"）")]),e._v(" "),i("ul",e._l(e.tempList,(function(t,n){return i("li",{key:t.name,class:{"temp-item":!0,active:e.activeTempIndex===n&&!t.isInstall,hover:t.isInstall,permission:!t.isFlag},on:{click:function(t){return e.selectTemp(n)}}},[e.tempTypeIndex!==e.tempTypeList.length-1&&"constraint"===t.templateType.toLowerCase()?i("span",{staticClass:"temp-tip"},[e._v("商店")]):e._e(),e._v(" "),e.activeTempIndex!==n||t.isInstall?e._e():i("i",{staticClass:"bk-icon icon-check-circle-shape"}),e._v(" "),i("p",{staticClass:"temp-logo"},[t.icon?i("logo",{attrs:{size:"50",name:t.icon}}):t.logoUrl?i("img",{staticClass:"temp-img",attrs:{src:t.logoUrl}}):i("i",{staticClass:"bk-icon icon-placeholder"})],1),e._v(" "),i("p",{staticClass:"temp-title",attrs:{title:t.name}},[e._v("\n                                "+e._s(t.name)+"\n                            ")]),e._v(" "),t.isInstall&&t.isFlag?i("p",{staticClass:"install-btn",on:{click:function(i){return e.installTemplate(t)}}},[e._v("安装")]):e._e(),e._v(" "),t.isInstall&&!t.isFlag?i("p",{staticClass:"permission-tips"},[e._v("无安装权限")]):e._e(),e._v(" "),t.isInstall?e._e():i("p",{staticClass:"permission-tips"},[e._v("已安装")])])})),0)]):e._e(),e._v(" "),e.showPreview&&e.tempPipeline?i("div",{staticClass:"pipeline-detail-preview"},[i("stages",{staticClass:"pipeline-preview",attrs:{stages:e.tempPipeline.stages}})],1):e._e(),e._v(" "),i("div",{staticClass:"right-temp-info"},[i("div",{staticClass:"temp-info-detail"},[e.isActiveTempEmpty?i("section",{staticClass:"choose-tips"},[i("logo",{staticStyle:{fill:"#3c96ff"},attrs:{size:"20",name:"finger-left"}}),e._v(" "),i("span",[e._v("请先在左侧选择模板")])],1):[i("div",{staticClass:"pipeline-input"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.newPipelineName,expression:"newPipelineName",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:'"required"'}],ref:"pipelineName",staticClass:"bk-form-input",attrs:{type:"text",placeholder:"请输入流水线名称",maxlength:"40",name:"newPipelineName"},domProps:{value:e.newPipelineName},on:{input:function(t){t.target.composing||(e.newPipelineName=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!e.errors.has("newPipelineName"),expression:'!errors.has("newPipelineName")'}],staticClass:"border-effect"}),e._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("newPipelineName"),expression:'errors.has("newPipelineName")'}],staticClass:"validate-fail-border-effect"})]),e._v(" "),i("div",{staticClass:"detail-form-item"},[i("label",{staticClass:"info-label"},[e._v("类型：")]),e._v(" "),i("div",{staticClass:"info-value template-type"},[i("bk-radio-group",{model:{value:e.templateType,callback:function(t){e.templateType=t},expression:"templateType"}},e._l(e.tplTypes,(function(t,n){return i("bk-popover",{key:n,attrs:{placement:"bottom"}},[i("bk-radio",{staticClass:"form-radio",attrs:{value:t.value}},[i("span",{staticClass:"radio-lable"},[e._v(e._s(t.label))])]),e._v(" "),i("div",{staticStyle:{"white-space":"normal"},attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.tip))])],1)})),1)],1),e._v(" "),e._l(e.tagGroupList,(function(t,n){return i("div",{key:n,staticClass:"from-group"},[i("label",[e._v(e._s(t.name))]),e._v(" "),i("bk-select",{attrs:{multiple:"true"},model:{value:e.labelSelected,callback:function(t){e.labelSelected=t},expression:"labelSelected"}},e._l(t.labels,(function(e,t){return i("bk-option",{key:t,attrs:{id:e.id,name:e.name}})})),1)],1)})),e._v(" "),e.showPreview?i("a",{staticClass:"view-pipeline",on:{click:function(t){return e.togglePreview(!1)}}},[e._v("关闭预览")]):e._e(),e._v(" "),e.showPreview||e.activeTemp.isInstall||e.isActiveTempEmpty?e._e():i("a",{staticClass:"view-pipeline",on:{click:function(t){return e.togglePreview(!0)}}},[e._v("查看模板详情")]),e._v(" "),e.showPreview||!e.activeTemp.isInstall&&!e.isActiveTempEmpty?e._e():i("a",{staticClass:"view-pipeline disabled"},[e._v("查看模板详情")])],2)]],2),e._v(" "),i("div",{staticClass:"temp-operation-bar"},[i("bk-button",{attrs:{theme:"primary",disabled:e.isConfirmDisable,size:"small"},on:{click:e.createNewPipeline}},[e._v("新建")]),e._v(" "),i("bk-button",{attrs:{size:"small"},on:{click:function(t){return e.toggleTemplatePopup(!1)}}},[e._v("取消")])],1)])])])])],1)},a=[];n._withStripped=!0,i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}))},"gU+O":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("create-header",{attrs:{"create-text":"新建流水线"},on:{createPipeline:function(t){return e.toggleTemplatePopup(!0)}}},[i("div",{staticClass:"create-header-right",attrs:{slot:"addon"},slot:"addon"},[i("span",{staticClass:"pipeline-num"},[e._v("（共"+e._s(e.num)+"条流水线）")]),e._v(" "),i("i",{staticClass:"layout-icon bk-icon icon-filter-shape",class:{"active-icon":e.hasFilter},attrs:{title:"过滤"},on:{click:function(t){return t.stopPropagation(),e.showSlide(t)}}}),e._v(" "),i("span",{staticClass:"seperate-line"},[e._v("|")]),e._v(" "),"card"===e.layout?i("i",{staticClass:"layout-icon bk-icon icon-grid-view",attrs:{title:"卡片视图"},on:{click:function(t){return t.stopPropagation(),e.changeLayoutType("table")}}}):e._e(),e._v(" "),"table"===e.layout?i("i",{staticClass:"layout-icon bk-icon icon-list-view",attrs:{title:"列表视图"},on:{click:function(t){return t.stopPropagation(),e.changeLayoutType("card")}}}):e._e(),e._v(" "),i("div",{directives:[{name:"bk-clickoutside",rawName:"v-bk-clickoutside",value:e.hideFeedBackMenu,expression:"hideFeedBackMenu"}],staticClass:"list-method",staticStyle:{display:"inline"}},[i("i",{staticClass:"order-icon bk-icon icon-new-order",class:{"active-icon":e.showOrderType},attrs:{title:"排序"},on:{click:function(t){return t.stopPropagation(),e.toggleFeedBackMenu(t)}}}),e._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:e.showOrderType,expression:"showOrderType"}],staticClass:"feedback-menu"},e._l(e.orderList,(function(t,n){return i("li",{key:"order"+n},[i("a",{on:{click:function(i){return i.stopPropagation(),e.changeOrderType(t.id)}}},[e._v(e._s(t.name))])])})),0)])])])],1)},a=[];n._withStripped=!0,i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}))},gxzH:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"task-card",class:e.config.isRunning?"task-"+e.config.status:""},[e.hasPermission?e._e():i("bk-button",{staticClass:"apply-button",attrs:{theme:"success"},on:{click:function(t){return e.applyPermission(e.config)}}},[e._v("\n        申请权限\n    ")]),e._v(" "),i("div",{staticClass:"task-card-header"},[i("p",{staticClass:"task-card-name text-overflow",attrs:{title:e.config.name},on:{click:function(t){return t.stopPropagation(),e.emitEventHandler("title-click",e.config.pipelineId)}}},[e.config.isInstanceTemplate?i("span",{staticClass:"template-tag"},[e._v("模")]):e._e(),e._v("\n            "+e._s(e.config.name)+"\n        ")]),e._v(" "),i("triggers",{attrs:{"pipeline-id":e.config.pipelineId,status:e.config.status,"can-manual-startup":e.canManualStartup},on:{exec:e.triggersExec}}),e._v(" "),e.config.isRunning||"known_error"!==e.config.status&&"success"!==e.config.status?e._e():i("div",{staticClass:"corner-mark",class:e.config.status},["known_error"===e.config.status?i("i",{staticClass:"bk-icon icon-exclamation"}):i("i",{staticClass:"bk-icon icon-check-1"})])],1),e._v(" "),e.config.isRunning?[e.config.runningInfo.buildCount>1?i("div",{staticClass:"task-card-running-multi",on:{click:function(t){return t.stopPropagation(),e.emitEventHandler("title-click",e.config.pipelineId)}}},[e._v("正在同时运行多个构建任务")]):i("div",{staticClass:"task-card-running",on:{click:function(t){return t.stopPropagation(),e.cardContentClick(t)}}},[i("div",{staticClass:"running-detail clearfix"},[i("div",{staticClass:"running-detail-text fl"},[e._v(e._s(e.config.runningInfo.time))]),e._v(" "),i("div",{staticClass:"running-detail-text fr"},[e._v(e._s(e.config.runningInfo.percentage))])]),e._v(" "),i("progress-bar",{attrs:{percentage:e.config.runningInfo.percentage,status:e.config.status}}),e._v(" "),i("div",{staticClass:"running-log"},[e._v(e._s(e.config.runningInfo.log))]),e._v(" "),e.config.customBtns?i("p",{staticClass:"custom-btns"},[e.config.isRunning?e._l(e.config.customBtns,(function(t,n){return i("a",{key:n,staticClass:"text-link",attrs:{href:"javascript:;"},on:{click:function(i){return i.stopPropagation(),e.emitEventHandler(t.handler,e.config.pipelineId)}}},[e._v("\n                        "+e._s(t.text)+"\n                        "),t.icon?i("i",{staticClass:"bk-icon",class:"icon-"+t.icon}):e._e()])})):e._e()],2):e._e()],1)]:[i("div",{staticClass:"task-card-content",on:{click:function(t){return t.stopPropagation(),e.cardContentClick(t)}}},[e.config.content.length?e._l(e.config.content,(function(t){return i("p",{key:t.key,staticClass:"content-row"},[i("span",{staticClass:"row-key"},[e._v(e._s(t.key))]),e._v("\n                    :\n                    "),i("span",{staticClass:"row-value",class:e.index?"":e.config.status},[e._v(e._s(t.value))])])})):e._e()],2),e._v(" "),i("div",{staticClass:"task-card-footer"},[e.config.footer.length?e._l(e.config.footer,(function(t,n){return i("div",{key:n,staticClass:"footer-item"},[i("div",{staticClass:"card-footer-wrapper",on:{click:function(i){return i.stopPropagation(),t.handler(e.config.pipelineId)}}},[i("p",{staticClass:"upper-row"},[e._v(e._s(t.upperText))]),e._v(" "),i("p",{staticClass:"lower-row"},[e._v(e._s(t.lowerText))])])])})):e._e(),e._v(" "),i("ext-menu",{attrs:{config:e.config}})],2)]],2)},a=[];n._withStripped=!0,i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}))},hLNm:function(e,t,i){"use strict";i.r(t);var n=i("sJLE"),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t.default=a.a},iWdN:function(e,t,i){},ikr4:function(e,t,i){"use strict";var n=i("zIl/");i.n(n).a},k6n0:function(e,t,i){"use strict";i.r(t);var n=i("gxzH"),a=i("+SeQ");for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);i("F4yi");var s=i("psIG"),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/pipelineList/taskCard/index.vue",t.default=o.exports},kXap:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("article",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:!1,title:e.loading.title},expression:"{ isLoading: false, title: loading.title }"}],staticClass:"pipeline-list"},[i("section",{staticClass:"loading-wrapper"},[e.showContent?i("div",{staticClass:"pipeline-list-wrapper"},[[e.pipelineList.length?e._e():i("list-empty",{attrs:{"has-filter":e.hasFilter,"has-pipeline":e.hasPipeline},on:{showCreate:e.toggleTemplatePopup,showSlide:e.showSlide}}),e._v(" "),e.pipelineList.length?i("section",[i("list-create-header",{attrs:{layout:e.layout,"has-filter":e.hasFilter,num:e.pipelineList.length},on:{showSlide:e.showSlide,changeLayout:e.changeLayoutType,changeOrder:e.changeOrderType,showCreate:e.toggleTemplatePopup}}),e._v(" "),i("section",{staticClass:"pipeline-list-content"},["card"===e.layout?i("div",{staticClass:"pipeline-list-cards clearfix"},e._l(e.pipelineList,(function(e,t){return i("task-card",{key:"taskCard"+e.pipelineId,attrs:{"has-permission":e.hasPermission,config:e.feConfig,index:t,"can-manual-startup":e.canManualStartup}})})),1):e._e(),e._v(" "),"table"===e.layout?i("div",{staticClass:"pipeline-list-table"},[i("task-table",{attrs:{list:e.pipelineList}})],1):e._e()])],1):e._e()]],2):e._e(),e._v(" "),i("pipeline-template-popup",{attrs:{"toggle-popup":e.toggleTemplatePopup,"is-show":e.templatePopupShow}}),e._v(" "),e.slideShow?i("pipeline-filter",{staticClass:"pipeline-filter",attrs:{"is-show":e.slideShow,"is-disabled":e.isDisabled,"selected-filter":e.currentFilter},on:{showSlide:e.showSlide,filter:e.filterCommit}}):e._e(),e._v(" "),i("bk-dialog",{attrs:{width:"800",title:e.copyDialogConfig.title,"mask-close":e.copyDialogConfig.quickClose,"close-icon":e.copyDialogConfig.closeIcon},on:{confirm:e.copyConfirmHandler,cancel:e.copyCancelHandler},model:{value:e.copyDialogConfig.isShow,callback:function(t){e.$set(e.copyDialogConfig,"isShow",t)},expression:"copyDialogConfig.isShow"}},[[i("section",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.copyConfig.loading},expression:"{ isLoading: copyConfig.loading }"}],staticClass:"copy-pipeline bk-form"},[i("div",{staticClass:"bk-form-item"},[i("label",{staticClass:"bk-label"},[e._v("名称：")]),e._v(" "),i("div",{staticClass:"bk-form-content"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.copyConfig.newPipelineName,expression:"copyConfig.newPipelineName"}],staticClass:"bk-form-input",class:{"is-danger":e.copyConfig.nameHasError},attrs:{type:"text",placeholder:"新流水线名称"},domProps:{value:e.copyConfig.newPipelineName},on:{input:[function(t){t.target.composing||e.$set(e.copyConfig,"newPipelineName",t.target.value)},function(t){e.copyConfig.nameHasError=!1}]}})])]),e._v(" "),i("div",{staticClass:"bk-form-item"},[i("label",{staticClass:"bk-label"},[e._v("描述：")]),e._v(" "),i("div",{staticClass:"bk-form-content"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.copyConfig.newPipelineDesc,expression:"copyConfig.newPipelineDesc"}],staticClass:"bk-form-input",class:{"is-danger":e.copyConfig.descHasError},attrs:{type:"text",placeholder:"新流水线描述"},domProps:{value:e.copyConfig.newPipelineDesc},on:{input:[function(t){t.target.composing||e.$set(e.copyConfig,"newPipelineDesc",t.target.value)},function(t){e.copyConfig.descHasError=!1}]}})])])])]],2),e._v(" "),i("bk-dialog",{attrs:{width:"800",title:e.saveAsTemp.title,"close-icon":e.saveAsTemp.closeIcon,"mask-close":e.saveAsTemp.quickClose},on:{confirm:e.saveAsConfirmHandler,cancel:e.saveAsCancelHandler},model:{value:e.saveAsTemp.isShow,callback:function(t){e.$set(e.saveAsTemp,"isShow",t)},expression:"saveAsTemp.isShow"}},[i("section",{staticClass:"copy-pipeline bk-form"},[i("div",{staticClass:"bk-form-item"},[i("label",{staticClass:"bk-label"},[e._v("模板名称")]),e._v(" "),i("div",{staticClass:"bk-form-content"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.saveAsTemp.templateName,expression:"saveAsTemp.templateName"},{name:"validate",rawName:"v-validate",value:"required|max:30",expression:'"required|max:30"'}],staticClass:"bk-form-input",class:{"is-danger":e.saveAsTemp.nameHasError},attrs:{type:"text",placeholder:"请输入模板名称，不能超过30个字符",name:"copyTemplateName",maxlength:"30"},domProps:{value:e.saveAsTemp.templateName},on:{input:[function(t){t.target.composing||e.$set(e.saveAsTemp,"templateName",t.target.value)},function(t){e.saveAsTemp.nameHasError=!1}]}})]),e._v(" "),e.errors.has("copyTemplateName")?i("div",{staticClass:"error-tips err-name"},[e._v("模板名称不能超过30个字符")]):e._e()]),e._v(" "),i("div",{staticClass:"bk-form-item"},[i("label",{staticClass:"bk-label tip-bottom"},[e._v("应用设置\n                        "),i("span",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips.bottom",value:"选“是”则将流水线设置应用于另存后的模版",expression:"'选“是”则将流水线设置应用于另存后的模版'",modifiers:{bottom:!0}}],staticClass:"bottom-start"},[i("i",{staticClass:"bk-icon icon-info-circle"})])]),e._v(" "),i("div",{staticClass:"bk-form-content"},[i("bk-radio-group",{model:{value:e.saveAsTemp.isCopySetting,callback:function(t){e.$set(e.saveAsTemp,"isCopySetting",t)},expression:"saveAsTemp.isCopySetting"}},e._l(e.copySettings,(function(t,n){return i("bk-radio",{key:n,staticClass:"auth-radio",attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)])])])],1)])},a=[];n._withStripped=!0,i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}))},mee8:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"progress-bar"},[i("div",{staticClass:"progress-bar-background"}),e._v(" "),i("div",{staticClass:"progress-bar-stripe",class:e.status,style:{width:e.percentage}},[e.hasIcon&&"success"===e.status?i("i",{staticClass:"bk-icon icon-check-1 success status-icon"}):e._e(),e._v(" "),e.hasIcon&&"error"===e.status||"known_error"===e.status?i("i",{staticClass:"bk-icon icon-exclamation error status-icon"}):e._e()])])},a=[];n._withStripped=!0,i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}))},n5FU:function(e,t,i){"use strict";i.r(t);var n=i("JcFz"),a=i("TZeu");for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);i("VwUo");var s=i("psIG"),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/pipeline/triggers.vue",t.default=o.exports},nolR:function(e,t,i){"use strict";i.r(t);var n=i("eTF4"),a=i("Y/by");for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);i("yn+x");var s=i("psIG"),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/pipelineList/PipelineTemplatePopup/index.vue",t.default=o.exports},pQI6:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(i("Kz1y")),a=c(i("eI+G")),r=c(i("ZdkB")),s=c(i("xBA8")),o=c(i("32o7")),l=i("TXTV");function c(e){return e&&e.__esModule?e:{default:e}}t.default={components:{Selector:s.default,EnumInput:r.default,VuexInput:a.default,FormField:o.default},props:{disabled:{type:Boolean,default:!1},paramValues:{type:Object,default:function(){return{}}},params:{type:Array,default:[]},handleParamChange:{type:Function,default:function(){return function(){}}}},computed:{paramList:function(){var e=this;return this.params.map((function(t){var i={};if(t.type!==l.STRING&&(i=(0,n.default)({},i,{displayKey:"value",settingKey:"key",list:e.getParamOpt(t)})),(0,l.isMultipleParam)(t.type)||(0,l.isEnumParam)(t.type)||(0,l.isSvnParam)(t.type)||(0,l.isCodelibParam)(t.type)){var a=e.getMultiSelectorValue(e.paramValues[t.id],t.options.map((function(e){return e.key}))),r=a.join(",");(0,n.default)(i,{multiSelect:(0,l.isMultipleParam)(t.type),value:a}),e.paramValues[t.id]!==r&&e.handleParamChange(t.id,r)}return(0,n.default)({},t,{component:l.ParamComponentMap[t.type],name:t.id,required:t.type===l.SVN_TAG,value:e.paramValues[t.id]},i)}))}},methods:{getParamOpt:function(e){switch(!0){case e.type===l.BOOLEAN:return l.BOOLEAN_LIST;case e.type===l.ENUM:case e.type===l.MULTIPLE:case e.type===l.SVN_TAG:case e.type===l.CODE_LIB:case e.type===l.CONTAINER_TYPE:return e.options;default:return[]}},submitForm:function(){this.$refs.previewParamsForm&&this.$refs.previewParamsForm.submit()},getMultiSelectorValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];return"string"==typeof e&&e?e.split(",").filter((function(e){return t.includes(e)})):[]},getParamByName:function(e){return this.paramList.find((function(t){return t.name===e}))},handleParamUpdate:function(e,t){var i=this.getParamByName(e);(0,l.isMultipleParam)(i.type)&&(t=Array.isArray(t)?t.join(","):""),this.handleParamChange(e,t)}}}},pQbY:function(e,t,i){"use strict";i.r(t);var n=i("BEa8"),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t.default=a.a},q0mH:function(e,t,i){"use strict";i.r(t);var n=i("+53F"),a=i("qqJe");for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);var s=i("psIG"),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/pipelineList/listEmpty.vue",t.default=o.exports},q1tI:function(e,t,i){"use strict";var n=i("KXcO");i.n(n).a},qJYy:function(e,t,i){"use strict";i.r(t);var n=i("pQI6"),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t.default=a.a},qeuZ:function(e,t,i){e.exports=i.p+"no-collect.png?57eda0c1f2985937c97819d1b5a6fa6e"},qqJe:function(e,t,i){"use strict";i.r(t);var n=i("MtPY"),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t.default=a.a},qzVq:function(e,t,i){"use strict";var n=i("iWdN");i.n(n).a},sJLE:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(i("TcPG")),a=p(i("06Hw")),r=p(i("tZmG")),s=p(i("YYXh")),o=p(i("Kz1y")),l=i("WIBD"),c=p(i("32o7")),u=p(i("Bny8"));function p(e){return e&&e.__esModule?e:{default:e}}t.default={components:{FormField:c.default,UserInput:u.default},props:{isDisabled:{type:Boolean,default:!1},isShow:{type:Boolean,default:!1},selectedFilter:{type:Object}},data:function(){return{sliderOpt:{title:"筛选",quickClose:!0,width:360},show:!0,currentFilter:{filterByPipelineName:"",filterByCreator:[],groups:[]}}},computed:(0,o.default)({},(0,l.mapGetters)({tagGroupList:"pipelines/getTagGroupList"}),{projectId:function(){return this.$route.params.projectId}}),watch:{projectId:function(){this.$emit("filter",{},{},!1)},tagGroupList:function(){this.empty()}},created:function(){this.init()},methods:{handleChange:function(e,t){this.currentFilter.filterByCreator=t},init:function(){var e=this;return(0,s.default)(a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,r.default)(e.selectedFilter).length>0?(0,o.default)(e.currentFilter,e.selectedFilter):e.empty();case 1:case"end":return t.stop()}}),t,e)})))()},handleCurrentFilter:function(){var e=this;this.tagGroupList.map((function(t){var i=e.currentFilter.groups.find((function(e){return e.id===t.id}));i?(0,o.default)(e.currentFilter,(0,n.default)({},t.id,i.labels)):(0,o.default)(e.currentFilter,(0,n.default)({},t.id,[]))}))},selected:function(e,t){},filterCommit:function(){var e=this;return(0,s.default)(a.default.mark((function t(){var i,n;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=[],"",e.tagGroupList.map((function(t){e.currentFilter[t.id]&&e.currentFilter[t.id].length>0&&(i=i.concat(e.currentFilter[t.id]))})),n=i.join(","),e.isDisabled=!0,t.next=7,e.$emit("filter",{projectId:e.projectId,filterByLabels:n,filterByPipelineName:e.currentFilter.filterByPipelineName,filterByCreator:e.currentFilter.filterByCreator.join(",")},e.currentFilter);case 7:case"end":return t.stop()}}),t,e)})))()},empty:function(){var e=this;this.currentFilter={filterByPipelineName:"",filterByCreator:[],groups:[]},this.tagGroupList.map((function(t){(0,o.default)(e.currentFilter,(0,n.default)({},t.id,[]))}))},hideSlide:function(){this.$emit("showSlide",!1)}}}},tNV3:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAA5CAYAAABZClfIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkU1NzFFNzcxRjUzQzExRTdBMkU1QUQxMkE2RTNCRDUwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkU1NzFFNzcyRjUzQzExRTdBMkU1QUQxMkE2RTNCRDUwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTU3MUU3NkZGNTNDMTFFN0EyRTVBRDEyQTZFM0JENTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTU3MUU3NzBGNTNDMTFFN0EyRTVBRDEyQTZFM0JENTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5558DUAAAHDUlEQVR42uycS2wbVRSGj9/vxInfsRMnsZu6DVBUXhIEVWwQgg1s6AYkBGIBEkVl1RXqigUgFq0qVNHCBpCg6mPBAomKDWyQAInSiDRJEzuOHceJ83BiO3H84Py3TpqWksaJp4md+aWra8+MZ3w/nznnzLkzVpTLZdqufv1z4Ch3x7gd4maixlCG21/cPu07HLpcix0qfvnjn/tuxAfbCPQp7t5raTKR1WIilUrZEKSLpRLNLWRpdn4Rb0899UjP+/faTqPe/HjV27TotwA60O4ij6OFGk1eZytNTM3Szejksd+uDQ4w8M+3s7+7Ya/6FMUmQD/B3Rm33Upo45Mpmpyep9xyvu4hK3j0ep2W3DYrtTlbKLuUB/TTDHyYgf9UK9ibtWgHdxctJr0OVj0wEqOZdIYcLU3kYvAKhaKuYSOOZXLLFI5PUTqTo1CXl5aW86rZdOYCA3+Ggfc/ENgMWsXddxq1qj3U7aNYcoZS7Nf28xeCz24ktTSZaSgSo7HEtBjf34ORZv4RrjDwpxn4VLX7U1ZcR3mdC6H/Wbaqj9lwnwt1eymfL1AkPs3+urXhQN+CbSKfy07RiWmaX8jQATYuNrIgzmoGrt0K7Gqs+lXuPuj0Osls0NON0RiZDDpqd9uoUdXGQbK12UyDkQkqlUt0MOCDm3yWV53bCmzFukbrAuQdyxj0Q9x9ZWe/jCg9PJaglWKRAh2euvfR91N3u5u0Gg39czNGBr2OevweLH6drftEzS2bQTdzd5mt2Njjd9Nkap6mZtPU5XWRXquhRpdKqaSezjbKFwo0GI6To7WJfLfO5o+Yzcu1hA2z/UatUgUPsJ9eZj89Ep0UmYfNaqG9IhhVkM/i2fQijbEP72xzkN1qEWwY+GNbga24R479IbeX9nd6SMsHHBiNk0ajJvjtvSYkAV4OmICdmltga/eQxWQw8qorDNx3X6vdqDbCO3iRux86PHYFN2HRiek5OhjsEIFxr2ooEqf5xSwd2t8pyhPXBsK0vFL4nVcd6TscylbtRhg0UpxvORIL0DOcS8f50rWdX+9l0LcDppoD5rjw5weDPlIqlY/zqq+Zm6Iq2PwBnBqXDDptswgMKwWR+lg573TbW2ivSwRM/+2AaeI0ONTVhlWvIGhWa9lf8g4fRkDEjm/wDpWc3gV8bpJVCZg67R0BE7k4gibrBBvra5uCzRse5+7oPs4ljewuUGBKs38K8KmjVqvqDgq+v6QB02lbC5hIB102ZMl0njn2bQibNzjC3Se4aLG3WEQRZmxiSlyON5mNdQd6MbtEMYaNXip5XTZh1UPsZlEdDHa4qdlixKX8pUrc+y/sSupygTdUIa0r8NXhDU7zzAYD+Vz1dTle4gwLRtI/PCbeo4/Ep8RySQImu1dNJWCWSmVRJWQ3A59yuXJBeBs2L8AvcVGn1TiwIa6+oxMpATzAv1S9XY4jvnR4HNTLKSqE3s/+VCnROJD+IWBy+kfRRArFKuoN+EitUqLE8X2lUrpWYj3DX+RJBERNxS/DBxn1OpFPViOL0UAGvXZXQDcb9eI0R1+NcuwOFrK5qo9n5HGDW6fXIRigBM1n1fN8Qp3m1e9iDvINFJj2+d3s3K1rH0ShCTWQaieE4YLW76ceNZmao3AsWfXn4AE8divn4a61ZRNTc3QzmsDLN2HZJ8UMy12A4OjRqhGfLg2V3m000b1ZeRxWWshkKTmTPgmf7a/HTKOeZDEJvh1KGcUDDNwyAhm2DFuWDFuGLUuGLcOWYcva3bBRG0CJsd6FMWCGalfDRnVtcQvVst0mjMEowaR2TWGjoDWbzojbbetV2aVlMQaMZVfDdjusoqY7GI5Rtg6B4ztjthxjwFhqLXVNfzn22b3BduofHqfrw2Pilluz0bDrn7MpFkvCdcCiARpjkGJWR13rHeLmlUdDflE0T87MiwlXPAy0m4VgiJmVLq9T1J+lmgZUS7FTfFk8i4ImS86zZdgybFky7HqUeicPjtskRmNJzDxToVCUdqAqFTltTSLj2KmbjnYUNkDPL+ao0+cWMKQU7u6aSKbEo4S4iWbPuRFYtMdpkxz0qmXjWInUnOyz5QApsZytTZRIzohTXGohJuBY7h28NQ4+O18ql3bkTkgEK/jtcDQhOfDVAOlvsz/wceLJYNYiYI/klvKhnYCNrKDb5xKtkYW7YlkRuJEf8W8x5XKZZEmT3lb+jecqYJ9fXikU8XyjrNoL/8QDvvzynLLvcOg6vzg7Mp6s+sZ3WRsLPEdj4m9JzoLzajZynM39av9QlOIcsWWXsn3XEU/OEnjy65/BV8SoVbCV52o+4/aOVqNW4gkoFNSlmGVuVGGSBMEQT0PnVwpIQb4AaLbq3B2wV8XQe7l7m9sL3Lq5aWSMmxb+CzCMYAgfXXHRa/pXgAEAdjq+qfD3Of4AAAAASUVORK5CYII="},vST7:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=i("tNV3"),r=(n=a)&&n.__esModule?n:{default:n};t.default={props:{imgType:{type:String,default:"noData"},title:{type:String,default:""},desc:{type:String,default:""},btns:{type:Array,default:function(){return[]}},btnDisabled:{type:Boolean,default:!1}},data:function(){return{noDataSrc:""}},created:function(){this.noDataSrc=r.default}}},wMB3:function(e,t,i){},yeJR:function(e,t,i){"use strict";i.r(t);var n=i("P3ei"),a=i("pQbY");for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);i("AcLf");var s=i("psIG"),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/devops/create_header.vue",t.default=o.exports},"yn+x":function(e,t,i){"use strict";var n=i("8dO6");i.n(n).a},zCn4:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("ygAv");t.default={props:{config:{type:Object,default:function(){return{buildId:0,buttonAllow:{},content:[],customBtns:[],extMenu:[],footer:[],isRunning:!1,name:"",runningInfo:{time:"0秒",percentage:"0%",log:"",buildCount:0},status:"success"}}}},data:function(){return{isShowExtMenu:!1,extMenuTimer:"",enterMenuTimer:""}},methods:{clickMenuItem:function(e){e.disable||(this.isShowExtMenu=!1,e.handler(this.config.pipelineId))},showExtMenu:function(){var e=this;clearTimeout(this.extMenuTimer),this.isShowExtMenu||(this.enterMenuTimer=setTimeout((function(){var t=e.$el.querySelector(".footer-ext-menu"),i=(0,n.converStrToNum)("90px","px"),a=42*e.config.extMenu.length,r=document.body,s=r.clientWidth,o=r.scrollHeight;e.isShowExtMenu=!0,e.$nextTick((function(){var e=(0,n.getActualLeft)(t),r=(0,n.getActualTop)(t);e+i>s&&(t.style.right="22px"),t.style.top=r+a>o?"-110px":"-1px"}))}),200))},hideExtMenu:function(){var e=this;clearTimeout(this.enterMenuTimer),this.extMenuTimer=setTimeout((function(){e.isShowExtMenu=!1,e.$el.querySelector(".footer-ext-menu").style.top="0"}),200)}}}},"zIl/":function(e,t,i){}}]);