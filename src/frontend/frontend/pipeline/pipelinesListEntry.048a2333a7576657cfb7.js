(window.webpackJsonp=window.webpackJsonp||[]).push([["pipelinesListEntry"],{"15pI":function(e,t,i){"use strict";var n=function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{width:this.size,height:this.size}},[t("use",this._b({},"use",{"xlink:href":"#"+this.name},!1))])},s=[];n._withStripped=!0,i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return s}))},"3XPF":function(e,t,i){"use strict";i.r(t);var n=i("wSpe"),s=i("B6GL");for(var r in s)"default"!==r&&function(e){i.d(t,e,(function(){return s[e]}))}(r);i("mSQ/");var a=i("psIG"),o=Object(a.a)(s.default,n.a,n.b,!1,null,"33cf49c0",null);o.options.__file="src/components/pipelineList/view_manage.vue",t.default=o.exports},"5OVS":function(e,t,i){},"7BZ5":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"sub-header clearfix"},[i("div",{staticClass:"sub-header-left clearfix"},[e._t("left",[e.$slots.logo?i("span",{staticClass:"default-logo fl"},[e._t("logo")],2):e._e(),e._v(" "),e.title?i("span",{staticClass:"default-title fl"},[e._v("\n                "+e._s(e.title)+"\n            ")]):e._e(),e._v(" "),e.links.length?i("i",{staticClass:"bk-icon icon-question-circle",on:{click:e.links[0].handler}}):e._e()])],2),e._v(" "),i("div",{staticClass:"sub-header-center"},[e._t("center")],2),e._v(" "),i("div",{staticClass:"sub-header-right clearfix"},[e._t("right")],2)])},s=[];n._withStripped=!0,i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return s}))},"94qr":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{title:{type:String,default:""},desc:{type:String},links:{type:Array,default:function(){return[]}}}}},"9IKd":function(e,t,i){"use strict";i.r(t);var n=i("7BZ5"),s=i("lojK");for(var r in s)"default"!==r&&function(e){i.d(t,e,(function(){return s[e]}))}(r);i("EUll");var a=i("psIG"),o=Object(a.a)(s.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/devops/pipeline_header.vue",t.default=o.exports},"9zZt":function(e,t,i){"use strict";i.r(t);var n=i("ZLw0"),s=i("PD59");for(var r in s)"default"!==r&&function(e){i.d(t,e,(function(){return s[e]}))}(r);i("Yhfs");var a=i("psIG"),o=Object(a.a)(s.default,n.a,n.b,!1,null,null,null);o.options.__file="src/views/list/index.vue",t.default=o.exports},B6GL:function(e,t,i){"use strict";i.r(t);var n=i("S9u3"),s=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t.default=s.a},E1oa:function(e,t,i){},E4OK:function(e,t,i){"use strict";i.r(t);var n=i("15pI"),s=i("UfR3");for(var r in s)"default"!==r&&function(e){i.d(t,e,(function(){return s[e]}))}(r);var a=i("psIG"),o=Object(a.a)(s.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/Logo/index.vue",t.default=o.exports},EUll:function(e,t,i){"use strict";var n=i("5OVS");i.n(n).a},OrOA:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"svg-logo",props:{name:String,size:{type:[String,Number],default:24}}}},PD59:function(e,t,i){"use strict";i.r(t);var n=i("ot5D"),s=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t.default=s.a},S9u3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(i("06Hw")),s=c(i("YYXh")),r=c(i("Kz1y")),a=i("WIBD"),o=c(i("Q6E5"));function c(e){return e&&e.__esModule?e:{default:e}}t.default={components:{draggable:o.default},data:function(){return{commonlyViewList:[]}},computed:(0,r.default)({},(0,a.mapState)("pipelines",["currentViewId","currentViewList","viewSettingList"]),{commonlyViews:{get:function(){return this.commonlyViewList},set:function(e){this.commonlyViewList=e}},dragOptions:function(){return{ghostClass:"sortable-ghost-view",animation:200}}}),created:function(){this.commonlyViewList=this.currentViewList.concat(),this.viewList=this.viewSettingList},methods:{isIncludeCommonly:function(e){return this.commonlyViews.some((function(t){return t.id===e}))},addHandler:function(e){this.commonlyViews.some((function(t){return t.id===e.id}))||7===this.commonlyViews.length||this.commonlyViews.push(e)},routeTocreateView:function(){this.$store.commit("pipelines/toggleShowViewManage",!1),this.$router.push({name:"pipelinesView"})},cancelHandler:function(e){this.commonlyViews.splice(e,1)},closeViewManage:function(){this.$store.commit("pipelines/toggleShowViewManage",!1)},saveViewManage:function(){var e=this;return(0,s.default)(n.default.mark((function t(){var i;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.commonlyViews.map((function(e){return e.id})),t.prev=1,t.next=4,e.$store.dispatch("pipelines/updateCurrentViewList",{projectId:e.$route.params.projectId,ids:i});case 4:e.$store.commit("pipelines/updateCurrentViewList",e.commonlyViews),e.commonlyViews.filter((function(t){return t.id===e.currentViewId})).length||(e.$store.commit("pipelines/updateCurrentViewId",i[0]),e.$router.push({name:"pipelinesList",params:{type:e.currentViewId}})),e.closeViewManage(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.$showTips({theme:"error",message:t.t0.message||t.t0});case 12:case"end":return t.stop()}}),t,e,[[1,9]])})))()}}}},UfR3:function(e,t,i){"use strict";i.r(t);var n=i("OrOA"),s=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t.default=s.a},Yhfs:function(e,t,i){"use strict";var n=i("cuMx");i.n(n).a},ZLw0:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("article",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.pageLoading},expression:"{\n        isLoading: pageLoading\n    }"}],staticClass:"pipeline-content"},[i("pipeline-header",{attrs:{title:e.header.title,links:e.header.links}},[i("span",{staticClass:"default-subheader-icon",attrs:{slot:"logo"},slot:"logo"},[i("logo",{attrs:{size:"32",name:"pipeline"}})],1),e._v(" "),i("ul",{staticClass:"header-list",attrs:{slot:"center"},slot:"center"},[e._l(e.currentViewList,(function(t,n){return i("li",{key:n},[i("a",{class:t.id===e.currentViewId&&"pipelinesList"===e.routeName?"active-item":"",attrs:{title:t.name},on:{click:function(i){return e.changePageType(t.id)}}},[e._v(e._s(t.name))])])})),e._v(" "),i("li",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.currentViewId,expression:"currentViewId"}],staticClass:"manage-view-btn"},[i("i",{staticClass:"bk-icon icon-plus",on:{click:function(t){return e.toggleShowViewManage()}}}),e._v(" "),e.showViewManage?i("view-manage"):e._e()],1)])],2),e._v(" "),i("div",{staticClass:"default-link-list",attrs:{slot:"right"},slot:"right"},[i("div",{staticClass:"dropdown-trigger",on:{click:function(t){return t.stopPropagation(),e.toggleIsMoreHandler(t)}}},[i("span",{staticClass:"more-handler",class:{"selectde-title":"更多"!==e.dropdownTitle},attrs:{id:"moreHeaderHandler"}},[e._v(e._s(e.dropdownTitle)+"\n                    "),i("i",{class:["bk-icon icon-angle-down",{"icon-flip":e.toggleIsMore},{"selectde-title":"更多"!==e.dropdownTitle}],attrs:{id:"toggleHeaderIcon"}})])]),e._v(" "),e.toggleIsMore?i("div",{staticClass:"dropdown-list"},[i("ul",{staticClass:"list-wrapper"},[i("li",[i("a",{staticClass:"text-link",class:{"selected-item":"pipelinesGroup"===e.routeName},attrs:{href:"javascript:;",id:"toggleLabels"},on:{click:function(t){return e.routerToManage("pipelinesGroup")}}},[e._v("标签管理")])]),e._v(" "),i("li",[i("a",{staticClass:"text-link",class:{"selected-item":"pipelinesView"===e.routeName},attrs:{href:"javascript:;",id:"toggleViews"},on:{click:function(t){return e.routerToManage("pipelinesView")}}},[e._v("视图管理")])]),e._v(" "),i("li",[i("a",{staticClass:"text-link",class:{"selected-item":"pipelinesTemplate"===e.routeName},attrs:{href:"javascript:;",id:"toggleTemplates"},on:{click:function(t){return e.routerToManage("pipelinesTemplate")}}},[e._v("模板管理")])])])]):e._e()])]),e._v(" "),e.showViewManage?i("div",{staticClass:"view-manage-background"}):e._e(),e._v(" "),e.currentViewId?i("router-view",{staticStyle:{width:"100%"}}):e._e()],1)},s=[];n._withStripped=!0,i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return s}))},cuMx:function(e,t,i){},lojK:function(e,t,i){"use strict";i.r(t);var n=i("94qr"),s=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t.default=s.a},"mSQ/":function(e,t,i){"use strict";var n=i("E1oa");i.n(n).a},ot5D:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=d(i("06Hw")),r=d(i("YYXh")),a=d(i("Kz1y")),o=i("WIBD"),c=d(i("9IKd")),l=d(i("E4OK")),u=d(i("3XPF"));function d(e){return e&&e.__esModule?e:{default:e}}t.default={components:{"pipeline-header":c.default,Logo:l.default,ViewManage:u.default},data:function(){return{isLoading:!1,toggleIsMore:!1,header:{title:"流水线",links:[{title:"入门指南",handler:this.tutorial}]}}},computed:(0,a.default)({},(0,o.mapState)("pipelines",["currentViewList","currentViewId","showViewManage","pageLoading"]),{pageType:function(){return this.$route.params.type},dropdownTitle:function(){return"pipelinesGroup"===this.routeName?"标签管理":"pipelinesView"===this.routeName?"视图管理":"pipelinesTemplate"===this.routeName?"模板管理":"更多"},routeName:function(){return this.$route.name},projectId:function(){return this.$route.params.projectId}}),watch:{projectId:(n=(0,r.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initListPage();case 2:this.$store.commit("pipelines/toggleShowViewManage",!1),this.$router.push({name:"pipelinesList",params:{type:this.currentViewId}});case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},created:function(){var e=this;return(0,r.default)(s.default.mark((function t(){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initListPage();case 2:e.addClickListenr();case 3:case"end":return t.stop()}}),t,e)})))()},beforeDestroy:function(){this.removeClickListenr()},methods:(0,a.default)({},(0,o.mapActions)("pipelines",["requestViewSettingInfo"]),(0,o.mapMutations)("pipelines",["updateViewSettingInfo","updateCurrentViewId"]),{addClickListenr:function(){document.addEventListener("mouseup",this.clickHandler)},removeClickListenr:function(){document.removeEventListener("mouseup",this.clickHandler)},toggleIsMoreHandler:function(){this.showViewManage||(this.toggleIsMore=!this.toggleIsMore)},clickHandler:function(e){var t=this;"moreHeaderHandler"!==e.target.id&&"toggleHeaderIcon"!==e.target.id&&setTimeout((function(){t.toggleIsMore=!1}),100)},tutorial:function(){window.open(DOCS_URL_PREFIX+"/所有服务/流水线/什么是流水线/summary.html","_blank")},routerToManage:function(e){this.$router.push({name:e})},toggleShowViewManage:function(){this.showViewManage||this.$store.commit("pipelines/toggleShowViewManage",!0)},changePageType:function(e){this.updateCurrentViewId(e),this.$router.push({name:"pipelinesList",params:{type:e}})},goToGroup:function(){this.$router.push({name:"pipelinesGroup"})},initListPage:function(){var e=this;return(0,r.default)(s.default.mark((function t(){var i;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.$store.commit("pipelines/showPageLoading",!0),t.next=4,e.requestViewSettingInfo({projectId:e.projectId});case 4:(i=t.sent).currentViewId&&e.updateViewSettingInfo(i),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.$showTips({theme:"error",message:t.t0.message||t.t0});case 11:return t.prev=11,e.$store.commit("pipelines/showPageLoading",!1),t.finish(11);case 14:case"end":return t.stop()}}),t,e,[[0,8,11,14]])})))()}})}},wSpe:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"view-manage-wrapper"},[i("div",{staticClass:"commonly-view-list"},[i("p",[e._v("我的常用视图\n            "),i("span",[e._v("（"),i("span",[e._v(e._s(e.commonlyViews.length))]),e._v("/7）")]),e._v(" "),i("bk-button",{staticClass:"cancen-btn",attrs:{size:"small"},on:{click:function(t){return t.stopPropagation(),e.closeViewManage()}}},[e._v("取消")]),e._v(" "),i("bk-button",{staticClass:"save-btn",attrs:{theme:"primary",size:"small"},on:{click:function(t){return t.stopPropagation(),e.saveViewManage()}}},[e._v("保存")])],1),e._v(" "),i("ul",{ref:"viewList",staticClass:"view-card-list"},[i("draggable",{attrs:{options:e.dragOptions},model:{value:e.commonlyViews,callback:function(t){e.commonlyViews=t},expression:"commonlyViews"}},e._l(e.commonlyViews,(function(t,n){return i("li",{key:n,staticClass:"view-card"},[i("span",[e._v(e._s(t.name))]),e._v(" "),e.commonlyViews.length>1?i("i",{staticClass:"delete-btn",on:{click:function(t){return t.stopPropagation(),e.cancelHandler(n)}}}):e._e()])})),0)],1)]),e._v(" "),i("div",{staticClass:"manage-view-content"},[i("ul",{staticClass:"manage-view-list"},e._l(e.viewSettingList,(function(t,n){return i("li",{key:n,staticClass:"view-item"},[i("h3",[e._v(e._s(t.label)),2===n?i("span",{staticClass:"add-view-btn",on:{click:function(t){return e.routeTocreateView()}}},[e._v("添加新视图")]):e._e()]),e._v(" "),e._l(t.viewList,(function(t,n){return i("div",{key:n,staticClass:"view-box"},[i("span",{staticClass:"view-title"},[e._v(e._s(t.name))]),e._v(" "),i("i",{staticClass:"bk-icon icon-plus-square",class:{"is-selected":e.isIncludeCommonly(t.id)||7===e.commonlyViews.length},on:{click:function(i){return e.addHandler(t)}}})])}))],2)})),0)])])},s=[];n._withStripped=!0,i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return s}))}}]);